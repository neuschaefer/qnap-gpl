.TH acpid 8 ""
.\" Portions Copyright (c) 2001 Sun Microsystems
.\" Portions Copyright (c) Tim Hockin (thockin@hockin.org.com)
.SH NAME
acpid \- Advanced Configuration and Power Interface event daemon
.SH SYNOPSIS
\fBacpid\fP [\fIoptions\fP]

.SH DESCRIPTION
\fBacpid\fP is designed to notify user-space programs of ACPI events.
\fBacpid\fP should be started during the system boot, and will run as a 
background process, by default.  It will open an events file 
(\fI/proc/acpi/event\fP by default) and attempt to read whole lines.  When 
a line is received (an \fIevent\fP), \fBacpid\fP will examine a list of rules, 
and execute the rules that match the event. 
.PP
\fIRules\fP are defined by simple configuration files.  \fBacpid\fP
will look in a configuration directory (\fI/etc/acpi/events\fP by default), 
and parse all files that do not begin with a period ('.').  Each file must
define two things: an \fIevent\fP and an \fIaction\fP.  Any blank lines, or
lines where the first character is a pound sign ('#') are ignored.  Extraneous
lines are flagged as warnings, but are not fatal.  Each line has three tokens:
the key, a literal equal sign, and the value.  The key can be up to 63
characters, and is case-insensitive (but whitespace matters).  The value can be
up to 511 characters, and is case and whitespace sensitive.
.PP
The event value is a regular expression (see regcomp(3)), against which events are matched.
.PP
The action value is a commandline, which will be invoked via \fI/bin/sh\fP
whenever an event matching the rule in question occurs.  The commandline may
include shell-special characters, and they will be preserved.  The only special
characters in an action value are "%" escaped.  The string "%e" will be
replaced by the literal text of the event for which the action was invoked.
This string may contain spaces, so the commandline must take care to quote the "%e" if it wants a single token.  The string "%%" will be replaced by a 
literal "%".  All other "%" escapes are reserved, and will cause a rule to 
not load.
.PP
This feature allows multiple rules to be defined for the same event (though no
ordering is guaranteed), as well as one rule to be defined for multiple events.
To force \fBacpid\fP to reload the rule configuration, send it a SIGHUP.
.PP
In addition to rule files, \fBacpid\fP also accepts connections on a UNIX 
domain socket (\fI/var/run/acpid.socket\fP by default).  Any application may 
connect to this socket.  Once connected, \fBacpid\fP will send the text of 
all ACPI events to the client.  The client has the responsibility of filtering
for messages about which it cares.  \fBacpid\fP will not close the client 
socket except in the case of a SIGHUP or \fBacpid\fP exiting.
.PP
.B acpid
will log all of it's activities, as well as the stdout and stderr of any
actions to syslog.
.PP
All the default file and directories can be changed with commandline options.
.SH OPTIONS
.TP 12
.BI \-c "\fR, \fP" \--confdir " directory"
This option changes the directory in which \fBacpid\fP looks for rule 
configuration files.  Default is \fI/etc/acpi/events\fP.
.TP 12
.BI \-d "\fR, \fP" \--debug
This option increases the \fBacpid\fP debug level by one.  If the debug level
is non-zero, \fBacpid\fP will run in the foreground, and will log to
stderr, in addition to the regular syslog.
.TP
.BI \-e "\fR, \fP" \--eventfile " filename"
This option changes the event file from which \fBacpid\fP reads events.
Default is \fI/proc/acpi/event\fP.
.TP
.BI \-f "\fR, \fP" \--foreground
This option keeps \fBacpid\fP in the foreground by not forking at startup.
.TP
.TP
.BI \-g "\fR, \fP" \--socketgroup " groupname"
This option changes the group ownership of the UNIX domain socket to which 
\fBacpid\fP publishes events.
.TP
.BI \-m "\fR, \fP" \--socketmode " mode"
This option changes the permissions of the UNIX domain socket to which
\fBacpid\fP publishes events.  Default is \fI0666\fP.
.TP
.BI \-s "\fR, \fP" \--socketfile " filename"
This option changes the name of the UNIX domain socket which \fBacpid\fP opens.
Default is \fI/var/run/acpid.socket\fP.
.TP
.BI \-S "\fR, \fP" \--nosocket " filename"
This option tells \fBacpid\fP not to open a UNIX domain socket.  This 
overrides the \fI-s\fP option, and negates all other socket options.
.TP
.BI \-v "\fR, \fP" \--version
Print version information and exit.
.TP
.BI \-h "\fR, \fP" \--help
Show help and exit.
.SH EXAMPLE
This example - placed in /etc/acpi/events/power - will shut down your system
if you press the power button.
.PP
.br
event=button/power.*
.br
action=/usr/local/sbin/power.sh "%e"
.PP
The script power.sh gets called and will see the complete event string
as parameter $1. 
.SH DEPENDENCIES
\fBacpid\fP should work on any linux kernel released since 2003.
.SH FILES
.PD 0
.B /proc/acpi/event
.br
.B /etc/acpi/
.br
.B /var/run/acpid.socket
.br
.PD
.SH BUGS
There are no known bugs.  To file bug reports, see \fBAUTHORS\fP below.
.SH SEE ALSO
regcomp(3), sh(1), socket(2), connect(2)
.SH AUTHORS
Tim Hockin <thockin@hockin.org>

