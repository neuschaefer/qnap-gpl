diff -Npur samba-4.7.10/VERSION samba-4.7.11/VERSION
--- samba-4.7.10/VERSION	2018-08-27 09:54:35.000000000 +0200
+++ samba-4.7.11/VERSION	2018-10-23 11:10:04.000000000 +0200
@@ -25,7 +25,7 @@
 ########################################################
 SAMBA_VERSION_MAJOR=4
 SAMBA_VERSION_MINOR=7
-SAMBA_VERSION_RELEASE=10
+SAMBA_VERSION_RELEASE=11
 
 ########################################################
 # If a official release has a serious bug              #
diff -Npur samba-4.7.10/WHATSNEW.txt samba-4.7.11/WHATSNEW.txt
--- samba-4.7.10/WHATSNEW.txt	2018-08-27 09:54:35.000000000 +0200
+++ samba-4.7.11/WHATSNEW.txt	2018-10-23 11:10:04.000000000 +0200
@@ -1,4 +1,69 @@
                    ==============================
+                   Release Notes for Samba 4.7.11
+                          October 23, 2018
+                   ==============================
+
+
+Please note that this will very likely be the last bugfix release of the Samba
+4.7 release series. There will be security fixes only beyond this point.
+
+
+Changes since 4.7.10:
+--------------------
+
+o  Paulo Alcantara <paulo@paulo.ac>
+   * BUG 13578: s3: util: Do not take over stderr when there is no log file.
+
+o  Jeremy Allison <jra@samba.org>
+   * BUG 13585: s3: smbd: Ensure get_real_filename() copes with empty pathnames.
+   * BUG 13633: s3: smbd: Prevent valgrind errors in smbtorture3 POSIX test.
+
+o  Ralph Boehme <slow@samba.org>
+   * BUG 13549:  Durable Reconnect fails because cookie.allow_reconnect is not
+     set redundant for SMB2.
+
+o  Alexander Bokovoy <ab@samba.org>
+   * BUG 13539: krb5-samba: Interdomain trust uses different salt principal.
+
+o  Volker Lendecke <vl@samba.org>
+   * BUG 13362: Fix possible memory leak in the Samba process.
+   * BUG 13441: vfs_fruit: Don't unlink the main file.
+   * BUG 13602: smbd: Fix a memleak in async search ask sharemode.
+
+o  Stefan Metzmacher <metze@samba.org>
+   * BUG 11517: Fix Samba GPO issue when Trust is enabled.
+   * BUG 13539: samba-tool: Add virtualKerberosSalt attribute to 'user
+     getpassword/syncpasswords'.
+   * BUG 13624: smb2_server: Set req->do_encryption = true earlier.
+
+o  Andreas Schneider <asn@samba.org>
+   * BUG 12851: s3:winbind: Fix regression.
+
+
+#######################################
+Reporting bugs & Development Discussion
+#######################################
+
+Please discuss this release on the samba-technical mailing list or by
+joining the #samba-technical IRC channel on irc.freenode.net.
+
+If you do report problems then please try to send high quality
+feedback. If you don't provide vital information to help us track down
+the problem then you will probably be ignored.  All bug reports should
+be filed under the "Samba 4.1 and newer" product in the project's Bugzilla
+database (https://bugzilla.samba.org/).
+
+
+======================================================================
+== Our Code, Our Bugs, Our Responsibility.
+== The Samba Team
+======================================================================
+
+
+Release notes for older releases follow:
+----------------------------------------
+
+                   ==============================
                    Release Notes for Samba 4.7.10
                            August 27, 2018
                    ==============================
@@ -100,8 +165,8 @@ database (https://bugzilla.samba.org/).
 ======================================================================
 
 
-Release notes for older releases follow:
-----------------------------------------
+----------------------------------------------------------------------
+
 
                    =============================
                    Release Notes for Samba 4.7.9
diff -Npur samba-4.7.10/auth/credentials/credentials_krb5.c samba-4.7.11/auth/credentials/credentials_krb5.c
--- samba-4.7.10/auth/credentials/credentials_krb5.c	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.11/auth/credentials/credentials_krb5.c	2018-10-23 11:10:04.000000000 +0200
@@ -34,6 +34,7 @@
 #include "auth/kerberos/kerberos_util.h"
 #include "auth/kerberos/pac_utils.h"
 #include "param/param.h"
+#include "../libds/common/flags.h"
 
 static void cli_credentials_invalidate_client_gss_creds(
 					struct cli_credentials *cred,
@@ -971,7 +972,7 @@ _PUBLIC_ int cli_credentials_get_keytab(
 	const char *upn = NULL;
 	const char *realm = cli_credentials_get_realm(cred);
 	char *salt_principal = NULL;
-	bool is_computer = false;
+	uint32_t uac_flags = 0;
 
 	if (cred->keytab_obtained >= (MAX(cred->principal_obtained, 
 					  cred->username_obtained))) {
@@ -996,9 +997,15 @@ _PUBLIC_ int cli_credentials_get_keytab(
 
 	switch (cred->secure_channel_type) {
 	case SEC_CHAN_WKSTA:
-	case SEC_CHAN_BDC:
 	case SEC_CHAN_RODC:
-		is_computer = true;
+		uac_flags = UF_WORKSTATION_TRUST_ACCOUNT;
+		break;
+	case SEC_CHAN_BDC:
+		uac_flags = UF_SERVER_TRUST_ACCOUNT;
+		break;
+	case SEC_CHAN_DOMAIN:
+	case SEC_CHAN_DNS_DOMAIN:
+		uac_flags = UF_INTERDOMAIN_TRUST_ACCOUNT;
 		break;
 	default:
 		upn = cli_credentials_get_principal(cred, mem_ctx);
@@ -1006,13 +1013,14 @@ _PUBLIC_ int cli_credentials_get_keytab(
 			TALLOC_FREE(mem_ctx);
 			return ENOMEM;
 		}
+		uac_flags = UF_NORMAL_ACCOUNT;
 		break;
 	}
 
 	ret = smb_krb5_salt_principal(realm,
 				      username, /* sAMAccountName */
 				      upn, /* userPrincipalName */
-				      is_computer,
+				      uac_flags,
 				      mem_ctx,
 				      &salt_principal);
 	if (ret) {
diff -Npur samba-4.7.10/ctdb/doc/ctdb-etcd.7 samba-4.7.11/ctdb/doc/ctdb-etcd.7
--- samba-4.7.10/ctdb/doc/ctdb-etcd.7	2018-08-27 10:03:43.000000000 +0200
+++ samba-4.7.11/ctdb/doc/ctdb-etcd.7	2018-10-23 11:13:46.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdb-etcd
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB\-ETCD" "7" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB\-ETCD" "7" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/ctdb/doc/ctdb-statistics.7 samba-4.7.11/ctdb/doc/ctdb-statistics.7
--- samba-4.7.10/ctdb/doc/ctdb-statistics.7	2018-08-27 10:03:42.000000000 +0200
+++ samba-4.7.11/ctdb/doc/ctdb-statistics.7	2018-10-23 11:13:46.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdb-statistics
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB\-STATISTICS" "7" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB\-STATISTICS" "7" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/ctdb/doc/ctdb-tunables.7 samba-4.7.11/ctdb/doc/ctdb-tunables.7
--- samba-4.7.10/ctdb/doc/ctdb-tunables.7	2018-08-27 10:03:43.000000000 +0200
+++ samba-4.7.11/ctdb/doc/ctdb-tunables.7	2018-10-23 11:13:46.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdb-tunables
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB\-TUNABLES" "7" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB\-TUNABLES" "7" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/ctdb/doc/ctdb.1 samba-4.7.11/ctdb/doc/ctdb.1
--- samba-4.7.10/ctdb/doc/ctdb.1	2018-08-27 10:03:39.000000000 +0200
+++ samba-4.7.11/ctdb/doc/ctdb.1	2018-10-23 11:13:43.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdb
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB" "1" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB" "1" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/ctdb/doc/ctdb.7 samba-4.7.11/ctdb/doc/ctdb.7
--- samba-4.7.10/ctdb/doc/ctdb.7	2018-08-27 10:03:42.000000000 +0200
+++ samba-4.7.11/ctdb/doc/ctdb.7	2018-10-23 11:13:45.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdb
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB" "7" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB" "7" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/ctdb/doc/ctdb_diagnostics.1 samba-4.7.11/ctdb/doc/ctdb_diagnostics.1
--- samba-4.7.10/ctdb/doc/ctdb_diagnostics.1	2018-08-27 10:03:40.000000000 +0200
+++ samba-4.7.11/ctdb/doc/ctdb_diagnostics.1	2018-10-23 11:13:44.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdb_diagnostics
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB_DIAGNOSTICS" "1" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB_DIAGNOSTICS" "1" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/ctdb/doc/ctdb_mutex_ceph_rados_helper.7 samba-4.7.11/ctdb/doc/ctdb_mutex_ceph_rados_helper.7
--- samba-4.7.10/ctdb/doc/ctdb_mutex_ceph_rados_helper.7	2018-08-27 10:03:44.000000000 +0200
+++ samba-4.7.11/ctdb/doc/ctdb_mutex_ceph_rados_helper.7	2018-10-23 11:13:47.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: Ceph RADOS Mutex
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CEPH RADOS MUTEX" "7" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CEPH RADOS MUTEX" "7" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/ctdb/doc/ctdbd.1 samba-4.7.11/ctdb/doc/ctdbd.1
--- samba-4.7.10/ctdb/doc/ctdbd.1	2018-08-27 10:03:39.000000000 +0200
+++ samba-4.7.11/ctdb/doc/ctdbd.1	2018-10-23 11:13:43.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdbd
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDBD" "1" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDBD" "1" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/ctdb/doc/ctdbd.conf.5 samba-4.7.11/ctdb/doc/ctdbd.conf.5
--- samba-4.7.10/ctdb/doc/ctdbd.conf.5	2018-08-27 10:03:42.000000000 +0200
+++ samba-4.7.11/ctdb/doc/ctdbd.conf.5	2018-10-23 11:13:45.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdbd.conf
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDBD\&.CONF" "5" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDBD\&.CONF" "5" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/ctdb/doc/ctdbd_wrapper.1 samba-4.7.11/ctdb/doc/ctdbd_wrapper.1
--- samba-4.7.10/ctdb/doc/ctdbd_wrapper.1	2018-08-27 10:03:41.000000000 +0200
+++ samba-4.7.11/ctdb/doc/ctdbd_wrapper.1	2018-10-23 11:13:44.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdbd_wrapper
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDBD_WRAPPER" "1" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDBD_WRAPPER" "1" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/ctdb/doc/ltdbtool.1 samba-4.7.11/ctdb/doc/ltdbtool.1
--- samba-4.7.10/ctdb/doc/ltdbtool.1	2018-08-27 10:03:40.000000000 +0200
+++ samba-4.7.11/ctdb/doc/ltdbtool.1	2018-10-23 11:13:43.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ltdbtool
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "LTDBTOOL" "1" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "LTDBTOOL" "1" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/ctdb/doc/onnode.1 samba-4.7.11/ctdb/doc/onnode.1
--- samba-4.7.10/ctdb/doc/onnode.1	2018-08-27 10:03:41.000000000 +0200
+++ samba-4.7.11/ctdb/doc/onnode.1	2018-10-23 11:13:45.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: onnode
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "ONNODE" "1" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "ONNODE" "1" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/ctdb/doc/ping_pong.1 samba-4.7.11/ctdb/doc/ping_pong.1
--- samba-4.7.10/ctdb/doc/ping_pong.1	2018-08-27 10:03:40.000000000 +0200
+++ samba-4.7.11/ctdb/doc/ping_pong.1	2018-10-23 11:13:44.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ping_pong
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "PING_PONG" "1" "08/27/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "PING_PONG" "1" "10/23/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/cifsdd.8 samba-4.7.11/docs/manpages/cifsdd.8
--- samba-4.7.10/docs/manpages/cifsdd.8	2018-08-27 10:03:45.000000000 +0200
+++ samba-4.7.11/docs/manpages/cifsdd.8	2018-10-23 11:13:48.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: cifsdd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "CIFSDD" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "CIFSDD" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/dbwrap_tool.1 samba-4.7.11/docs/manpages/dbwrap_tool.1
--- samba-4.7.10/docs/manpages/dbwrap_tool.1	2018-08-27 10:03:45.000000000 +0200
+++ samba-4.7.11/docs/manpages/dbwrap_tool.1	2018-10-23 11:13:48.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: dbwrap_tool
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "DBWRAP_TOOL" "1" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "DBWRAP_TOOL" "1" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/eventlogadm.8 samba-4.7.11/docs/manpages/eventlogadm.8
--- samba-4.7.10/docs/manpages/eventlogadm.8	2018-08-27 10:03:46.000000000 +0200
+++ samba-4.7.11/docs/manpages/eventlogadm.8	2018-10-23 11:13:49.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: eventlogadm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "EVENTLOGADM" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "EVENTLOGADM" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/findsmb.1 samba-4.7.11/docs/manpages/findsmb.1
--- samba-4.7.10/docs/manpages/findsmb.1	2018-08-27 10:03:46.000000000 +0200
+++ samba-4.7.11/docs/manpages/findsmb.1	2018-10-23 11:13:49.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: findsmb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "FINDSMB" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "FINDSMB" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/idmap_ad.8 samba-4.7.11/docs/manpages/idmap_ad.8
--- samba-4.7.10/docs/manpages/idmap_ad.8	2018-08-27 10:03:46.000000000 +0200
+++ samba-4.7.11/docs/manpages/idmap_ad.8	2018-10-23 11:13:49.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_ad
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_AD" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_AD" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/idmap_autorid.8 samba-4.7.11/docs/manpages/idmap_autorid.8
--- samba-4.7.10/docs/manpages/idmap_autorid.8	2018-08-27 10:03:46.000000000 +0200
+++ samba-4.7.11/docs/manpages/idmap_autorid.8	2018-10-23 11:13:49.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_autorid
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_AUTORID" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_AUTORID" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/idmap_hash.8 samba-4.7.11/docs/manpages/idmap_hash.8
--- samba-4.7.10/docs/manpages/idmap_hash.8	2018-08-27 10:03:46.000000000 +0200
+++ samba-4.7.11/docs/manpages/idmap_hash.8	2018-10-23 11:13:50.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_hash
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_HASH" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_HASH" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/idmap_ldap.8 samba-4.7.11/docs/manpages/idmap_ldap.8
--- samba-4.7.10/docs/manpages/idmap_ldap.8	2018-08-27 10:03:47.000000000 +0200
+++ samba-4.7.11/docs/manpages/idmap_ldap.8	2018-10-23 11:13:50.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_ldap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_LDAP" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_LDAP" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/idmap_nss.8 samba-4.7.11/docs/manpages/idmap_nss.8
--- samba-4.7.10/docs/manpages/idmap_nss.8	2018-08-27 10:03:47.000000000 +0200
+++ samba-4.7.11/docs/manpages/idmap_nss.8	2018-10-23 11:13:50.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_nss
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_NSS" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_NSS" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/idmap_rfc2307.8 samba-4.7.11/docs/manpages/idmap_rfc2307.8
--- samba-4.7.10/docs/manpages/idmap_rfc2307.8	2018-08-27 10:03:47.000000000 +0200
+++ samba-4.7.11/docs/manpages/idmap_rfc2307.8	2018-10-23 11:13:50.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_rfc2307
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_RFC2307" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_RFC2307" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/idmap_rid.8 samba-4.7.11/docs/manpages/idmap_rid.8
--- samba-4.7.10/docs/manpages/idmap_rid.8	2018-08-27 10:03:47.000000000 +0200
+++ samba-4.7.11/docs/manpages/idmap_rid.8	2018-10-23 11:13:50.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_rid
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_RID" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_RID" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/idmap_script.8 samba-4.7.11/docs/manpages/idmap_script.8
--- samba-4.7.10/docs/manpages/idmap_script.8	2018-08-27 10:03:48.000000000 +0200
+++ samba-4.7.11/docs/manpages/idmap_script.8	2018-10-23 11:13:51.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_script
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_SCRIPT" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_SCRIPT" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/idmap_tdb.8 samba-4.7.11/docs/manpages/idmap_tdb.8
--- samba-4.7.10/docs/manpages/idmap_tdb.8	2018-08-27 10:03:48.000000000 +0200
+++ samba-4.7.11/docs/manpages/idmap_tdb.8	2018-10-23 11:13:51.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_tdb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_TDB" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_TDB" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/idmap_tdb2.8 samba-4.7.11/docs/manpages/idmap_tdb2.8
--- samba-4.7.10/docs/manpages/idmap_tdb2.8	2018-08-27 10:03:48.000000000 +0200
+++ samba-4.7.11/docs/manpages/idmap_tdb2.8	2018-10-23 11:13:51.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_tdb2
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_TDB2" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_TDB2" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/libsmbclient.7 samba-4.7.11/docs/manpages/libsmbclient.7
--- samba-4.7.10/docs/manpages/libsmbclient.7	2018-08-27 10:03:48.000000000 +0200
+++ samba-4.7.11/docs/manpages/libsmbclient.7	2018-10-23 11:13:51.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: libsmbclient
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: 7
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "LIBSMBCLIENT" "7" "08/27/2018" "Samba 4\&.7" "7"
+.TH "LIBSMBCLIENT" "7" "10/23/2018" "Samba 4\&.7" "7"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/lmhosts.5 samba-4.7.11/docs/manpages/lmhosts.5
--- samba-4.7.10/docs/manpages/lmhosts.5	2018-08-27 10:03:48.000000000 +0200
+++ samba-4.7.11/docs/manpages/lmhosts.5	2018-10-23 11:13:51.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: lmhosts
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: File Formats and Conventions
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "LMHOSTS" "5" "08/27/2018" "Samba 4\&.7" "File Formats and Conventions"
+.TH "LMHOSTS" "5" "10/23/2018" "Samba 4\&.7" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/log2pcap.1 samba-4.7.11/docs/manpages/log2pcap.1
--- samba-4.7.10/docs/manpages/log2pcap.1	2018-08-27 10:03:49.000000000 +0200
+++ samba-4.7.11/docs/manpages/log2pcap.1	2018-10-23 11:13:52.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: log2pcap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "LOG2PCAP" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "LOG2PCAP" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/mvxattr.1 samba-4.7.11/docs/manpages/mvxattr.1
--- samba-4.7.10/docs/manpages/mvxattr.1	2018-08-27 10:03:49.000000000 +0200
+++ samba-4.7.11/docs/manpages/mvxattr.1	2018-10-23 11:13:52.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: mvxattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "MVXATTR" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "MVXATTR" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/net.8 samba-4.7.11/docs/manpages/net.8
--- samba-4.7.10/docs/manpages/net.8	2018-08-27 10:03:49.000000000 +0200
+++ samba-4.7.11/docs/manpages/net.8	2018-10-23 11:13:52.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: net
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "NET" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "NET" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/nmbd.8 samba-4.7.11/docs/manpages/nmbd.8
--- samba-4.7.10/docs/manpages/nmbd.8	2018-08-27 10:03:49.000000000 +0200
+++ samba-4.7.11/docs/manpages/nmbd.8	2018-10-23 11:13:52.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: nmbd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "NMBD" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "NMBD" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/nmblookup.1 samba-4.7.11/docs/manpages/nmblookup.1
--- samba-4.7.10/docs/manpages/nmblookup.1	2018-08-27 10:03:50.000000000 +0200
+++ samba-4.7.11/docs/manpages/nmblookup.1	2018-10-23 11:13:53.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: nmblookup
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "NMBLOOKUP" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "NMBLOOKUP" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/ntlm_auth.1 samba-4.7.11/docs/manpages/ntlm_auth.1
--- samba-4.7.10/docs/manpages/ntlm_auth.1	2018-08-27 10:03:50.000000000 +0200
+++ samba-4.7.11/docs/manpages/ntlm_auth.1	2018-10-23 11:13:53.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ntlm_auth
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "NTLM_AUTH" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "NTLM_AUTH" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/pam_winbind.8 samba-4.7.11/docs/manpages/pam_winbind.8
--- samba-4.7.10/docs/manpages/pam_winbind.8	2018-08-27 10:03:50.000000000 +0200
+++ samba-4.7.11/docs/manpages/pam_winbind.8	2018-10-23 11:13:53.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: pam_winbind
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: 8
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "PAM_WINBIND" "8" "08/27/2018" "Samba 4\&.7" "8"
+.TH "PAM_WINBIND" "8" "10/23/2018" "Samba 4\&.7" "8"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/pam_winbind.conf.5 samba-4.7.11/docs/manpages/pam_winbind.conf.5
--- samba-4.7.10/docs/manpages/pam_winbind.conf.5	2018-08-27 10:03:50.000000000 +0200
+++ samba-4.7.11/docs/manpages/pam_winbind.conf.5	2018-10-23 11:13:53.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: pam_winbind.conf
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: 5
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "PAM_WINBIND\&.CONF" "5" "08/27/2018" "Samba 4\&.7" "5"
+.TH "PAM_WINBIND\&.CONF" "5" "10/23/2018" "Samba 4\&.7" "5"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/pdbedit.8 samba-4.7.11/docs/manpages/pdbedit.8
--- samba-4.7.10/docs/manpages/pdbedit.8	2018-08-27 10:03:50.000000000 +0200
+++ samba-4.7.11/docs/manpages/pdbedit.8	2018-10-23 11:13:53.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: pdbedit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "PDBEDIT" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "PDBEDIT" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/profiles.1 samba-4.7.11/docs/manpages/profiles.1
--- samba-4.7.10/docs/manpages/profiles.1	2018-08-27 10:03:51.000000000 +0200
+++ samba-4.7.11/docs/manpages/profiles.1	2018-10-23 11:13:54.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: profiles
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "PROFILES" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "PROFILES" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/rpcclient.1 samba-4.7.11/docs/manpages/rpcclient.1
--- samba-4.7.10/docs/manpages/rpcclient.1	2018-08-27 10:03:51.000000000 +0200
+++ samba-4.7.11/docs/manpages/rpcclient.1	2018-10-23 11:13:54.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: rpcclient
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "RPCCLIENT" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "RPCCLIENT" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/samba-regedit.8 samba-4.7.11/docs/manpages/samba-regedit.8
--- samba-4.7.10/docs/manpages/samba-regedit.8	2018-08-27 10:03:51.000000000 +0200
+++ samba-4.7.11/docs/manpages/samba-regedit.8	2018-10-23 11:13:54.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: samba-regedit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SAMBA\-REGEDIT" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "SAMBA\-REGEDIT" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/samba-tool.8 samba-4.7.11/docs/manpages/samba-tool.8
--- samba-4.7.10/docs/manpages/samba-tool.8	2018-08-27 10:03:51.000000000 +0200
+++ samba-4.7.11/docs/manpages/samba-tool.8	2018-10-23 11:13:54.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: samba-tool
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SAMBA\-TOOL" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "SAMBA\-TOOL" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/samba.7 samba-4.7.11/docs/manpages/samba.7
--- samba-4.7.10/docs/manpages/samba.7	2018-08-27 10:03:52.000000000 +0200
+++ samba-4.7.11/docs/manpages/samba.7	2018-10-23 11:13:55.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: samba
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: Miscellanea
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SAMBA" "7" "08/27/2018" "Samba 4\&.7" "Miscellanea"
+.TH "SAMBA" "7" "10/23/2018" "Samba 4\&.7" "Miscellanea"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/samba.8 samba-4.7.11/docs/manpages/samba.8
--- samba-4.7.10/docs/manpages/samba.8	2018-08-27 10:03:52.000000000 +0200
+++ samba-4.7.11/docs/manpages/samba.8	2018-10-23 11:13:55.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: samba
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SAMBA" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "SAMBA" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/sharesec.1 samba-4.7.11/docs/manpages/sharesec.1
--- samba-4.7.10/docs/manpages/sharesec.1	2018-08-27 10:03:52.000000000 +0200
+++ samba-4.7.11/docs/manpages/sharesec.1	2018-10-23 11:13:55.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: sharesec
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SHARESEC" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "SHARESEC" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smb.conf.5 samba-4.7.11/docs/manpages/smb.conf.5
--- samba-4.7.10/docs/manpages/smb.conf.5	2018-08-27 10:03:54.000000000 +0200
+++ samba-4.7.11/docs/manpages/smb.conf.5	2018-10-23 11:13:56.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smb.conf
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: File Formats and Conventions
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMB\&.CONF" "5" "08/27/2018" "Samba 4\&.7" "File Formats and Conventions"
+.TH "SMB\&.CONF" "5" "10/23/2018" "Samba 4\&.7" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbcacls.1 samba-4.7.11/docs/manpages/smbcacls.1
--- samba-4.7.10/docs/manpages/smbcacls.1	2018-08-27 10:03:54.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbcacls.1	2018-10-23 11:13:57.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbcacls
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBCACLS" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "SMBCACLS" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbclient.1 samba-4.7.11/docs/manpages/smbclient.1
--- samba-4.7.10/docs/manpages/smbclient.1	2018-08-27 10:03:54.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbclient.1	2018-10-23 11:13:57.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbclient
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBCLIENT" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "SMBCLIENT" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbcontrol.1 samba-4.7.11/docs/manpages/smbcontrol.1
--- samba-4.7.10/docs/manpages/smbcontrol.1	2018-08-27 10:03:54.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbcontrol.1	2018-10-23 11:13:57.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbcontrol
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBCONTROL" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "SMBCONTROL" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbcquotas.1 samba-4.7.11/docs/manpages/smbcquotas.1
--- samba-4.7.10/docs/manpages/smbcquotas.1	2018-08-27 10:03:55.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbcquotas.1	2018-10-23 11:13:57.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbcquotas
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBCQUOTAS" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "SMBCQUOTAS" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbd.8 samba-4.7.11/docs/manpages/smbd.8
--- samba-4.7.10/docs/manpages/smbd.8	2018-08-27 10:03:55.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbd.8	2018-10-23 11:13:58.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBD" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "SMBD" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbget.1 samba-4.7.11/docs/manpages/smbget.1
--- samba-4.7.10/docs/manpages/smbget.1	2018-08-27 10:03:55.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbget.1	2018-10-23 11:13:58.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbget
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBGET" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "SMBGET" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbgetrc.5 samba-4.7.11/docs/manpages/smbgetrc.5
--- samba-4.7.10/docs/manpages/smbgetrc.5	2018-08-27 10:03:55.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbgetrc.5	2018-10-23 11:13:58.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbgetrc
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: File Formats and Conventions
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBGETRC" "5" "08/27/2018" "Samba 4\&.7" "File Formats and Conventions"
+.TH "SMBGETRC" "5" "10/23/2018" "Samba 4\&.7" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbpasswd.5 samba-4.7.11/docs/manpages/smbpasswd.5
--- samba-4.7.10/docs/manpages/smbpasswd.5	2018-08-27 10:03:55.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbpasswd.5	2018-10-23 11:13:58.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbpasswd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: File Formats and Conventions
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBPASSWD" "5" "08/27/2018" "Samba 4\&.7" "File Formats and Conventions"
+.TH "SMBPASSWD" "5" "10/23/2018" "Samba 4\&.7" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbpasswd.8 samba-4.7.11/docs/manpages/smbpasswd.8
--- samba-4.7.10/docs/manpages/smbpasswd.8	2018-08-27 10:03:56.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbpasswd.8	2018-10-23 11:13:59.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbpasswd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBPASSWD" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "SMBPASSWD" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbspool.8 samba-4.7.11/docs/manpages/smbspool.8
--- samba-4.7.10/docs/manpages/smbspool.8	2018-08-27 10:03:56.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbspool.8	2018-10-23 11:13:59.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbspool
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBSPOOL" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "SMBSPOOL" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbspool_krb5_wrapper.8 samba-4.7.11/docs/manpages/smbspool_krb5_wrapper.8
--- samba-4.7.10/docs/manpages/smbspool_krb5_wrapper.8	2018-08-27 10:03:56.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbspool_krb5_wrapper.8	2018-10-23 11:13:59.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbspool_krb5_wrapper
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBSPOOL_KRB5_WRAPPE" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "SMBSPOOL_KRB5_WRAPPE" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbstatus.1 samba-4.7.11/docs/manpages/smbstatus.1
--- samba-4.7.10/docs/manpages/smbstatus.1	2018-08-27 10:03:56.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbstatus.1	2018-10-23 11:13:59.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbstatus
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBSTATUS" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "SMBSTATUS" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbtar.1 samba-4.7.11/docs/manpages/smbtar.1
--- samba-4.7.10/docs/manpages/smbtar.1	2018-08-27 10:03:57.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbtar.1	2018-10-23 11:13:59.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbtar
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBTAR" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "SMBTAR" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/smbtree.1 samba-4.7.11/docs/manpages/smbtree.1
--- samba-4.7.10/docs/manpages/smbtree.1	2018-08-27 10:03:57.000000000 +0200
+++ samba-4.7.11/docs/manpages/smbtree.1	2018-10-23 11:14:00.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbtree
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBTREE" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "SMBTREE" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/testparm.1 samba-4.7.11/docs/manpages/testparm.1
--- samba-4.7.10/docs/manpages/testparm.1	2018-08-27 10:03:57.000000000 +0200
+++ samba-4.7.11/docs/manpages/testparm.1	2018-10-23 11:14:00.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: testparm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "TESTPARM" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "TESTPARM" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_acl_tdb.8 samba-4.7.11/docs/manpages/vfs_acl_tdb.8
--- samba-4.7.10/docs/manpages/vfs_acl_tdb.8	2018-08-27 10:03:57.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_acl_tdb.8	2018-10-23 11:14:00.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_acl_tdb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_ACL_TDB" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_ACL_TDB" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_acl_xattr.8 samba-4.7.11/docs/manpages/vfs_acl_xattr.8
--- samba-4.7.10/docs/manpages/vfs_acl_xattr.8	2018-08-27 10:03:57.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_acl_xattr.8	2018-10-23 11:14:00.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_acl_xattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_ACL_XATTR" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_ACL_XATTR" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_aio_fork.8 samba-4.7.11/docs/manpages/vfs_aio_fork.8
--- samba-4.7.10/docs/manpages/vfs_aio_fork.8	2018-08-27 10:03:58.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_aio_fork.8	2018-10-23 11:14:01.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_aio_fork
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_AIO_FORK" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_AIO_FORK" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_aio_linux.8 samba-4.7.11/docs/manpages/vfs_aio_linux.8
--- samba-4.7.10/docs/manpages/vfs_aio_linux.8	2018-08-27 10:03:58.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_aio_linux.8	2018-10-23 11:14:01.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_aio_linux
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_AIO_LINUX" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_AIO_LINUX" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_aio_pthread.8 samba-4.7.11/docs/manpages/vfs_aio_pthread.8
--- samba-4.7.10/docs/manpages/vfs_aio_pthread.8	2018-08-27 10:03:58.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_aio_pthread.8	2018-10-23 11:14:01.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_aio_pthread
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_AIO_PTHREAD" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_AIO_PTHREAD" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_audit.8 samba-4.7.11/docs/manpages/vfs_audit.8
--- samba-4.7.10/docs/manpages/vfs_audit.8	2018-08-27 10:03:58.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_audit.8	2018-10-23 11:14:01.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_AUDIT" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_AUDIT" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_btrfs.8 samba-4.7.11/docs/manpages/vfs_btrfs.8
--- samba-4.7.10/docs/manpages/vfs_btrfs.8	2018-08-27 10:03:59.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_btrfs.8	2018-10-23 11:14:01.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_btrfs
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_BTRFS" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_BTRFS" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_cacheprime.8 samba-4.7.11/docs/manpages/vfs_cacheprime.8
--- samba-4.7.10/docs/manpages/vfs_cacheprime.8	2018-08-27 10:03:59.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_cacheprime.8	2018-10-23 11:14:02.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_cacheprime
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_CACHEPRIME" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_CACHEPRIME" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_cap.8 samba-4.7.11/docs/manpages/vfs_cap.8
--- samba-4.7.10/docs/manpages/vfs_cap.8	2018-08-27 10:03:59.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_cap.8	2018-10-23 11:14:02.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_cap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_CAP" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_CAP" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_catia.8 samba-4.7.11/docs/manpages/vfs_catia.8
--- samba-4.7.10/docs/manpages/vfs_catia.8	2018-08-27 10:03:59.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_catia.8	2018-10-23 11:14:02.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_catia
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_CATIA" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_CATIA" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_ceph.8 samba-4.7.11/docs/manpages/vfs_ceph.8
--- samba-4.7.10/docs/manpages/vfs_ceph.8	2018-08-27 10:03:59.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_ceph.8	2018-10-23 11:14:02.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_ceph
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_CEPH" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_CEPH" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_commit.8 samba-4.7.11/docs/manpages/vfs_commit.8
--- samba-4.7.10/docs/manpages/vfs_commit.8	2018-08-27 10:04:00.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_commit.8	2018-10-23 11:14:02.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_commit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_COMMIT" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_COMMIT" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_crossrename.8 samba-4.7.11/docs/manpages/vfs_crossrename.8
--- samba-4.7.10/docs/manpages/vfs_crossrename.8	2018-08-27 10:04:00.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_crossrename.8	2018-10-23 11:14:03.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_crossrename
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_CROSSRENAME" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_CROSSRENAME" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_default_quota.8 samba-4.7.11/docs/manpages/vfs_default_quota.8
--- samba-4.7.10/docs/manpages/vfs_default_quota.8	2018-08-27 10:04:00.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_default_quota.8	2018-10-23 11:14:03.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_default_quota
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_DEFAULT_QUOTA" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_DEFAULT_QUOTA" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_dirsort.8 samba-4.7.11/docs/manpages/vfs_dirsort.8
--- samba-4.7.10/docs/manpages/vfs_dirsort.8	2018-08-27 10:04:00.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_dirsort.8	2018-10-23 11:14:03.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_dirsort
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_DIRSORT" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_DIRSORT" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_extd_audit.8 samba-4.7.11/docs/manpages/vfs_extd_audit.8
--- samba-4.7.10/docs/manpages/vfs_extd_audit.8	2018-08-27 10:04:00.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_extd_audit.8	2018-10-23 11:14:03.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_extd_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_EXTD_AUDIT" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_EXTD_AUDIT" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_fake_perms.8 samba-4.7.11/docs/manpages/vfs_fake_perms.8
--- samba-4.7.10/docs/manpages/vfs_fake_perms.8	2018-08-27 10:04:01.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_fake_perms.8	2018-10-23 11:14:03.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_fake_perms
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_FAKE_PERMS" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_FAKE_PERMS" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_fileid.8 samba-4.7.11/docs/manpages/vfs_fileid.8
--- samba-4.7.10/docs/manpages/vfs_fileid.8	2018-08-27 10:04:01.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_fileid.8	2018-10-23 11:14:04.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_fileid
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_FILEID" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_FILEID" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_fruit.8 samba-4.7.11/docs/manpages/vfs_fruit.8
--- samba-4.7.10/docs/manpages/vfs_fruit.8	2018-08-27 10:04:01.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_fruit.8	2018-10-23 11:14:04.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_fruit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_FRUIT" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_FRUIT" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_full_audit.8 samba-4.7.11/docs/manpages/vfs_full_audit.8
--- samba-4.7.10/docs/manpages/vfs_full_audit.8	2018-08-27 10:04:01.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_full_audit.8	2018-10-23 11:14:04.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_full_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_FULL_AUDIT" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_FULL_AUDIT" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_glusterfs.8 samba-4.7.11/docs/manpages/vfs_glusterfs.8
--- samba-4.7.10/docs/manpages/vfs_glusterfs.8	2018-08-27 10:04:02.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_glusterfs.8	2018-10-23 11:14:05.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_glusterfs
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_GLUSTERFS" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_GLUSTERFS" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_gpfs.8 samba-4.7.11/docs/manpages/vfs_gpfs.8
--- samba-4.7.10/docs/manpages/vfs_gpfs.8	2018-08-27 10:04:02.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_gpfs.8	2018-10-23 11:14:05.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_gpfs
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_GPFS" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_GPFS" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_linux_xfs_sgid.8 samba-4.7.11/docs/manpages/vfs_linux_xfs_sgid.8
--- samba-4.7.10/docs/manpages/vfs_linux_xfs_sgid.8	2018-08-27 10:04:02.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_linux_xfs_sgid.8	2018-10-23 11:14:05.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_syncops
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_SYNCOPS" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_SYNCOPS" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_media_harmony.8 samba-4.7.11/docs/manpages/vfs_media_harmony.8
--- samba-4.7.10/docs/manpages/vfs_media_harmony.8	2018-08-27 10:04:02.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_media_harmony.8	2018-10-23 11:14:05.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_media_harmony
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_MEDIA_HARMONY" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_MEDIA_HARMONY" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_netatalk.8 samba-4.7.11/docs/manpages/vfs_netatalk.8
--- samba-4.7.10/docs/manpages/vfs_netatalk.8	2018-08-27 10:04:02.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_netatalk.8	2018-10-23 11:14:05.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_netatalk
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_NETATALK" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_NETATALK" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_offline.8 samba-4.7.11/docs/manpages/vfs_offline.8
--- samba-4.7.10/docs/manpages/vfs_offline.8	2018-08-27 10:04:03.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_offline.8	2018-10-23 11:14:06.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_offline
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_OFFLINE" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_OFFLINE" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_prealloc.8 samba-4.7.11/docs/manpages/vfs_prealloc.8
--- samba-4.7.10/docs/manpages/vfs_prealloc.8	2018-08-27 10:04:03.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_prealloc.8	2018-10-23 11:14:06.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_prealloc
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_PREALLOC" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_PREALLOC" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_preopen.8 samba-4.7.11/docs/manpages/vfs_preopen.8
--- samba-4.7.10/docs/manpages/vfs_preopen.8	2018-08-27 10:04:03.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_preopen.8	2018-10-23 11:14:06.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_preopen
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_PREOPEN" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_PREOPEN" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_readahead.8 samba-4.7.11/docs/manpages/vfs_readahead.8
--- samba-4.7.10/docs/manpages/vfs_readahead.8	2018-08-27 10:04:03.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_readahead.8	2018-10-23 11:14:06.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_readahead
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_READAHEAD" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_READAHEAD" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_readonly.8 samba-4.7.11/docs/manpages/vfs_readonly.8
--- samba-4.7.10/docs/manpages/vfs_readonly.8	2018-08-27 10:04:03.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_readonly.8	2018-10-23 11:14:07.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_readonly
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_READONLY" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_READONLY" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_recycle.8 samba-4.7.11/docs/manpages/vfs_recycle.8
--- samba-4.7.10/docs/manpages/vfs_recycle.8	2018-08-27 10:04:04.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_recycle.8	2018-10-23 11:14:07.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_recycle
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_RECYCLE" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_RECYCLE" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_shadow_copy.8 samba-4.7.11/docs/manpages/vfs_shadow_copy.8
--- samba-4.7.10/docs/manpages/vfs_shadow_copy.8	2018-08-27 10:04:04.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_shadow_copy.8	2018-10-23 11:14:07.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_shadow_copy
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_SHADOW_COPY" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_SHADOW_COPY" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_shadow_copy2.8 samba-4.7.11/docs/manpages/vfs_shadow_copy2.8
--- samba-4.7.10/docs/manpages/vfs_shadow_copy2.8	2018-08-27 10:04:04.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_shadow_copy2.8	2018-10-23 11:14:07.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_shadow_copy2
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_SHADOW_COPY2" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_SHADOW_COPY2" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_shell_snap.8 samba-4.7.11/docs/manpages/vfs_shell_snap.8
--- samba-4.7.10/docs/manpages/vfs_shell_snap.8	2018-08-27 10:04:04.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_shell_snap.8	2018-10-23 11:14:07.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_shell_snap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_SHELL_SNAP" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_SHELL_SNAP" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_snapper.8 samba-4.7.11/docs/manpages/vfs_snapper.8
--- samba-4.7.10/docs/manpages/vfs_snapper.8	2018-08-27 10:04:04.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_snapper.8	2018-10-23 11:14:08.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_snapper
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_SNAPPER" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_SNAPPER" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_streams_depot.8 samba-4.7.11/docs/manpages/vfs_streams_depot.8
--- samba-4.7.10/docs/manpages/vfs_streams_depot.8	2018-08-27 10:04:05.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_streams_depot.8	2018-10-23 11:14:08.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_streams_depot
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_STREAMS_DEPOT" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_STREAMS_DEPOT" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_streams_xattr.8 samba-4.7.11/docs/manpages/vfs_streams_xattr.8
--- samba-4.7.10/docs/manpages/vfs_streams_xattr.8	2018-08-27 10:04:05.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_streams_xattr.8	2018-10-23 11:14:08.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_streams_xattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_STREAMS_XATTR" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_STREAMS_XATTR" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_syncops.8 samba-4.7.11/docs/manpages/vfs_syncops.8
--- samba-4.7.10/docs/manpages/vfs_syncops.8	2018-08-27 10:04:05.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_syncops.8	2018-10-23 11:14:08.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_syncops
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_SYNCOPS" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_SYNCOPS" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_time_audit.8 samba-4.7.11/docs/manpages/vfs_time_audit.8
--- samba-4.7.10/docs/manpages/vfs_time_audit.8	2018-08-27 10:04:05.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_time_audit.8	2018-10-23 11:14:09.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_time_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_TIME_AUDIT" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_TIME_AUDIT" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_tsmsm.8 samba-4.7.11/docs/manpages/vfs_tsmsm.8
--- samba-4.7.10/docs/manpages/vfs_tsmsm.8	2018-08-27 10:04:05.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_tsmsm.8	2018-10-23 11:14:09.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_tsmsm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_TSMSM" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_TSMSM" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_unityed_media.8 samba-4.7.11/docs/manpages/vfs_unityed_media.8
--- samba-4.7.10/docs/manpages/vfs_unityed_media.8	2018-08-27 10:04:06.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_unityed_media.8	2018-10-23 11:14:09.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_unityed_media
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_UNITYED_MEDIA" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_UNITYED_MEDIA" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_worm.8 samba-4.7.11/docs/manpages/vfs_worm.8
--- samba-4.7.10/docs/manpages/vfs_worm.8	2018-08-27 10:04:06.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_worm.8	2018-10-23 11:14:09.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_worm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_WORM" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_WORM" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_xattr_tdb.8 samba-4.7.11/docs/manpages/vfs_xattr_tdb.8
--- samba-4.7.10/docs/manpages/vfs_xattr_tdb.8	2018-08-27 10:04:06.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_xattr_tdb.8	2018-10-23 11:14:09.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_xattr_tdb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_XATTR_TDB" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_XATTR_TDB" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfs_zfsacl.8 samba-4.7.11/docs/manpages/vfs_zfsacl.8
--- samba-4.7.10/docs/manpages/vfs_zfsacl.8	2018-08-27 10:04:06.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfs_zfsacl.8	2018-10-23 11:14:10.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_zfsacl
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_ZFSACL" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_ZFSACL" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/vfstest.1 samba-4.7.11/docs/manpages/vfstest.1
--- samba-4.7.10/docs/manpages/vfstest.1	2018-08-27 10:04:07.000000000 +0200
+++ samba-4.7.11/docs/manpages/vfstest.1	2018-10-23 11:14:10.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfstest
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFSTEST" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "VFSTEST" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/wbinfo.1 samba-4.7.11/docs/manpages/wbinfo.1
--- samba-4.7.10/docs/manpages/wbinfo.1	2018-08-27 10:04:07.000000000 +0200
+++ samba-4.7.11/docs/manpages/wbinfo.1	2018-10-23 11:14:10.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: wbinfo
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "WBINFO" "1" "08/27/2018" "Samba 4\&.7" "User Commands"
+.TH "WBINFO" "1" "10/23/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/winbind_krb5_locator.7 samba-4.7.11/docs/manpages/winbind_krb5_locator.7
--- samba-4.7.10/docs/manpages/winbind_krb5_locator.7	2018-08-27 10:04:07.000000000 +0200
+++ samba-4.7.11/docs/manpages/winbind_krb5_locator.7	2018-10-23 11:14:10.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: winbind_krb5_locator
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: 7
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "WINBIND_KRB5_LOCATOR" "7" "08/27/2018" "Samba 4\&.7" "7"
+.TH "WINBIND_KRB5_LOCATOR" "7" "10/23/2018" "Samba 4\&.7" "7"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/docs/manpages/winbindd.8 samba-4.7.11/docs/manpages/winbindd.8
--- samba-4.7.10/docs/manpages/winbindd.8	2018-08-27 10:04:07.000000000 +0200
+++ samba-4.7.11/docs/manpages/winbindd.8	2018-10-23 11:14:11.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: winbindd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/27/2018
+.\"      Date: 10/23/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "WINBINDD" "8" "08/27/2018" "Samba 4\&.7" "System Administration tools"
+.TH "WINBINDD" "8" "10/23/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.10/lib/krb5_wrap/krb5_samba.c samba-4.7.11/lib/krb5_wrap/krb5_samba.c
--- samba-4.7.10/lib/krb5_wrap/krb5_samba.c	2018-08-27 09:54:35.000000000 +0200
+++ samba-4.7.11/lib/krb5_wrap/krb5_samba.c	2018-10-23 11:10:04.000000000 +0200
@@ -24,6 +24,7 @@
 #include "system/filesys.h"
 #include "krb5_samba.h"
 #include "lib/crypto/crypto.h"
+#include "../libds/common/flags.h"
 
 #ifdef HAVE_COM_ERR_H
 #include <com_err.h>
@@ -445,8 +446,7 @@ int smb_krb5_get_pw_salt(krb5_context co
  * @param[in]  userPrincipalName  The userPrincipalName attribute of the object
  *                                or NULL is not available.
  *
- * @param[in]  is_computer        The indication of the object includes
- *                                objectClass=computer.
+ * @param[in]  uac_flags          UF_ACCOUNT_TYPE_MASKed userAccountControl field
  *
  * @param[in]  mem_ctx            The TALLOC_CTX to allocate _salt_principal.
  *
@@ -459,7 +459,7 @@ int smb_krb5_get_pw_salt(krb5_context co
 int smb_krb5_salt_principal(const char *realm,
 			    const char *sAMAccountName,
 			    const char *userPrincipalName,
-			    bool is_computer,
+			    uint32_t uac_flags,
 			    TALLOC_CTX *mem_ctx,
 			    char **_salt_principal)
 {
@@ -480,6 +480,23 @@ int smb_krb5_salt_principal(const char *
 		return EINVAL;
 	}
 
+	if (uac_flags & ~UF_ACCOUNT_TYPE_MASK) {
+		/*
+		 * catch callers which still
+		 * pass 'true'.
+		 */
+		TALLOC_FREE(frame);
+		return EINVAL;
+	}
+	if (uac_flags == 0) {
+		/*
+		 * catch callers which still
+		 * pass 'false'.
+		 */
+		TALLOC_FREE(frame);
+		return EINVAL;
+	}
+
 	upper_realm = strupper_talloc(frame, realm);
 	if (upper_realm == NULL) {
 		TALLOC_FREE(frame);
@@ -493,7 +510,7 @@ int smb_krb5_salt_principal(const char *
 	/*
 	 * Determine a salting principal
 	 */
-	if (is_computer) {
+	if (uac_flags & UF_TRUST_ACCOUNT_MASK) {
 		int computer_len = 0;
 		char *tmp = NULL;
 
@@ -502,20 +519,32 @@ int smb_krb5_salt_principal(const char *
 			computer_len -= 1;
 		}
 
-		tmp = talloc_asprintf(frame, "host/%*.*s.%s",
-				      computer_len, computer_len,
-				      sAMAccountName, realm);
-		if (tmp == NULL) {
-			TALLOC_FREE(frame);
-			return ENOMEM;
-		}
+		if (uac_flags & UF_INTERDOMAIN_TRUST_ACCOUNT) {
+			principal = talloc_asprintf(frame, "krbtgt/%*.*s",
+						    computer_len, computer_len,
+						    sAMAccountName);
+			if (principal == NULL) {
+				TALLOC_FREE(frame);
+				return ENOMEM;
+			}
+		} else {
 
-		principal = strlower_talloc(frame, tmp);
-		TALLOC_FREE(tmp);
-		if (principal == NULL) {
-			TALLOC_FREE(frame);
-			return ENOMEM;
+			tmp = talloc_asprintf(frame, "host/%*.*s.%s",
+					      computer_len, computer_len,
+					      sAMAccountName, realm);
+			if (tmp == NULL) {
+				TALLOC_FREE(frame);
+				return ENOMEM;
+			}
+
+			principal = strlower_talloc(frame, tmp);
+			TALLOC_FREE(tmp);
+			if (principal == NULL) {
+				TALLOC_FREE(frame);
+				return ENOMEM;
+			}
 		}
+
 		principal_len = strlen(principal);
 
 	} else if (userPrincipalName != NULL) {
diff -Npur samba-4.7.10/lib/krb5_wrap/krb5_samba.h samba-4.7.11/lib/krb5_wrap/krb5_samba.h
--- samba-4.7.10/lib/krb5_wrap/krb5_samba.h	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.11/lib/krb5_wrap/krb5_samba.h	2018-10-23 11:10:04.000000000 +0200
@@ -353,7 +353,7 @@ int smb_krb5_get_pw_salt(krb5_context co
 int smb_krb5_salt_principal(const char *realm,
 			    const char *sAMAccountName,
 			    const char *userPrincipalName,
-			    bool is_computer,
+			    uint32_t uac_flags,
 			    TALLOC_CTX *mem_ctx,
 			    char **_salt_principal);
 int smb_krb5_salt_principal2data(krb5_context context,
diff -Npur samba-4.7.10/lib/ldb/modules/paged_results.c samba-4.7.11/lib/ldb/modules/paged_results.c
--- samba-4.7.10/lib/ldb/modules/paged_results.c	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.11/lib/ldb/modules/paged_results.c	2018-10-23 11:10:04.000000000 +0200
@@ -35,6 +35,8 @@
 #include "replace.h"
 #include "system/filesys.h"
 #include "system/time.h"
+#include "dlinklist.h"
+#include <assert.h>
 #include "ldb_module.h"
 
 struct message_store {
@@ -48,14 +50,13 @@ struct message_store {
 struct private_data;
 
 struct results_store {
+	struct results_store *prev, *next;
 
 	struct private_data *priv;
 
 	char *cookie;
 	time_t timestamp;
 
-	struct results_store *next;
-
 	struct message_store *first;
 	struct message_store *last;
 	int num_entries;
@@ -68,6 +69,7 @@ struct results_store {
 
 struct private_data {
 	uint32_t next_free_id;
+	size_t num_stores;
 	struct results_store *store;
 	
 };
@@ -75,22 +77,12 @@ struct private_data {
 static int store_destructor(struct results_store *del)
 {
 	struct private_data *priv = del->priv;
-	struct results_store *loop;
-
-	if (priv->store == del) {
-		priv->store = del->next;
-		return 0;
-	}
+	DLIST_REMOVE(priv->store, del);
 
-	for (loop = priv->store; loop; loop = loop->next) {
-		if (loop->next == del) {
-			loop->next = del->next;
-			return 0;
-		}
-	}
+	assert(priv->num_stores > 0);
+	priv->num_stores -= 1;
 
-	/* is not in list ? */
-	return -1;
+	return 0;
 }
 
 static struct results_store *new_store(struct private_data *priv)
@@ -120,11 +112,23 @@ static struct results_store *new_store(s
 	newr->first_ref = NULL;
 	newr->controls = NULL;
 
-	newr->next = priv->store;
-	priv->store = newr;
+	DLIST_ADD(priv->store, newr);
+
+	assert(priv->num_stores < SIZE_MAX);
+	priv->num_stores += 1;
 
 	talloc_set_destructor(newr, store_destructor);
 
+	if (priv->num_stores > 10) {
+		struct results_store *last;
+		/*
+		 * 10 is the default for MaxResultSetsPerConn --
+		 * possibly need to parameterize it.
+		 */
+		last = DLIST_TAIL(priv->store);
+		TALLOC_FREE(last);
+	}
+
 	return newr;
 }
 
@@ -381,6 +385,8 @@ static int paged_search(struct ldb_modul
 			return LDB_ERR_UNWILLING_TO_PERFORM;
 		}
 
+		DLIST_PROMOTE(private_data->store, current);
+
 		ac->store = current;
 
 		/* check if it is an abandon */
@@ -412,6 +418,7 @@ static int paged_request_init(struct ldb
 	}
 
 	data->next_free_id = 1;
+	data->num_stores = 0;
 	data->store = NULL;
 	ldb_module_set_private(module, data);
 
diff -Npur samba-4.7.10/lib/util/debug.c samba-4.7.11/lib/util/debug.c
--- samba-4.7.10/lib/util/debug.c	2018-04-17 09:35:02.000000000 +0200
+++ samba-4.7.11/lib/util/debug.c	2018-10-23 11:10:04.000000000 +0200
@@ -1069,8 +1069,11 @@ bool reopen_logs_internal(void)
 	force_check_log_size();
 	(void)umask(oldumask);
 
-	/* Take over stderr to catch output into logs */
-	if (state.fd > 0) {
+	/*
+	 * If log file was opened or created successfully, take over stderr to
+	 * catch output into logs.
+	 */
+	if (new_fd != -1) {
 		if (dup2(state.fd, 2) == -1) {
 			/* Close stderr too, if dup2 can't point it -
 			   at the logfile.  There really isn't much
diff -Npur samba-4.7.10/libds/common/flags.h samba-4.7.11/libds/common/flags.h
--- samba-4.7.10/libds/common/flags.h	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.11/libds/common/flags.h	2018-10-23 11:10:04.000000000 +0200
@@ -53,7 +53,7 @@
 #define UF_PARTIAL_SECRETS_ACCOUNT		0x04000000
 #define UF_USE_AES_KEYS                         0x08000000
 
-#define UF_MACHINE_ACCOUNT_MASK (\
+#define UF_TRUST_ACCOUNT_MASK (\
 		UF_INTERDOMAIN_TRUST_ACCOUNT |\
 		UF_WORKSTATION_TRUST_ACCOUNT |\
 		UF_SERVER_TRUST_ACCOUNT \
diff -Npur samba-4.7.10/python/samba/netcmd/user.py samba-4.7.11/python/samba/netcmd/user.py
--- samba-4.7.10/python/samba/netcmd/user.py	2017-07-25 11:09:58.000000000 +0200
+++ samba-4.7.11/python/samba/netcmd/user.py	2018-10-23 11:10:04.000000000 +0200
@@ -199,6 +199,9 @@ for (alg, attr) in [("5", "virtualCryptS
 for x in range(1, 30):
     virtual_attributes["virtualWDigest%02d" % x] = {}
 
+# Add Kerberos virtual attributes
+virtual_attributes["virtualKerberosSalt"] = {}
+
 virtual_attributes_help  = "The attributes to display (comma separated). "
 virtual_attributes_help += "Possible supported virtual attributes: %s" % ", ".join(sorted(virtual_attributes.keys()))
 if len(disabled_virtual_attributes) != 0:
@@ -1217,6 +1220,16 @@ class GetPasswordCommand(Command):
             # first matching scheme
             return (None, scheme_match)
 
+        def get_kerberos_ctr():
+            primary_krb5 = get_package("Primary:Kerberos-Newer-Keys")
+            if primary_krb5 is None:
+                primary_krb5 = get_package("Primary:Kerberos")
+            if primary_krb5 is None:
+                return (0, None)
+            krb5_blob = ndr_unpack(drsblobs.package_PrimaryKerberosBlob,
+                                   primary_krb5)
+            return (krb5_blob.version, krb5_blob.ctr)
+
         # We use sort here in order to have a predictable processing order
         for a in sorted(virtual_attributes.keys()):
             if not a.lower() in lower_attrs:
@@ -1268,6 +1281,11 @@ class GetPasswordCommand(Command):
                 v = get_package("Primary:SambaGPG", min_idx=-1)
                 if v is None:
                     continue
+            elif a == "virtualKerberosSalt":
+                (krb5_v, krb5_ctr) = get_kerberos_ctr()
+                if krb5_v not in [3, 4]:
+                    continue
+                v = krb5_ctr.salt.string
             elif a.startswith("virtualWDigest"):
                 primary_wdigest = get_package("Primary:WDigest")
                 if primary_wdigest is None:
@@ -1384,6 +1402,9 @@ for which virtual attributes are support
                         https://msdn.microsoft.com/en-us/library/cc245680.aspx
                           is incorrect
 
+   virtualKerberosSalt:   This results the salt string that is used to compute
+                          Kerberos keys from a UTF-8 cleartext password.
+
    virtualSambaGPG:       The raw cleartext as stored in the
                           'Primary:SambaGPG' buffer inside of the
                           supplementalCredentials attribute.
@@ -1551,6 +1572,9 @@ for supported virtual attributes in your
                         https://msdn.microsoft.com/en-us/library/cc245680.aspx
                           is incorrect.
 
+   virtualKerberosSalt:   This results the salt string that is used to compute
+                          Kerberos keys from a UTF-8 cleartext password.
+
    virtualSambaGPG:       The raw cleartext as stored in the
                           'Primary:SambaGPG' buffer inside of the
                           supplementalCredentials attribute.
diff -Npur samba-4.7.10/selftest/target/Samba3.pm samba-4.7.11/selftest/target/Samba3.pm
--- samba-4.7.10/selftest/target/Samba3.pm	2018-08-27 09:54:35.000000000 +0200
+++ samba-4.7.11/selftest/target/Samba3.pm	2018-10-23 11:10:04.000000000 +0200
@@ -2057,6 +2057,14 @@ sub provision($$$$$$$$$)
 	copy = tmp
 	vfs objects = error_inject
 	include = $libdir/error_inject.conf
+
+[delay_inject]
+	copy = tmp
+	vfs objects = delay_inject
+	kernel share modes = no
+	kernel oplocks = no
+	posix locking = no
+	include = $libdir/delay_inject.conf
 	";
 	close(CONF);
 
diff -Npur samba-4.7.10/source3/locking/share_mode_lock.c samba-4.7.11/source3/locking/share_mode_lock.c
--- samba-4.7.10/source3/locking/share_mode_lock.c	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.11/source3/locking/share_mode_lock.c	2018-10-23 11:10:04.000000000 +0200
@@ -673,7 +673,7 @@ static void fetch_share_mode_done(struct
 struct fetch_share_mode_state {
 	struct file_id id;
 	TDB_DATA key;
-	struct share_mode_lock *lck;
+	struct fetch_share_mode_unlocked_state parser_state;
 	enum dbwrap_req_state req_state;
 };
 
@@ -721,17 +721,14 @@ struct tevent_req *fetch_share_mode_send
 
 	state->id = id;
 	state->key = locking_key(&state->id);
-	state->lck = talloc_zero(state, struct share_mode_lock);
-	if (tevent_req_nomem(state->lck, req)) {
-		return tevent_req_post(req, ev);
-	}
+	state->parser_state.mem_ctx = state;
 
 	subreq = dbwrap_parse_record_send(state,
 					  ev,
 					  lock_db,
 					  state->key,
 					  fetch_share_mode_unlocked_parser,
-					  state->lck,
+					  &state->parser_state,
 					  &state->req_state);
 	if (tevent_req_nomem(subreq, req)) {
 		return tevent_req_post(req, ev);
@@ -775,12 +772,12 @@ NTSTATUS fetch_share_mode_recv(struct te
 		return status;
 	}
 
-	if (state->lck->data == NULL) {
+	if (state->parser_state.lck->data == NULL) {
 		tevent_req_received(req);
 		return NT_STATUS_NOT_FOUND;
 	}
 
-	lck = talloc_move(mem_ctx, &state->lck);
+	lck = talloc_move(mem_ctx, &state->parser_state.lck);
 
 	if (DEBUGLEVEL >= 10) {
 		DBG_DEBUG("share_mode_data:\n");
diff -Npur samba-4.7.10/source3/modules/vfs_delay_inject.c samba-4.7.11/source3/modules/vfs_delay_inject.c
--- samba-4.7.10/source3/modules/vfs_delay_inject.c	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.7.11/source3/modules/vfs_delay_inject.c	2018-10-23 11:10:04.000000000 +0200
@@ -0,0 +1,58 @@
+/*
+ *  Unix SMB/CIFS implementation.
+ *  Samba VFS module for delay injection in VFS calls
+ *  Copyright (C) Ralph Boehme 2018
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 3 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, see <http://www.gnu.org/licenses/>.
+ */
+
+#include "includes.h"
+#include "smbd/smbd.h"
+
+#undef DBGC_CLASS
+#define DBGC_CLASS DBGC_VFS
+
+static void inject_delay(const char *vfs_func, vfs_handle_struct *handle)
+{
+	int delay;
+
+	delay = lp_parm_int(SNUM(handle->conn), "delay_inject", vfs_func, 0);
+	if (delay == 0) {
+		return;
+	}
+
+	DBG_DEBUG("Injected delay for [%s] of [%d] ms\n", vfs_func, delay);
+
+	smb_msleep(delay);
+}
+
+static int vfs_delay_inject_ntimes(vfs_handle_struct *handle,
+				   const struct smb_filename *smb_fname,
+				   struct smb_file_time *ft)
+{
+	inject_delay("ntimes", handle);
+
+	return SMB_VFS_NEXT_NTIMES(handle, smb_fname, ft);
+}
+
+static struct vfs_fn_pointers vfs_delay_inject_fns = {
+	.ntimes_fn = vfs_delay_inject_ntimes,
+};
+
+static_decl_vfs;
+NTSTATUS vfs_delay_inject_init(TALLOC_CTX *ctx)
+{
+	return smb_register_vfs(SMB_VFS_INTERFACE_VERSION, "delay_inject",
+				&vfs_delay_inject_fns);
+}
diff -Npur samba-4.7.10/source3/modules/vfs_fruit.c samba-4.7.11/source3/modules/vfs_fruit.c
--- samba-4.7.10/source3/modules/vfs_fruit.c	2018-08-27 09:54:35.000000000 +0200
+++ samba-4.7.11/source3/modules/vfs_fruit.c	2018-10-23 11:10:04.000000000 +0200
@@ -5514,7 +5514,11 @@ static int fruit_ftruncate(struct vfs_ha
 		  (intmax_t)offset);
 
 	if (fio == NULL) {
-		if (offset == 0 && global_fruit_config.nego_aapl) {
+		if (offset == 0 &&
+		    global_fruit_config.nego_aapl &&
+		    is_ntfs_stream_smb_fname(fsp->fsp_name) &&
+		    !is_ntfs_default_stream_smb_fname(fsp->fsp_name))
+		{
 			return SMB_VFS_NEXT_UNLINK(handle, fsp->fsp_name);
 		}
 		return SMB_VFS_NEXT_FTRUNCATE(handle, fsp, offset);
diff -Npur samba-4.7.10/source3/modules/wscript_build samba-4.7.11/source3/modules/wscript_build
--- samba-4.7.10/source3/modules/wscript_build	2018-02-07 09:37:51.000000000 +0100
+++ samba-4.7.11/source3/modules/wscript_build	2018-10-23 11:10:04.000000000 +0200
@@ -516,3 +516,10 @@ bld.SAMBA3_MODULE('vfs_error_inject',
                  init_function='',
                  internal_module=bld.SAMBA3_IS_STATIC_MODULE('vfs_error_inject'),
                  enabled=bld.SAMBA3_IS_ENABLED_MODULE('vfs_error_inject'))
+
+bld.SAMBA3_MODULE('vfs_delay_inject',
+                 subsystem='vfs',
+                 source='vfs_delay_inject.c',
+                 init_function='',
+                 internal_module=bld.SAMBA3_IS_STATIC_MODULE('vfs_delay_inject'),
+                 enabled=bld.SAMBA3_IS_ENABLED_MODULE('vfs_delay_inject'))
diff -Npur samba-4.7.10/source3/passdb/machine_account_secrets.c samba-4.7.11/source3/passdb/machine_account_secrets.c
--- samba-4.7.10/source3/passdb/machine_account_secrets.c	2018-08-11 21:50:02.000000000 +0200
+++ samba-4.7.11/source3/passdb/machine_account_secrets.c	2018-10-23 11:10:04.000000000 +0200
@@ -36,6 +36,7 @@
 #include "lib/crypto/crypto.h"
 #include "lib/krb5_wrap/krb5_samba.h"
 #include "lib/util/time_basic.h"
+#include "../libds/common/flags.h"
 
 #undef DBGC_CLASS
 #define DBGC_CLASS DBGC_PASSDB
@@ -1600,7 +1601,7 @@ NTSTATUS secrets_store_JoinCtx(const str
 		ret = smb_krb5_salt_principal(info->domain_info.dns_domain.string,
 					      info->account_name,
 					      NULL /* userPrincipalName */,
-					      true /* is_computer */,
+					      UF_WORKSTATION_TRUST_ACCOUNT,
 					      info, &p);
 		if (ret != 0) {
 			status = krb5_to_nt_status(ret);
diff -Npur samba-4.7.10/source3/script/tests/test_durable_handle_reconnect.sh samba-4.7.11/source3/script/tests/test_durable_handle_reconnect.sh
--- samba-4.7.10/source3/script/tests/test_durable_handle_reconnect.sh	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.7.11/source3/script/tests/test_durable_handle_reconnect.sh	2018-10-23 11:10:04.000000000 +0200
@@ -0,0 +1,21 @@
+#!/bin/sh
+#
+# Test Durable Handle reconnect with injected delay in the disconnect.
+#
+# Copyright (C) 2018 Ralph Boehme
+
+. $(dirname $0)/../../../testprogs/blackbox/subunit.sh
+failed=0
+
+delay_inject_conf=$(dirname $SMB_CONF_PATH)/delay_inject.conf
+
+echo 'delay_inject:ntimes = 5000' > $delay_inject_conf
+
+testit "durable_v2_delay" $VALGRIND \
+       $BINDIR/smbtorture //$SERVER_IP/delay_inject \
+       -U$USERNAME%$PASSWORD  smb2.durable-v2-delay ||
+	failed=$(expr $failed + 1)
+
+rm $delay_inject_conf
+
+testok $0 $failed
diff -Npur samba-4.7.10/source3/selftest/tests.py samba-4.7.11/source3/selftest/tests.py
--- samba-4.7.10/source3/selftest/tests.py	2018-08-27 09:54:35.000000000 +0200
+++ samba-4.7.11/source3/selftest/tests.py	2018-10-23 11:10:04.000000000 +0200
@@ -457,7 +457,7 @@ for t in tests:
     elif t == "rpc.samr.passwords.validate":
         plansmbtorture4testsuite(t, "nt4_dc", 'ncacn_ip_tcp:$SERVER_IP[seal] -U$USERNAME%$PASSWORD', 'over ncacn_ip_tcp ')
         plansmbtorture4testsuite(t, "ad_dc", 'ncacn_ip_tcp:$SERVER_IP[seal] -U$USERNAME%$PASSWORD', 'over ncacn_ip_tcp ')
-    elif t == "smb2.durable-open" or t == "smb2.durable-v2-open" or t == "smb2.replay":
+    elif t == "smb2.durable-open" or t == "smb2.durable-v2-open" or t == "smb2.replay" or t == "smb2.durable-v2-delay":
         plansmbtorture4testsuite(t, "nt4_dc", '//$SERVER_IP/durable -U$USERNAME%$PASSWORD')
         plansmbtorture4testsuite(t, "ad_dc", '//$SERVER_IP/durable -U$USERNAME%$PASSWORD')
     elif t == "base.rw1":
@@ -602,6 +602,9 @@ plantestsuite("samba3.blackbox.net_tdb",
 plantestsuite("samba3.blackbox.smbd_error", "simpleserver:local",
               [ os.path.join(samba3srcdir, "script/tests/test_smbd_error.sh") ])
 
+plantestsuite("samba3.blackbox.durable_v2_delay", "simpleserver:local",
+              [os.path.join(samba3srcdir, "script/tests/test_durable_handle_reconnect.sh")])
+
 plantestsuite("samba3.blackbox.net_cache_samlogon", "ad_member:local",
               [ os.path.join(samba3srcdir, "script/tests/test_net_cache_samlogon.sh"),
                 '$SERVER', 'tmp', '$DC_USERNAME', '$DC_PASSWORD'])
diff -Npur samba-4.7.10/source3/smbd/close.c samba-4.7.11/source3/smbd/close.c
--- samba-4.7.10/source3/smbd/close.c	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.11/source3/smbd/close.c	2018-10-23 11:10:04.000000000 +0200
@@ -1081,6 +1081,8 @@ static NTSTATUS close_directory(struct s
 	if (lck == NULL) {
 		DEBUG(0, ("close_directory: Could not get share mode lock for "
 			  "%s\n", fsp_str_dbg(fsp)));
+		close_filestruct(fsp);
+		file_free(req, fsp);
 		return NT_STATUS_INVALID_PARAMETER;
 	}
 
@@ -1164,6 +1166,8 @@ static NTSTATUS close_directory(struct s
 			if (!NT_STATUS_IS_OK(status)) {
 				DEBUG(5, ("delete_all_streams failed: %s\n",
 					  nt_errstr(status)));
+				close_filestruct(fsp);
+				file_free(req, fsp);
 				return status;
 			}
 		}
diff -Npur samba-4.7.10/source3/smbd/filename.c samba-4.7.11/source3/smbd/filename.c
--- samba-4.7.10/source3/smbd/filename.c	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.11/source3/smbd/filename.c	2018-10-23 11:10:04.000000000 +0200
@@ -1443,6 +1443,11 @@ int get_real_filename(connection_struct
 	int ret;
 	bool mangled;
 
+	/* handle null paths */
+	if ((path == NULL) || (*path == 0)) {
+		path = ".";
+	}
+
 	mangled = mangle_is_mangled(name, conn->params);
 
 	if (mangled) {
diff -Npur samba-4.7.10/source3/smbd/smb2_server.c samba-4.7.11/source3/smbd/smb2_server.c
--- samba-4.7.10/source3/smbd/smb2_server.c	2018-04-17 09:35:02.000000000 +0200
+++ samba-4.7.11/source3/smbd/smb2_server.c	2018-10-23 11:10:04.000000000 +0200
@@ -2364,7 +2364,11 @@ NTSTATUS smbd_smb2_request_dispatch(stru
 
 	req->async_internal = false;
 	req->do_signing = false;
-	req->do_encryption = false;
+	if (opcode != SMB2_OP_SESSSETUP) {
+		req->do_encryption = encryption_desired;
+	} else {
+		req->do_encryption = false;
+	}
 	req->was_encrypted = false;
 	if (intf_v->iov_len == SMB2_TF_HDR_SIZE) {
 		const uint8_t *intf = SMBD_SMB2_IN_TF_PTR(req);
@@ -2388,9 +2392,11 @@ NTSTATUS smbd_smb2_request_dispatch(stru
 		}
 
 		req->was_encrypted = true;
+		req->do_encryption = true;
 	}
 
 	if (encryption_required && !req->was_encrypted) {
+		req->do_encryption = true;
 		return smbd_smb2_request_error(req,
 				NT_STATUS_ACCESS_DENIED);
 	}
@@ -2526,15 +2532,14 @@ NTSTATUS smbd_smb2_request_dispatch(stru
 			encryption_required = true;
 		}
 		if (encryption_required && !req->was_encrypted) {
+			req->do_encryption = true;
 			return smbd_smb2_request_error(req,
 				NT_STATUS_ACCESS_DENIED);
+		} else if (encryption_desired) {
+			req->do_encryption = true;
 		}
 	}
 
-	if (req->was_encrypted || encryption_desired) {
-		req->do_encryption = true;
-	}
-
 	if (req->session) {
 		bool update_session_global = false;
 		bool update_tcon_global = false;
diff -Npur samba-4.7.10/source3/smbd/smbXsrv_session.c samba-4.7.11/source3/smbd/smbXsrv_session.c
--- samba-4.7.10/source3/smbd/smbXsrv_session.c	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.11/source3/smbd/smbXsrv_session.c	2018-10-23 11:10:04.000000000 +0200
@@ -1651,6 +1651,35 @@ NTSTATUS smbXsrv_session_logoff(struct s
 	session->client = NULL;
 	session->status = NT_STATUS_USER_SESSION_DELETED;
 
+	if (session->compat) {
+		/*
+		 * For SMB2 this is a bit redundant as files are also close
+		 * below via smb2srv_tcon_disconnect_all() -> ... ->
+		 * smbXsrv_tcon_disconnect() -> close_cnum() ->
+		 * file_close_conn().
+		 */
+		file_close_user(sconn, session->compat->vuid);
+	}
+
+	if (session->tcon_table != NULL) {
+		/*
+		 * Note: We only have a tcon_table for SMB2.
+		 */
+		status = smb2srv_tcon_disconnect_all(session);
+		if (!NT_STATUS_IS_OK(status)) {
+			DEBUG(0, ("smbXsrv_session_logoff(0x%08x): "
+				  "smb2srv_tcon_disconnect_all() failed: %s\n",
+				  session->global->session_global_id,
+				  nt_errstr(status)));
+			error = status;
+		}
+	}
+
+	if (session->compat) {
+		invalidate_vuid(sconn, session->compat->vuid);
+		session->compat = NULL;
+	}
+
 	global_rec = session->global->db_rec;
 	session->global->db_rec = NULL;
 	if (global_rec == NULL) {
@@ -1710,29 +1739,6 @@ NTSTATUS smbXsrv_session_logoff(struct s
 	}
 	session->db_rec = NULL;
 
-	if (session->compat) {
-		file_close_user(sconn, session->compat->vuid);
-	}
-
-	if (session->tcon_table != NULL) {
-		/*
-		 * Note: We only have a tcon_table for SMB2.
-		 */
-		status = smb2srv_tcon_disconnect_all(session);
-		if (!NT_STATUS_IS_OK(status)) {
-			DEBUG(0, ("smbXsrv_session_logoff(0x%08x): "
-				  "smb2srv_tcon_disconnect_all() failed: %s\n",
-				  session->global->session_global_id,
-				  nt_errstr(status)));
-			error = status;
-		}
-	}
-
-	if (session->compat) {
-		invalidate_vuid(sconn, session->compat->vuid);
-		session->compat = NULL;
-	}
-
 	return error;
 }
 
diff -Npur samba-4.7.10/source3/smbd/smbXsrv_tcon.c samba-4.7.11/source3/smbd/smbXsrv_tcon.c
--- samba-4.7.10/source3/smbd/smbXsrv_tcon.c	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.11/source3/smbd/smbXsrv_tcon.c	2018-10-23 11:10:04.000000000 +0200
@@ -904,6 +904,25 @@ NTSTATUS smbXsrv_tcon_disconnect(struct
 	table = tcon->table;
 	tcon->table = NULL;
 
+	if (tcon->compat) {
+		bool ok;
+
+		ok = set_current_service(tcon->compat, 0, true);
+		if (!ok) {
+			status = NT_STATUS_INTERNAL_ERROR;
+			DEBUG(0, ("smbXsrv_tcon_disconnect(0x%08x, '%s'): "
+				  "set_current_service() failed: %s\n",
+				  tcon->global->tcon_global_id,
+				  tcon->global->share_name,
+				  nt_errstr(status)));
+			tcon->compat = NULL;
+			return status;
+		}
+
+		close_cnum(tcon->compat, vuid);
+		tcon->compat = NULL;
+	}
+
 	tcon->status = NT_STATUS_NETWORK_NAME_DELETED;
 
 	global_rec = tcon->global->db_rec;
@@ -966,25 +985,6 @@ NTSTATUS smbXsrv_tcon_disconnect(struct
 	}
 	tcon->db_rec = NULL;
 
-	if (tcon->compat) {
-		bool ok;
-
-		ok = set_current_service(tcon->compat, 0, true);
-		if (!ok) {
-			status = NT_STATUS_INTERNAL_ERROR;
-			DEBUG(0, ("smbXsrv_tcon_disconnect(0x%08x, '%s'): "
-				  "set_current_service() failed: %s\n",
-				  tcon->global->tcon_global_id,
-				  tcon->global->share_name,
-				  nt_errstr(status)));
-			tcon->compat = NULL;
-			return status;
-		}
-
-		close_cnum(tcon->compat, vuid);
-		tcon->compat = NULL;
-	}
-
 	return error;
 }
 
diff -Npur samba-4.7.10/source3/winbindd/wb_getpwsid.c samba-4.7.11/source3/winbindd/wb_getpwsid.c
--- samba-4.7.10/source3/winbindd/wb_getpwsid.c	2018-08-27 09:54:35.000000000 +0200
+++ samba-4.7.11/source3/winbindd/wb_getpwsid.c	2018-10-23 11:10:04.000000000 +0200
@@ -95,25 +95,17 @@ static void wb_getpwsid_queryuser_done(s
 				    info->domain_name,
 				    acct_name,
 				    &mapped_name);
-	if (NT_STATUS_IS_OK(status)) {
-		output_username = fill_domain_username_talloc(state,
-				     info->domain_name,
-				     mapped_name, true);
-		if (output_username == NULL) {
-			tevent_req_nterror(req, NT_STATUS_NO_MEMORY);
-			return;
-		}
+	if (NT_STATUS_IS_OK(status) ||
+	    NT_STATUS_EQUAL(status, NT_STATUS_FILE_RENAMED)) {
 		fstrcpy(acct_name, mapped_name);
-	} else if (NT_STATUS_EQUAL(status, NT_STATUS_FILE_RENAMED)) {
-		fstrcpy(acct_name, mapped_name);
-	} else {
-		output_username = fill_domain_username_talloc(state,
-				     info->domain_name,
-				     acct_name, true);
-		if (output_username == NULL) {
-			tevent_req_nterror(req, NT_STATUS_NO_MEMORY);
-			return;
-		}
+	}
+	output_username = fill_domain_username_talloc(state,
+						      info->domain_name,
+						      acct_name,
+						      true);
+	if (output_username == NULL) {
+		tevent_req_nterror(req, NT_STATUS_NO_MEMORY);
+		return;
 	}
 
 	strlcpy(pw->pw_name, output_username, sizeof(pw->pw_name));
diff -Npur samba-4.7.10/source3/wscript samba-4.7.11/source3/wscript
--- samba-4.7.10/source3/wscript	2018-08-11 21:50:02.000000000 +0200
+++ samba-4.7.11/source3/wscript	2018-10-23 11:10:04.000000000 +0200
@@ -1718,6 +1718,7 @@ main() {
     if Options.options.enable_selftest or Options.options.developer:
         default_shared_modules.extend(TO_LIST('vfs_fake_acls vfs_nfs4acl_xattr'))
         default_shared_modules.extend(TO_LIST('vfs_error_inject'))
+        default_shared_modules.extend(TO_LIST('vfs_delay_inject'))
 
     if conf.CONFIG_SET('AD_DC_BUILD_IS_ENABLED'):
         default_static_modules.extend(TO_LIST('pdb_samba_dsdb auth_samba4 vfs_dfs_samba4'))
diff -Npur samba-4.7.10/source4/dsdb/common/util.c samba-4.7.11/source4/dsdb/common/util.c
--- samba-4.7.10/source4/dsdb/common/util.c	2017-09-17 21:15:34.000000000 +0200
+++ samba-4.7.11/source4/dsdb/common/util.c	2018-10-23 11:10:04.000000000 +0200
@@ -1294,6 +1294,61 @@ failed:
 	return false;
 }
 
+/*
+  work out the domain guid for the current open ldb
+*/
+const struct GUID *samdb_domain_guid(struct ldb_context *ldb)
+{
+	TALLOC_CTX *tmp_ctx = NULL;
+	struct GUID *domain_guid = NULL;
+	const char *attrs[] = {
+		"objectGUID",
+		NULL
+	};
+	struct ldb_result *res = NULL;
+	int ret;
+
+	/* see if we have a cached copy */
+	domain_guid = (struct GUID *)ldb_get_opaque(ldb, "cache.domain_guid");
+	if (domain_guid) {
+		return domain_guid;
+	}
+
+	tmp_ctx = talloc_new(ldb);
+	if (tmp_ctx == NULL) {
+		goto failed;
+	}
+
+	ret = ldb_search(ldb, tmp_ctx, &res, ldb_get_default_basedn(ldb), LDB_SCOPE_BASE, attrs, "objectGUID=*");
+	if (ret != LDB_SUCCESS) {
+		goto failed;
+	}
+
+	if (res->count != 1) {
+		goto failed;
+	}
+
+	domain_guid = talloc(tmp_ctx, struct GUID);
+	if (domain_guid == NULL) {
+		goto failed;
+	}
+	*domain_guid = samdb_result_guid(res->msgs[0], "objectGUID");
+
+	/* cache the domain_sid in the ldb */
+	if (ldb_set_opaque(ldb, "cache.domain_guid", domain_guid) != LDB_SUCCESS) {
+		goto failed;
+	}
+
+	talloc_steal(ldb, domain_guid);
+	talloc_free(tmp_ctx);
+
+	return domain_guid;
+
+failed:
+	talloc_free(tmp_ctx);
+	return NULL;
+}
+
 bool samdb_set_ntds_settings_dn(struct ldb_context *ldb, struct ldb_dn *ntds_settings_dn_in)
 {
 	TALLOC_CTX *tmp_ctx;
diff -Npur samba-4.7.10/source4/dsdb/common/util_trusts.c samba-4.7.11/source4/dsdb/common/util_trusts.c
--- samba-4.7.10/source4/dsdb/common/util_trusts.c	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.11/source4/dsdb/common/util_trusts.c	2018-10-23 11:10:04.000000000 +0200
@@ -481,12 +481,6 @@ static NTSTATUS dsdb_trust_crossref_tdo_
 		*_trust_parent_tdo = NULL;
 	}
 
-	domain_dn = ldb_get_default_basedn(sam_ctx);
-	if (domain_dn == NULL) {
-		TALLOC_FREE(frame);
-		return NT_STATUS_INTERNAL_ERROR;
-	}
-
 	partitions_dn = samdb_partitions_dn(sam_ctx, frame);
 	if (partitions_dn == NULL) {
 		TALLOC_FREE(frame);
@@ -833,6 +827,22 @@ static bool dsdb_trust_find_tln_ex_match
 	return false;
 }
 
+NTSTATUS dsdb_trust_local_tdo_info(TALLOC_CTX *mem_ctx,
+				   struct ldb_context *sam_ctx,
+				   struct lsa_TrustDomainInfoInfoEx **_tdo)
+{
+	struct ldb_dn *domain_dn = NULL;
+
+	domain_dn = ldb_get_default_basedn(sam_ctx);
+	if (domain_dn == NULL) {
+		return NT_STATUS_INTERNAL_ERROR;
+	}
+
+	return dsdb_trust_crossref_tdo_info(mem_ctx, sam_ctx,
+					    domain_dn, NULL,
+					    _tdo, NULL, NULL);
+}
+
 NTSTATUS dsdb_trust_xref_tdo_info(TALLOC_CTX *mem_ctx,
 				  struct ldb_context *sam_ctx,
 				  struct lsa_TrustDomainInfoInfoEx **_tdo)
diff -Npur samba-4.7.10/source4/dsdb/samdb/ldb_modules/password_hash.c samba-4.7.11/source4/dsdb/samdb/ldb_modules/password_hash.c
--- samba-4.7.10/source4/dsdb/samdb/ldb_modules/password_hash.c	2018-04-17 09:34:46.000000000 +0200
+++ samba-4.7.11/source4/dsdb/samdb/ldb_modules/password_hash.c	2018-10-23 11:10:04.000000000 +0200
@@ -128,7 +128,6 @@ struct setup_password_fields_io {
 		NTTIME pwdLastSet;
 		const char *sAMAccountName;
 		const char *user_principal_name;
-		bool is_computer;
 		bool is_krbtgt;
 		uint32_t restrictions;
 		struct dom_sid *account_sid;
@@ -676,15 +675,17 @@ static int setup_kerberos_keys(struct se
 	krb5_data salt;
 	krb5_keyblock key;
 	krb5_data cleartext_data;
+	uint32_t uac_flags = 0;
 
 	ldb = ldb_module_get_ctx(io->ac->module);
 	cleartext_data.data = (char *)io->n.cleartext_utf8->data;
 	cleartext_data.length = io->n.cleartext_utf8->length;
 
+	uac_flags = io->u.userAccountControl & UF_ACCOUNT_TYPE_MASK;
 	krb5_ret = smb_krb5_salt_principal(io->ac->status->domain_data.realm,
 					   io->u.sAMAccountName,
 					   io->u.user_principal_name,
-					   io->u.is_computer,
+					   uac_flags,
 					   io->ac,
 					   &salt_principal);
 	if (krb5_ret) {
@@ -3151,7 +3152,6 @@ static int setup_io(struct ph_context *a
 								      "sAMAccountName", NULL);
 	io->u.user_principal_name	= ldb_msg_find_attr_as_string(info_msg,
 								      "userPrincipalName", NULL);
-	io->u.is_computer		= ldb_msg_check_string_attribute(info_msg, "objectClass", "computer");
 
 	/* Ensure it has an objectSID too */
 	io->u.account_sid = samdb_result_dom_sid(ac, info_msg, "objectSid");
diff -Npur samba-4.7.10/source4/rpc_server/netlogon/dcerpc_netlogon.c samba-4.7.11/source4/rpc_server/netlogon/dcerpc_netlogon.c
--- samba-4.7.10/source4/rpc_server/netlogon/dcerpc_netlogon.c	2017-08-15 09:16:59.000000000 +0200
+++ samba-4.7.11/source4/rpc_server/netlogon/dcerpc_netlogon.c	2018-10-23 11:10:04.000000000 +0200
@@ -1962,57 +1962,122 @@ static WERROR dcesrv_netr_DsRGetSiteName
 
 
 /*
-  fill in a netr_OneDomainInfo from a ldb search result
+  fill in a netr_OneDomainInfo from our own domain/forest
 */
-static NTSTATUS fill_one_domain_info(TALLOC_CTX *mem_ctx,
-				     struct loadparm_context *lp_ctx,
-				     struct ldb_context *sam_ctx,
-				     struct ldb_message *res,
-				     struct netr_OneDomainInfo *info,
-				     bool is_local, bool is_trust_list)
+static NTSTATUS fill_our_one_domain_info(TALLOC_CTX *mem_ctx,
+				const struct lsa_TrustDomainInfoInfoEx *our_tdo,
+				struct GUID domain_guid,
+				struct netr_OneDomainInfo *info,
+				bool is_trust_list)
 {
 	ZERO_STRUCTP(info);
 
 	if (is_trust_list) {
+		struct netr_trust_extension *tei = NULL;
+
 		/* w2k8 only fills this on trusted domains */
-		info->trust_extension.info = talloc_zero(mem_ctx, struct netr_trust_extension);
+		tei = talloc_zero(mem_ctx, struct netr_trust_extension);
+		if (tei == NULL) {
+			return NT_STATUS_NO_MEMORY;
+		}
+		tei->flags |= NETR_TRUST_FLAG_PRIMARY;
+
+		/*
+		 * We're always within a native forest
+		 */
+		tei->flags |= NETR_TRUST_FLAG_IN_FOREST;
+		tei->flags |= NETR_TRUST_FLAG_NATIVE;
+
+		/* For now we assume we're always the tree root */
+		tei->flags |= NETR_TRUST_FLAG_TREEROOT;
+		tei->parent_index = 0;
+
+		tei->trust_type = our_tdo->trust_type;
+		/*
+		 * This needs to be 0 instead of our_tdo->trust_attributes
+		 * It means LSA_TRUST_ATTRIBUTE_WITHIN_FOREST won't
+		 * be set, while NETR_TRUST_FLAG_IN_FOREST is set above.
+		 */
+		tei->trust_attributes = 0;
+
+		info->trust_extension.info = tei;
 		info->trust_extension.length = 16;
-		info->trust_extension.info->flags =
-			NETR_TRUST_FLAG_TREEROOT |
-			NETR_TRUST_FLAG_IN_FOREST |
-			NETR_TRUST_FLAG_PRIMARY |
-			NETR_TRUST_FLAG_NATIVE;
-
-		info->trust_extension.info->parent_index = 0; /* should be index into array
-								 of parent */
-		info->trust_extension.info->trust_type = LSA_TRUST_TYPE_UPLEVEL; /* should be based on ldb search for trusts */
-		info->trust_extension.info->trust_attributes = 0; /* 	TODO: base on ldb search? */
 	}
 
 	if (is_trust_list) {
+		info->dns_domainname.string = our_tdo->domain_name.string;
+
 		/* MS-NRPC 3.5.4.3.9 - must be set to NULL for trust list */
 		info->dns_forestname.string = NULL;
 	} else {
-		info->dns_forestname.string = samdb_forest_name(sam_ctx, mem_ctx);
-		NT_STATUS_HAVE_NO_MEMORY(info->dns_forestname.string);
-		info->dns_forestname.string = talloc_asprintf(mem_ctx, "%s.", info->dns_forestname.string);
-		NT_STATUS_HAVE_NO_MEMORY(info->dns_forestname.string);
+		info->dns_domainname.string = talloc_asprintf(mem_ctx, "%s.",
+						our_tdo->domain_name.string);
+		if (info->dns_domainname.string == NULL) {
+			return NT_STATUS_NO_MEMORY;
+		}
+
+		info->dns_forestname.string = info->dns_domainname.string;
 	}
 
-	if (is_local) {
-		info->domainname.string = lpcfg_workgroup(lp_ctx);
-		info->dns_domainname.string = lpcfg_dnsdomain(lp_ctx);
-		info->domain_guid = samdb_result_guid(res, "objectGUID");
-		info->domain_sid = samdb_result_dom_sid(mem_ctx, res, "objectSid");
-	} else {
-		info->domainname.string = ldb_msg_find_attr_as_string(res, "flatName", NULL);
-		info->dns_domainname.string = ldb_msg_find_attr_as_string(res, "trustPartner", NULL);
-		info->domain_guid = samdb_result_guid(res, "objectGUID");
-		info->domain_sid = samdb_result_dom_sid(mem_ctx, res, "securityIdentifier");
+	info->domainname.string = our_tdo->netbios_name.string;
+	info->domain_sid = our_tdo->sid;
+	info->domain_guid = domain_guid;
+
+	return NT_STATUS_OK;
+}
+
+/*
+  fill in a netr_OneDomainInfo from a trust tdo
+*/
+static NTSTATUS fill_trust_one_domain_info(TALLOC_CTX *mem_ctx,
+				struct GUID domain_guid,
+				const struct lsa_TrustDomainInfoInfoEx *tdo,
+				struct netr_OneDomainInfo *info)
+{
+	struct netr_trust_extension *tei = NULL;
+
+	ZERO_STRUCTP(info);
+
+	/* w2k8 only fills this on trusted domains */
+	tei = talloc_zero(mem_ctx, struct netr_trust_extension);
+	if (tei == NULL) {
+		return NT_STATUS_NO_MEMORY;
+	}
+
+	if (tdo->trust_direction & LSA_TRUST_DIRECTION_INBOUND) {
+		tei->flags |= NETR_TRUST_FLAG_INBOUND;
 	}
-	if (!is_trust_list) {
-		info->dns_domainname.string = talloc_asprintf(mem_ctx, "%s.", info->dns_domainname.string);
+	if (tdo->trust_direction & LSA_TRUST_DIRECTION_OUTBOUND) {
+		tei->flags |= NETR_TRUST_FLAG_OUTBOUND;
 	}
+	if (tdo->trust_attributes & LSA_TRUST_ATTRIBUTE_WITHIN_FOREST) {
+		tei->flags |= NETR_TRUST_FLAG_IN_FOREST;
+	}
+
+	/*
+	 * TODO: once we support multiple domains within our forest,
+	 * we need to fill this correct (or let the caller do it
+	 * for all domains marked with NETR_TRUST_FLAG_IN_FOREST).
+	 */
+	tei->parent_index = 0;
+
+	tei->trust_type = tdo->trust_type;
+	tei->trust_attributes = tdo->trust_attributes;
+
+	info->trust_extension.info = tei;
+	info->trust_extension.length = 16;
+
+	info->domainname.string = tdo->netbios_name.string;
+	if (tdo->trust_type != LSA_TRUST_TYPE_DOWNLEVEL) {
+		info->dns_domainname.string = tdo->domain_name.string;
+	} else {
+		info->dns_domainname.string = NULL;
+	}
+	info->domain_sid = tdo->sid;
+	info->domain_guid = domain_guid;
+
+	/* MS-NRPC 3.5.4.3.9 - must be set to NULL for trust list */
+	info->dns_forestname.string = NULL;
 
 	return NT_STATUS_OK;
 }
@@ -2028,19 +2093,29 @@ static NTSTATUS dcesrv_netr_LogonGetDoma
 	TALLOC_CTX *mem_ctx, struct netr_LogonGetDomainInfo *r)
 {
 	struct netlogon_creds_CredentialState *creds;
-	const char * const attrs[] = { "objectSid", "objectGUID", "flatName",
-		"securityIdentifier", "trustPartner", NULL };
+	const char * const trusts_attrs[] = {
+		"securityIdentifier",
+		"flatName",
+		"trustPartner",
+		"trustAttributes",
+		"trustDirection",
+		"trustType",
+		NULL
+	};
 	const char * const attrs2[] = { "sAMAccountName", "dNSHostName",
 		"msDS-SupportedEncryptionTypes", NULL };
 	const char *sam_account_name, *old_dns_hostname, *prefix1, *prefix2;
 	struct ldb_context *sam_ctx;
-	struct ldb_message **res1, **res2, **res3, *new_msg;
+	const struct GUID *our_domain_guid = NULL;
+	struct lsa_TrustDomainInfoInfoEx *our_tdo = NULL;
+	struct ldb_message **res1, *new_msg;
+	struct ldb_result *trusts_res = NULL;
 	struct ldb_dn *workstation_dn;
 	struct netr_DomainInformation *domain_info;
 	struct netr_LsaPolicyInformation *lsa_policy_info;
 	uint32_t default_supported_enc_types = 0xFFFFFFFF;
 	bool update_dns_hostname = true;
-	int ret, ret3, i;
+	int ret, i;
 	NTSTATUS status;
 
 	status = dcesrv_netr_creds_server_step_check(dce_call,
@@ -2249,21 +2324,23 @@ static NTSTATUS dcesrv_netr_LogonGetDoma
 
 		/* Writes back the domain information */
 
-		/* We need to do two searches. The first will pull our primary
-		   domain and the second will pull any trusted domains. Our
-		   primary domain is also a "trusted" domain, so we need to
-		   put the primary domain into the lists of returned trusts as
-		   well. */
-		ret = gendb_search_dn(sam_ctx, mem_ctx, ldb_get_default_basedn(sam_ctx),
-			&res2, attrs);
-		if (ret != 1) {
+		our_domain_guid = samdb_domain_guid(sam_ctx);
+		if (our_domain_guid == NULL) {
 			return NT_STATUS_INTERNAL_DB_CORRUPTION;
 		}
 
-		ret3 = gendb_search(sam_ctx, mem_ctx, NULL, &res3, attrs,
-			"(objectClass=trustedDomain)");
-		if (ret3 == -1) {
-			return NT_STATUS_INTERNAL_DB_CORRUPTION;
+		status = dsdb_trust_local_tdo_info(mem_ctx, sam_ctx, &our_tdo);
+		if (!NT_STATUS_IS_OK(status)) {
+			return status;
+		}
+
+		status = dsdb_trust_search_tdos(sam_ctx,
+						NULL, /* exclude */
+						trusts_attrs,
+						mem_ctx,
+						&trusts_res);
+		if (!NT_STATUS_IS_OK(status)) {
+			return status;
 		}
 
 		domain_info = talloc(mem_ctx, struct netr_DomainInformation);
@@ -2273,31 +2350,52 @@ static NTSTATUS dcesrv_netr_LogonGetDoma
 
 		/* Informations about the local and trusted domains */
 
-		status = fill_one_domain_info(mem_ctx,
-			dce_call->conn->dce_ctx->lp_ctx,
-			sam_ctx, res2[0], &domain_info->primary_domain,
-			true, false);
-		NT_STATUS_NOT_OK_RETURN(status);
+		status = fill_our_one_domain_info(mem_ctx,
+						  our_tdo,
+						  *our_domain_guid,
+						  &domain_info->primary_domain,
+						  false);
+		if (!NT_STATUS_IS_OK(status)) {
+			return status;
+		}
 
-		domain_info->trusted_domain_count = ret3 + 1;
-		domain_info->trusted_domains = talloc_array(mem_ctx,
+		domain_info->trusted_domain_count = trusts_res->count + 1;
+		domain_info->trusted_domains = talloc_zero_array(mem_ctx,
 			struct netr_OneDomainInfo,
 			domain_info->trusted_domain_count);
 		NT_STATUS_HAVE_NO_MEMORY(domain_info->trusted_domains);
 
-		for (i=0;i<ret3;i++) {
-			status = fill_one_domain_info(mem_ctx,
-				dce_call->conn->dce_ctx->lp_ctx,
-				sam_ctx, res3[i],
-				&domain_info->trusted_domains[i],
-				false, true);
-			NT_STATUS_NOT_OK_RETURN(status);
+		for (i=0; i < trusts_res->count; i++) {
+			struct netr_OneDomainInfo *o =
+				&domain_info->trusted_domains[i];
+			/* we can't know the guid of trusts outside our forest */
+			struct GUID trust_domain_guid = GUID_zero();
+			struct lsa_TrustDomainInfoInfoEx *tdo = NULL;
+
+			status = dsdb_trust_parse_tdo_info(mem_ctx,
+							   trusts_res->msgs[i],
+							   &tdo);
+			if (!NT_STATUS_IS_OK(status)) {
+				return status;
+			}
+
+			status = fill_trust_one_domain_info(mem_ctx,
+							    trust_domain_guid,
+							    tdo,
+							    o);
+			if (!NT_STATUS_IS_OK(status)) {
+				return status;
+			}
 		}
 
-		status = fill_one_domain_info(mem_ctx,
-			dce_call->conn->dce_ctx->lp_ctx, sam_ctx, res2[0],
-			&domain_info->trusted_domains[i], true, true);
-		NT_STATUS_NOT_OK_RETURN(status);
+		status = fill_our_one_domain_info(mem_ctx,
+						  our_tdo,
+						  *our_domain_guid,
+						  &domain_info->trusted_domains[i],
+						  true);
+		if (!NT_STATUS_IS_OK(status)) {
+			return status;
+		}
 
 		/* Sets the supported encryption types */
 		domain_info->supported_enc_types = ldb_msg_find_attr_as_uint(res1[0],
diff -Npur samba-4.7.10/source4/selftest/tests.py samba-4.7.11/source4/selftest/tests.py
--- samba-4.7.10/source4/selftest/tests.py	2018-08-11 21:56:41.000000000 +0200
+++ samba-4.7.11/source4/selftest/tests.py	2018-10-23 11:10:04.000000000 +0200
@@ -311,7 +311,13 @@ for t in nbt_tests:
 ntvfsargs = ["--option=torture:sharedelay=100000", "--option=torture:oplocktimeout=3", "--option=torture:writetimeupdatedelay=500000"]
 
 # Filter smb2 tests that should not run against ad_dc_ntvfs
-smb2_s3only = ["smb2.change_notify_disabled", "smb2.dosmode", "smb2.credits", "smb2.kernel-oplocks"]
+smb2_s3only = [
+    "smb2.change_notify_disabled",
+    "smb2.dosmode",
+    "smb2.credits",
+    "smb2.kernel-oplocks",
+    "smb2.durable-v2-delay",
+]
 smb2 = [x for x in smbtorture4_testsuites("smb2.") if x not in smb2_s3only]
 
 #The QFILEINFO-IPC test needs to be on ipc$
@@ -425,6 +431,7 @@ plantestsuite("samba4.blackbox.trust_uti
 plantestsuite("samba4.blackbox.trust_utils(fl2003dc:local)", "fl2003dc:local", [os.path.join(bbdir, "test_trust_utils.sh"), '$SERVER', '$USERNAME', '$PASSWORD', '$REALM', '$DOMAIN', '$TRUST_SERVER', '$TRUST_USERNAME', '$TRUST_PASSWORD', '$TRUST_REALM', '$TRUST_DOMAIN', '$PREFIX', "external"])
 plantestsuite("samba4.blackbox.ktpass(ad_dc_ntvfs)", "ad_dc_ntvfs", [os.path.join(bbdir, "test_ktpass.sh"), '$PREFIX/ad_dc_ntvfs'])
 plantestsuite("samba4.blackbox.password_settings(ad_dc_ntvfs:local)", "ad_dc_ntvfs:local", [os.path.join(bbdir, "test_password_settings.sh"), '$SERVER', '$USERNAME', '$PASSWORD', '$REALM', '$DOMAIN', "$PREFIX/ad_dc_ntvfs"])
+plantestsuite("samba4.blackbox.trust_user_account", "fl2008r2dc:local", [os.path.join(bbdir, "test_trust_user_account.sh"), '$PREFIX', '$REALM', '$DOMAIN', '$TRUST_REALM', '$TRUST_DOMAIN'])
 plantestsuite("samba4.blackbox.cifsdd(ad_dc_ntvfs)", "ad_dc_ntvfs", [os.path.join(samba4srcdir, "client/tests/test_cifsdd.sh"), '$SERVER', '$USERNAME', '$PASSWORD', "$DOMAIN"])
 plantestsuite("samba4.blackbox.nmblookup(ad_dc_ntvfs)", "ad_dc_ntvfs", [os.path.join(samba4srcdir, "utils/tests/test_nmblookup.sh"), '$NETBIOSNAME', '$NETBIOSALIAS', '$SERVER', '$SERVER_IP', nmblookup4])
 plantestsuite("samba4.blackbox.locktest(ad_dc_ntvfs)", "ad_dc_ntvfs", [os.path.join(samba4srcdir, "torture/tests/test_locktest.sh"), '$SERVER', '$USERNAME', '$PASSWORD', '$DOMAIN', '$PREFIX'])
diff -Npur samba-4.7.10/source4/torture/rpc/netlogon.c samba-4.7.11/source4/torture/rpc/netlogon.c
--- samba-4.7.10/source4/torture/rpc/netlogon.c	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.11/source4/torture/rpc/netlogon.c	2018-10-23 11:10:04.000000000 +0200
@@ -307,7 +307,9 @@ bool test_SetupCredentials3(struct dcerp
 	struct dcerpc_binding_handle *b = p->binding_handle;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge\n");
 
@@ -377,7 +379,9 @@ bool test_SetupCredentialsDowngrade(stru
 	uint32_t negotiate_flags = 0;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge\n");
 
@@ -1255,7 +1259,9 @@ static bool test_ServerReqChallengeGloba
 	struct dcerpc_binding_handle *b2 = NULL;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge on b1\n");
 
@@ -1334,7 +1340,9 @@ static bool test_ServerReqChallengeReuse
 	struct dcerpc_binding_handle *b3 = NULL;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge on b1\n");
 
@@ -1429,7 +1437,9 @@ static bool test_ServerReqChallengeReuse
 	struct dcerpc_binding_handle *b2 = NULL;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge on b1\n");
 
@@ -1517,7 +1527,9 @@ static bool test_ServerReqChallengeReuse
 	struct dcerpc_binding_handle *b2 = NULL;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge on b1\n");
 
@@ -1607,7 +1619,9 @@ static bool test_ServerReqChallengeReuse
 	struct dcerpc_binding_handle *b2 = NULL;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge on b1\n");
 
@@ -1722,7 +1736,9 @@ static bool test_ServerReqChallengeReuse
 	struct dcerpc_binding_handle *b = p->binding_handle;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge on b1\n");
 
@@ -4069,9 +4085,13 @@ static bool test_GetDomainInfo(struct to
 	const char *old_dnsname = NULL;
 	char **spns = NULL;
 	int num_spns = 0;
-	char *temp_str;
+	char *temp_str = NULL;
+	char *temp_str2 = NULL;
 	struct dcerpc_pipe *p = NULL;
 	struct dcerpc_binding_handle *b = NULL;
+	struct netr_OneDomainInfo *odi1 = NULL;
+	struct netr_OneDomainInfo *odi2 = NULL;
+	struct netr_trust_extension *tex2 = NULL;
 
 	torture_comment(tctx, "Testing netr_LogonGetDomainInfo\n");
 
@@ -4448,6 +4468,130 @@ static bool test_GetDomainInfo(struct to
 		&& (info.domain_info->trusted_domains != NULL),
 		"Trusted domains have been requested!");
 
+	odi1 = &info.domain_info->primary_domain;
+
+	torture_assert(tctx, !GUID_all_zero(&odi1->domain_guid),
+		       "primary domain_guid needs to be valid");
+
+	for (i=0; i < info.domain_info->trusted_domain_count; i++) {
+		struct netr_OneDomainInfo *odiT =
+			&info.domain_info->trusted_domains[i];
+		struct netr_trust_extension *texT = NULL;
+
+		torture_assert_int_equal(tctx, odiT->trust_extension.length, 16,
+					 "trust_list should have extension");
+		torture_assert(tctx, odiT->trust_extension.info != NULL,
+			       "trust_list should have extension");
+		texT = odiT->trust_extension.info;
+
+		if (GUID_equal(&odiT->domain_guid, &odi1->domain_guid)) {
+			odi2 = odiT;
+			tex2 = texT;
+			continue;
+		}
+
+		torture_assert_int_equal(tctx,
+				 texT->flags & NETR_TRUST_FLAG_PRIMARY,
+				 0,
+				 "trust_list flags should not have PRIMARY");
+
+		torture_assert(tctx, odiT->domainname.string != NULL,
+			       "trust_list domainname should be valid");
+		if (texT->trust_type == LSA_TRUST_TYPE_DOWNLEVEL) {
+			torture_assert(tctx, odiT->dns_domainname.string == NULL,
+			       "trust_list dns_domainname should be NULL for downlevel");
+		} else {
+			torture_assert(tctx, odiT->dns_domainname.string != NULL,
+			       "trust_list dns_domainname should be valid for uplevel");
+		}
+		torture_assert(tctx, odiT->dns_forestname.string == NULL,
+			       "trust_list dns_forestname needs to be NULL");
+
+		torture_assert(tctx, odiT->domain_sid != NULL,
+			       "trust_list domain_sid needs to be valid");
+	}
+
+	torture_assert(tctx, odi2 != NULL,
+		       "trust_list primary domain not found.");
+
+	torture_assert_str_equal(tctx,
+				 odi1->domainname.string,
+				 odi2->domainname.string,
+				 "netbios name should match");
+
+	temp_str = talloc_strdup(tctx, odi1->dns_domainname.string);
+	torture_assert(tctx, temp_str != NULL,
+		       "primary_domain dns_domainname copy");
+	temp_str2 = strrchr(temp_str, '.');
+	torture_assert(tctx, temp_str2 != NULL && temp_str2[1] == '\0',
+		       "primary_domain dns_domainname needs trailing '.'");
+	temp_str2[0] = '\0';
+	torture_assert_str_equal(tctx,
+				 temp_str,
+				 odi2->dns_domainname.string,
+				 "dns domainname should match "
+				 "(without trailing '.')");
+
+	temp_str = talloc_strdup(tctx, odi1->dns_forestname.string);
+	torture_assert(tctx, temp_str != NULL,
+		       "primary_domain dns_forestname copy");
+	temp_str2 = strrchr(temp_str, '.');
+	torture_assert(tctx, temp_str2 != NULL && temp_str2[1] == '\0',
+		       "primary_domain dns_forestname needs trailing '.'");
+	temp_str2[0] = '\0';
+	torture_assert(tctx, odi2->dns_forestname.string == NULL,
+		       "trust_list dns_forestname needs to be NULL");
+
+	torture_assert_guid_equal(tctx, odi1->domain_guid, odi2->domain_guid,
+				  "domain_guid should match");
+	torture_assert(tctx, odi1->domain_sid != NULL,
+		       "primary domain_sid needs to be valid");
+	torture_assert(tctx, odi2->domain_sid != NULL,
+		       "trust_list domain_sid needs to be valid");
+	torture_assert_sid_equal(tctx, odi1->domain_sid, odi2->domain_sid,
+				 "domain_sid should match");
+
+	torture_assert_int_equal(tctx, odi1->trust_extension.length, 0,
+				 "primary_domain should not have extension");
+	torture_assert_int_equal(tctx, odi2->trust_extension.length, 16,
+				 "trust_list should have extension");
+	torture_assert(tctx, odi2->trust_extension.info != NULL,
+		       "trust_list should have extension");
+	tex2 = odi2->trust_extension.info;
+	torture_assert_int_equal(tctx,
+				 tex2->flags & NETR_TRUST_FLAG_PRIMARY,
+				 NETR_TRUST_FLAG_PRIMARY,
+				 "trust_list flags should have PRIMARY");
+	torture_assert_int_equal(tctx,
+				 tex2->flags & NETR_TRUST_FLAG_IN_FOREST,
+				 NETR_TRUST_FLAG_IN_FOREST,
+				 "trust_list flags should have IN_FOREST");
+	torture_assert_int_equal(tctx,
+				 tex2->flags & NETR_TRUST_FLAG_NATIVE,
+				 NETR_TRUST_FLAG_NATIVE,
+				 "trust_list flags should have NATIVE");
+	torture_assert_int_equal(tctx,
+				 tex2->flags & ~NETR_TRUST_FLAG_TREEROOT,
+				 NETR_TRUST_FLAG_IN_FOREST |
+				 NETR_TRUST_FLAG_PRIMARY |
+				 NETR_TRUST_FLAG_NATIVE,
+				 "trust_list flags IN_FOREST, PRIMARY, NATIVE "
+				 "(TREEROOT optional)");
+	if (strcmp(odi1->dns_domainname.string, odi1->dns_forestname.string) == 0) {
+		torture_assert_int_equal(tctx,
+					 tex2->flags & NETR_TRUST_FLAG_TREEROOT,
+					 NETR_TRUST_FLAG_TREEROOT,
+					 "trust_list flags TREEROOT on forest root");
+		torture_assert_int_equal(tctx,
+					 tex2->parent_index, 0,
+					 "trust_list no parent on foreset root");
+	}
+	torture_assert_int_equal(tctx,
+				 tex2->trust_type, LSA_TRUST_TYPE_UPLEVEL,
+				 "trust_list uplevel");
+	torture_assert_int_equal(tctx,
+				 tex2->trust_attributes, 0,
+				 "trust_list no attributes");
 
 	torture_comment(tctx, "Testing netr_LogonGetDomainInfo 6th call (no DNS hostname)\n");
 	netlogon_creds_client_authenticator(creds, &a);
diff -Npur samba-4.7.10/source4/torture/smb2/durable_v2_open.c samba-4.7.11/source4/torture/smb2/durable_v2_open.c
--- samba-4.7.10/source4/torture/smb2/durable_v2_open.c	2018-08-27 09:54:35.000000000 +0200
+++ samba-4.7.11/source4/torture/smb2/durable_v2_open.c	2018-10-23 11:10:04.000000000 +0200
@@ -2035,3 +2035,98 @@ struct torture_suite *torture_smb2_durab
 
 	return suite;
 }
+
+/**
+ * basic test for doing a durable open
+ * tcp disconnect, reconnect, do a durable reopen (succeeds)
+ */
+static bool test_durable_v2_reconnect_delay(struct torture_context *tctx,
+					    struct smb2_tree *tree)
+{
+	NTSTATUS status;
+	TALLOC_CTX *mem_ctx = talloc_new(tctx);
+	char fname[256];
+	struct smb2_handle _h;
+	struct smb2_handle *h = NULL;
+	struct smb2_create io;
+	struct GUID create_guid = GUID_random();
+	struct smbcli_options options;
+	uint64_t previous_session_id;
+	uint8_t b = 0;
+	bool ret = true;
+
+	options = tree->session->transport->options;
+	previous_session_id = smb2cli_session_current_id(tree->session->smbXcli);
+
+	/* Choose a random name in case the state is left a little funky. */
+	snprintf(fname, 256, "durable_v2_reconnect_delay_%s.dat",
+		 generate_random_str(tctx, 8));
+
+	smb2_util_unlink(tree, fname);
+
+	smb2_oplock_create_share(&io, fname,
+				 smb2_util_share_access(""),
+				 smb2_util_oplock_level("b"));
+	io.in.durable_open = false;
+	io.in.durable_open_v2 = true;
+	io.in.persistent_open = false;
+	io.in.create_guid = create_guid;
+	io.in.timeout = 0;
+
+	status = smb2_create(tree, mem_ctx, &io);
+	CHECK_STATUS(status, NT_STATUS_OK);
+
+	_h = io.out.file.handle;
+	h = &_h;
+	CHECK_VAL(io.out.oplock_level, smb2_util_oplock_level("b"));
+	CHECK_VAL(io.out.durable_open_v2, true);
+
+	status = smb2_util_write(tree, *h, &b, 0, 1);
+	CHECK_STATUS(status, NT_STATUS_OK);
+
+	/* disconnect, leaving the durable open */
+	TALLOC_FREE(tree);
+
+	if (!torture_smb2_connection_ext(tctx, previous_session_id,
+					 &options, &tree)) {
+		torture_warning(tctx, "couldn't reconnect, bailing\n");
+		ret = false;
+		goto done;
+	}
+
+	ZERO_STRUCT(io);
+	io.in.fname = fname;
+	io.in.durable_open_v2 = false;
+	io.in.durable_handle_v2 = h;
+	io.in.create_guid = create_guid;
+	h = NULL;
+
+	status = smb2_create(tree, mem_ctx, &io);
+	CHECK_STATUS(status, NT_STATUS_OK);
+	CHECK_VAL(io.out.oplock_level, smb2_util_oplock_level("b"));
+	_h = io.out.file.handle;
+	h = &_h;
+
+done:
+	if (h != NULL) {
+		smb2_util_close(tree, *h);
+	}
+
+	smb2_util_unlink(tree, fname);
+
+	talloc_free(tree);
+
+	talloc_free(mem_ctx);
+
+	return ret;
+}
+
+struct torture_suite *torture_smb2_durable_v2_delay_init(TALLOC_CTX *ctx)
+{
+	struct torture_suite *suite =
+	    torture_suite_create(ctx, "durable-v2-delay");
+
+	torture_suite_add_1smb2_test(suite, "durable_v2_reconnect_delay", test_durable_v2_reconnect_delay);
+
+	return suite;
+}
diff -Npur samba-4.7.10/source4/torture/smb2/session.c samba-4.7.11/source4/torture/smb2/session.c
--- samba-4.7.10/source4/torture/smb2/session.c	2018-08-27 09:54:35.000000000 +0200
+++ samba-4.7.11/source4/torture/smb2/session.c	2018-10-23 11:10:04.000000000 +0200
@@ -1046,7 +1046,8 @@ done:
 }
 
 
-static bool test_session_expire1(struct torture_context *tctx)
+static bool test_session_expire1i(struct torture_context *tctx,
+				  bool force_encryption)
 {
 	NTSTATUS status;
 	bool ret = false;
@@ -1075,6 +1076,7 @@ static bool test_session_expire1(struct
 	lpcfg_set_option(tctx->lp_ctx, "gensec_gssapi:requested_life_time=4");
 
 	lpcfg_smbcli_options(tctx->lp_ctx, &options);
+	options.signing = SMB_SIGNING_REQUIRED;
 
 	status = smb2_connect(tctx,
 			      host,
@@ -1091,6 +1093,12 @@ static bool test_session_expire1(struct
 	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
 					"smb2_connect failed");
 
+	if (force_encryption) {
+		status = smb2cli_session_encryption_on(tree->session->smbXcli);
+		torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"smb2cli_session_encryption_on failed");
+	}
+
 	/* Add some random component to the file name. */
 	snprintf(fname, sizeof(fname), "session_expire1_%s.dat",
 		 generate_random_str(tctx, 8));
@@ -1168,7 +1176,20 @@ done:
 	return ret;
 }
 
-static bool test_session_expire2(struct torture_context *tctx)
+static bool test_session_expire1s(struct torture_context *tctx)
+{
+	return test_session_expire1i(tctx,
+				     false); /* force_encryption */
+}
+
+static bool test_session_expire1e(struct torture_context *tctx)
+{
+	return test_session_expire1i(tctx,
+				     true); /* force_encryption */
+}
+
+static bool test_session_expire2i(struct torture_context *tctx,
+				  bool force_encryption)
 {
 	NTSTATUS status;
 	bool ret = false;
@@ -1218,6 +1239,7 @@ static bool test_session_expire2(struct
 	lpcfg_set_option(tctx->lp_ctx, "gensec_gssapi:requested_life_time=4");
 
 	lpcfg_smbcli_options(tctx->lp_ctx, &options);
+	options.signing = SMB_SIGNING_REQUIRED;
 
 	unc = talloc_asprintf(tctx, "\\\\%s\\%s", host, share);
 	torture_assert(tctx, unc != NULL, "talloc_asprintf");
@@ -1237,6 +1259,12 @@ static bool test_session_expire2(struct
 	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
 					"smb2_connect failed");
 
+	if (force_encryption) {
+		status = smb2cli_session_encryption_on(tree->session->smbXcli);
+		torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"smb2cli_session_encryption_on failed");
+	}
+
 	caps = smb2cli_conn_server_capabilities(tree->session->transport->conn);
 
 	/* Add some random component to the file name. */
@@ -1528,6 +1556,18 @@ done:
 	return ret;
 }
 
+static bool test_session_expire2s(struct torture_context *tctx)
+{
+	return test_session_expire2i(tctx,
+				     false); /* force_encryption */
+}
+
+static bool test_session_expire2e(struct torture_context *tctx)
+{
+	return test_session_expire2i(tctx,
+				     true); /* force_encryption */
+}
+
 bool test_session_bind1(struct torture_context *tctx, struct smb2_tree *tree1)
 {
 	const char *host = torture_setting_string(tctx, "host", NULL);
@@ -1681,8 +1721,10 @@ struct torture_suite *torture_smb2_sessi
 	torture_suite_add_1smb2_test(suite, "reauth4", test_session_reauth4);
 	torture_suite_add_1smb2_test(suite, "reauth5", test_session_reauth5);
 	torture_suite_add_1smb2_test(suite, "reauth6", test_session_reauth6);
-	torture_suite_add_simple_test(suite, "expire1", test_session_expire1);
-	torture_suite_add_simple_test(suite, "expire2", test_session_expire2);
+	torture_suite_add_simple_test(suite, "expire1s", test_session_expire1s);
+	torture_suite_add_simple_test(suite, "expire1e", test_session_expire1e);
+	torture_suite_add_simple_test(suite, "expire2s", test_session_expire2s);
+	torture_suite_add_simple_test(suite, "expire2e", test_session_expire2e);
 	torture_suite_add_1smb2_test(suite, "bind1", test_session_bind1);
 
 	suite->description = talloc_strdup(suite, "SMB2-SESSION tests");
diff -Npur samba-4.7.10/source4/torture/smb2/smb2.c samba-4.7.11/source4/torture/smb2/smb2.c
--- samba-4.7.10/source4/torture/smb2/smb2.c	2017-11-02 12:38:36.000000000 +0100
+++ samba-4.7.11/source4/torture/smb2/smb2.c	2018-10-23 11:10:04.000000000 +0200
@@ -163,6 +163,8 @@ NTSTATUS torture_smb2_init(TALLOC_CTX *c
 		torture_smb2_durable_open_disconnect_init(suite));
 	torture_suite_add_suite(suite,
 		torture_smb2_durable_v2_open_init(suite));
+	torture_suite_add_suite(suite,
+		torture_smb2_durable_v2_delay_init(suite));
 	torture_suite_add_suite(suite, torture_smb2_dir_init(suite));
 	torture_suite_add_suite(suite, torture_smb2_lease_init(suite));
 	torture_suite_add_suite(suite, torture_smb2_compound_init(suite));
diff -Npur samba-4.7.10/source4/torture/vfs/fruit.c samba-4.7.11/source4/torture/vfs/fruit.c
--- samba-4.7.10/source4/torture/vfs/fruit.c	2018-08-27 09:54:35.000000000 +0200
+++ samba-4.7.11/source4/torture/vfs/fruit.c	2018-10-23 11:10:04.000000000 +0200
@@ -4768,6 +4768,51 @@ static bool test_setinfo_stream_eof(stru
 		tctx, status, NT_STATUS_OBJECT_NAME_NOT_FOUND, ret, done,
 		"Unexpected status\n");
 
+	torture_comment(
+		tctx, "Setting main file EOF to 1 to force 0-truncate\n");
+
+	status = torture_smb2_testfile_access(
+		tree,
+		fname,
+		&h1,
+		SEC_FILE_WRITE_DATA);
+	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"torture_smb2_testfile failed\n");
+
+	ZERO_STRUCT(sfinfo);
+	sfinfo.generic.in.file.handle = h1;
+	sfinfo.generic.level = RAW_SFILEINFO_END_OF_FILE_INFORMATION;
+	sfinfo.position_information.in.position = 1;
+	status = smb2_setinfo_file(tree, &sfinfo);
+        torture_assert_ntstatus_ok_goto(
+		tctx,
+		status,
+		ret,
+		done,
+		"set eof 1 failed\n");
+
+	sfinfo.position_information.in.position = 0;
+	status = smb2_setinfo_file(tree, &sfinfo);
+        torture_assert_ntstatus_ok_goto(
+		tctx,
+		status,
+		ret,
+		done,
+		"set eof 0 failed\n");
+
+        smb2_util_close(tree, h1);
+
+	ZERO_STRUCT(create);
+	create.in.desired_access = SEC_FILE_READ_ATTRIBUTE;
+	create.in.share_access = NTCREATEX_SHARE_ACCESS_MASK;
+	create.in.file_attributes = FILE_ATTRIBUTE_NORMAL;
+	create.in.create_disposition = NTCREATEX_DISP_OPEN;
+	create.in.fname = fname;
+
+	status = smb2_create(tree, tctx, &create);
+	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"torture_smb2_testfile failed\n");
+	smb2_util_close(tree, h1);
 done:
 	smb2_util_unlink(tree, fname);
 	smb2_util_rmdir(tree, BASEDIR);
diff -Npur samba-4.7.10/testprogs/blackbox/subunit.sh samba-4.7.11/testprogs/blackbox/subunit.sh
--- samba-4.7.10/testprogs/blackbox/subunit.sh	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.11/testprogs/blackbox/subunit.sh	2018-10-23 11:10:04.000000000 +0200
@@ -90,6 +90,31 @@ testit () {
 	return $status
 }
 
+# This returns 0 if the command gave success and the grep value was found
+# all other cases return != 0
+testit_grep () {
+	name="$1"
+	shift
+	grep="$1"
+	shift
+	cmdline="$@"
+	subunit_start_test "$name"
+	output=`$cmdline 2>&1`
+	status=$?
+	if [ x$status != x0 ]; then
+		printf '%s' "$output" | subunit_fail_test "$name"
+		return $status
+	fi
+	printf '%s' "$output" | grep -q "$grep"
+	gstatus=$?
+	if [ x$gstatus = x0 ]; then
+		subunit_pass_test "$name"
+	else
+		printf 'GREP: "%s" not found in output:\n%s' "$grep" "$output" | subunit_fail_test "$name"
+	fi
+	return $status
+}
+
 testit_expect_failure () {
 	name="$1"
 	shift
@@ -104,6 +129,31 @@ testit_expect_failure () {
 	fi
 	return $status
 }
+
+# This returns 0 if the command gave a failure and the grep value was found
+# all other cases return != 0
+testit_expect_failure_grep () {
+	name="$1"
+	shift
+	grep="$1"
+	shift
+	cmdline="$@"
+	subunit_start_test "$name"
+	output=`$cmdline 2>&1`
+	status=$?
+	if [ x$status = x0 ]; then
+		printf '%s' "$output" | subunit_fail_test "$name"
+		return 1
+	fi
+	printf '%s' "$output" | grep -q "$grep"
+	gstatus=$?
+	if [ x$gstatus = x0 ]; then
+		subunit_pass_test "$name"
+	else
+		printf 'GREP: "%s" not found in output:\n%s' "$grep" "$output" | subunit_fail_test "$name"
+	fi
+	return $status
+}
 
 testok () {
 	name=`basename $1`
diff -Npur samba-4.7.10/testprogs/blackbox/test_trust_user_account.sh samba-4.7.11/testprogs/blackbox/test_trust_user_account.sh
--- samba-4.7.10/testprogs/blackbox/test_trust_user_account.sh	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.7.11/testprogs/blackbox/test_trust_user_account.sh	2018-10-23 11:10:04.000000000 +0200
@@ -0,0 +1,58 @@
+#!/bin/sh
+
+if [ $# -lt 1 ]; then
+cat <<EOF
+Usage: test_trust_user_account.sh PREFIX OUR_REALM OUR_FLAT REMOTE_REALM REMOTE_FLAT
+EOF
+exit 1;
+fi
+
+PREFIX="$1"
+OUR_REALM="$2"
+OUR_FLAT="$3"
+REMOTE_REALM="$4"
+REMOTE_FLAT="$5"
+shift 5
+
+. `dirname $0`/subunit.sh
+
+
+samba_tool="$BINDIR/samba-tool"
+samba4bindir="$BINDIR"
+samba4srcdir="$SRCDIR/source4"
+samba4kinit="kinit -k"
+if test -x $BINDIR/samba4kinit; then
+	samba4kinit="$BINDIR/samba4kinit --use-keytab"
+fi
+
+KEYTAB="$PREFIX/tmptda.keytab"
+
+KRB5_TRACE=/dev/stderr
+export KRB5_TRACE
+
+testit "retrieve keytab for TDA of $REMOTE_REALM" $samba_tool domain exportkeytab $KEYTAB $CONFIGURATION --principal "$REMOTE_FLAT\$@$OUR_REALM" || failed=`expr $failed + 1`
+
+KRB5CCNAME="$PREFIX/tmptda.ccache"
+export KRB5CCNAME
+
+rm -f $KRB5CCNAME
+
+EXPECTED_SALT="${OUR_REALM}krbtgt${REMOTE_FLAT}"
+#
+# Note the \$ is for the end of line in grep
+#
+# There must be no trailing '$' in the SALT string itself,
+# it's removed from the sAMAccountName value (which includes the trailing '$')
+# before construting the salt!
+#
+# Otherwise this would be:
+# "^virtualKerberosSalt: ${EXPECTED_SALT}\\\$\$"
+#
+EXPECTED_GREP="^virtualKerberosSalt: ${EXPECTED_SALT}\$"
+testit_grep "get virtualKerberosSalt for TDA of $REMOTE_FLAT\$" "$EXPECTED_GREP" $samba_tool user getpassword "$REMOTE_FLAT\$" $CONFIGURATION --attributes=virtualKerberosSalt || failed=`expr $failed + 1`
+
+testit "kinit with keytab for TDA of $REMOTE_REALM" $samba4kinit -t $KEYTAB "$REMOTE_FLAT\$@$OUR_REALM" || failed=`expr $failed + 1`
+
+rm -f $KRB5CCNAME $KEYTAB
+
+exit $failed
