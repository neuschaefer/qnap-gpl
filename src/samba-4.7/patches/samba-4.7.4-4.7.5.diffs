diff -Npur samba-4.7.4/VERSION samba-4.7.5/VERSION
--- samba-4.7.4/VERSION	2017-12-22 21:40:58.000000000 +0100
+++ samba-4.7.5/VERSION	2018-02-07 09:37:51.000000000 +0100
@@ -25,7 +25,7 @@
 ########################################################
 SAMBA_VERSION_MAJOR=4
 SAMBA_VERSION_MINOR=7
-SAMBA_VERSION_RELEASE=4
+SAMBA_VERSION_RELEASE=5
 
 ########################################################
 # If a official release has a serious bug              #
diff -Npur samba-4.7.4/WHATSNEW.txt samba-4.7.5/WHATSNEW.txt
--- samba-4.7.4/WHATSNEW.txt	2017-12-22 21:40:58.000000000 +0100
+++ samba-4.7.5/WHATSNEW.txt	2018-02-07 09:37:51.000000000 +0100
@@ -1,4 +1,91 @@
                    =============================
+                   Release Notes for Samba 4.7.5
+                          February 7, 2018
+                   =============================
+
+
+This is the latest stable release of the Samba 4.7 release series.
+
+Major enhancements include:
+
+o  BUG 13228: This is a major issue in Samba's ActiveDirectory domain
+   controller code. It might happen that AD objects have missing or broken
+   linked attributes. This could lead to broken group memberships e.g.
+   All Samba AD domain controllers set up with Samba 4.6 or lower and then
+   upgraded to 4.7 are affected. The corrupt database can be fixed with
+   'samba-tool dbcheck --cross-ncs --fix'.
+
+
+Changes since 4.7.4:
+--------------------
+
+o  Jeremy Allison <jra@samba.org>
+   * BUG 13193: smbd tries to release not leased oplock during oplock II
+     downgrade.
+
+o  Ralph Boehme <slow@samba.org>
+   * BUG 13181: Fix copying file with empty FinderInfo from Windows client
+     to Samba share with fruit.
+
+o  GÃ¼nther Deschner <gd@samba.org>
+   * BUG 10976: build: Deal with recent glibc sunrpc header removal.
+   * BUG 13238: Make Samba work with tirpc and libnsl2.
+
+o  David Disseldorp <ddiss@samba.org>
+   * BUG 13208: vfs_ceph: Add fs_capabilities hook to avoid local statvfs.
+
+o  Love Hornquist Astrand <lha@h5l.org>
+   * BUG 12986: Kerberos: PKINIT: Can't decode algorithm parameters in
+     clientPublicValue.
+
+o  Amitay Isaacs <amitay@gmail.com>
+   * BUG 13188: ctdb-recovery-helper: Deregister message handler in error
+     paths.
+
+o  Volker Lendecke <vl@samba.org>
+   * BUG 13240: samba: Only use async signal-safe functions in signal handler.
+
+o  Stefan Metzmacher <metze@samba.org>
+   * BUG 12986: Kerberos: PKINIT: Can't decode algorithm parameters in
+     clientPublicValue.
+   * BUG 13228: repl_meta_data: Fix linked attribute corruption on databases
+     with unsorted links on expunge. dbcheck: Add functionality to fix the
+     corrupt database.
+
+o  Christof Schmitt <cs@samba.org>
+   * BUG 13189: Fix smbd panic when chdir returns error during exit.
+
+o  Andreas Schneider <asn@samba.org>
+   * BUG 13238: Make Samba work with tirpc and libnsl2.
+
+o  Uri Simchoni <uri@samba.org>
+   * BUG 13176: Fix POSIX ACL support on HPUX and possibly other big-endian OSs.
+
+
+#######################################
+Reporting bugs & Development Discussion
+#######################################
+
+Please discuss this release on the samba-technical mailing list or by
+joining the #samba-technical IRC channel on irc.freenode.net.
+
+If you do report problems then please try to send high quality
+feedback. If you don't provide vital information to help us track down
+the problem then you will probably be ignored.  All bug reports should
+be filed under the "Samba 4.1 and newer" product in the project's Bugzilla
+database (https://bugzilla.samba.org/).
+
+
+======================================================================
+== Our Code, Our Bugs, Our Responsibility.
+== The Samba Team
+======================================================================
+
+
+Release notes for older releases follow:
+----------------------------------------
+
+                   =============================
                    Release Notes for Samba 4.7.4
                           December 22, 2017
                    =============================
@@ -119,8 +206,8 @@ database (https://bugzilla.samba.org/).
 ======================================================================
 
 
-Release notes for older releases follow:
-----------------------------------------
+----------------------------------------------------------------------
+
 
                    =============================
                    Release Notes for Samba 4.7.3
diff -Npur samba-4.7.4/buildtools/wafsamba/samba_autoconf.py samba-4.7.5/buildtools/wafsamba/samba_autoconf.py
--- samba-4.7.4/buildtools/wafsamba/samba_autoconf.py	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.5/buildtools/wafsamba/samba_autoconf.py	2018-02-07 09:37:51.000000000 +0100
@@ -454,7 +454,8 @@ def CHECK_CODE(conf, code, define,
 
 @conf
 def CHECK_STRUCTURE_MEMBER(conf, structname, member,
-                           always=False, define=None, headers=None):
+                           always=False, define=None, headers=None,
+                           lib=None):
     '''check for a structure member'''
     if define is None:
         define = 'HAVE_%s' % member.upper()
@@ -463,6 +464,7 @@ def CHECK_STRUCTURE_MEMBER(conf, structn
                       define,
                       execute=False,
                       link=False,
+                      lib=lib,
                       always=always,
                       headers=headers,
                       local_include=False,
diff -Npur samba-4.7.4/ctdb/doc/ctdb-etcd.7 samba-4.7.5/ctdb/doc/ctdb-etcd.7
--- samba-4.7.4/ctdb/doc/ctdb-etcd.7	2017-12-22 21:53:39.000000000 +0100
+++ samba-4.7.5/ctdb/doc/ctdb-etcd.7	2018-02-07 09:43:02.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdb-etcd
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB\-ETCD" "7" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB\-ETCD" "7" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/doc/ctdb-statistics.7 samba-4.7.5/ctdb/doc/ctdb-statistics.7
--- samba-4.7.4/ctdb/doc/ctdb-statistics.7	2017-12-22 21:53:39.000000000 +0100
+++ samba-4.7.5/ctdb/doc/ctdb-statistics.7	2018-02-07 09:43:01.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdb-statistics
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB\-STATISTICS" "7" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB\-STATISTICS" "7" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/doc/ctdb-tunables.7 samba-4.7.5/ctdb/doc/ctdb-tunables.7
--- samba-4.7.4/ctdb/doc/ctdb-tunables.7	2017-12-22 21:53:39.000000000 +0100
+++ samba-4.7.5/ctdb/doc/ctdb-tunables.7	2018-02-07 09:43:02.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdb-tunables
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB\-TUNABLES" "7" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB\-TUNABLES" "7" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/doc/ctdb.1 samba-4.7.5/ctdb/doc/ctdb.1
--- samba-4.7.4/ctdb/doc/ctdb.1	2017-12-22 21:53:36.000000000 +0100
+++ samba-4.7.5/ctdb/doc/ctdb.1	2018-02-07 09:42:58.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdb
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB" "1" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB" "1" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/doc/ctdb.7 samba-4.7.5/ctdb/doc/ctdb.7
--- samba-4.7.4/ctdb/doc/ctdb.7	2017-12-22 21:53:38.000000000 +0100
+++ samba-4.7.5/ctdb/doc/ctdb.7	2018-02-07 09:43:01.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdb
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB" "7" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB" "7" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/doc/ctdb_diagnostics.1 samba-4.7.5/ctdb/doc/ctdb_diagnostics.1
--- samba-4.7.4/ctdb/doc/ctdb_diagnostics.1	2017-12-22 21:53:37.000000000 +0100
+++ samba-4.7.5/ctdb/doc/ctdb_diagnostics.1	2018-02-07 09:43:00.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdb_diagnostics
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB_DIAGNOSTICS" "1" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB_DIAGNOSTICS" "1" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/doc/ctdb_mutex_ceph_rados_helper.7 samba-4.7.5/ctdb/doc/ctdb_mutex_ceph_rados_helper.7
--- samba-4.7.4/ctdb/doc/ctdb_mutex_ceph_rados_helper.7	2017-12-22 21:53:40.000000000 +0100
+++ samba-4.7.5/ctdb/doc/ctdb_mutex_ceph_rados_helper.7	2018-02-07 09:43:02.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: Ceph RADOS Mutex
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CEPH RADOS MUTEX" "7" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "CEPH RADOS MUTEX" "7" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/doc/ctdbd.1 samba-4.7.5/ctdb/doc/ctdbd.1
--- samba-4.7.4/ctdb/doc/ctdbd.1	2017-12-22 21:53:36.000000000 +0100
+++ samba-4.7.5/ctdb/doc/ctdbd.1	2018-02-07 09:42:58.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdbd
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDBD" "1" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDBD" "1" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/doc/ctdbd.conf.5 samba-4.7.5/ctdb/doc/ctdbd.conf.5
--- samba-4.7.4/ctdb/doc/ctdbd.conf.5	2017-12-22 21:53:38.000000000 +0100
+++ samba-4.7.5/ctdb/doc/ctdbd.conf.5	2018-02-07 09:43:01.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdbd.conf
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDBD\&.CONF" "5" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDBD\&.CONF" "5" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/doc/ctdbd_wrapper.1 samba-4.7.5/ctdb/doc/ctdbd_wrapper.1
--- samba-4.7.4/ctdb/doc/ctdbd_wrapper.1	2017-12-22 21:53:37.000000000 +0100
+++ samba-4.7.5/ctdb/doc/ctdbd_wrapper.1	2018-02-07 09:43:00.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdbd_wrapper
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDBD_WRAPPER" "1" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDBD_WRAPPER" "1" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/doc/ltdbtool.1 samba-4.7.5/ctdb/doc/ltdbtool.1
--- samba-4.7.4/ctdb/doc/ltdbtool.1	2017-12-22 21:53:36.000000000 +0100
+++ samba-4.7.5/ctdb/doc/ltdbtool.1	2018-02-07 09:42:59.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ltdbtool
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "LTDBTOOL" "1" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "LTDBTOOL" "1" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/doc/onnode.1 samba-4.7.5/ctdb/doc/onnode.1
--- samba-4.7.4/ctdb/doc/onnode.1	2017-12-22 21:53:38.000000000 +0100
+++ samba-4.7.5/ctdb/doc/onnode.1	2018-02-07 09:43:00.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: onnode
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "ONNODE" "1" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "ONNODE" "1" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/doc/ping_pong.1 samba-4.7.5/ctdb/doc/ping_pong.1
--- samba-4.7.4/ctdb/doc/ping_pong.1	2017-12-22 21:53:37.000000000 +0100
+++ samba-4.7.5/ctdb/doc/ping_pong.1	2018-02-07 09:42:59.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ping_pong
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "PING_PONG" "1" "12/22/2017" "ctdb" "CTDB \- clustered TDB database"
+.TH "PING_PONG" "1" "02/07/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/ctdb/server/ctdb_recovery_helper.c samba-4.7.5/ctdb/server/ctdb_recovery_helper.c
--- samba-4.7.4/ctdb/server/ctdb_recovery_helper.c	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.5/ctdb/server/ctdb_recovery_helper.c	2018-02-07 09:37:51.000000000 +0100
@@ -397,6 +397,7 @@ struct pull_database_state {
 	uint32_t pnn;
 	uint64_t srvid;
 	int num_records;
+	int result;
 };
 
 static void pull_database_handler(uint64_t srvid, TDB_DATA data,
@@ -594,8 +595,8 @@ static void pull_database_new_done(struc
 	if (! status) {
 		D_ERR("control DB_PULL failed for %s on node %u, ret=%d\n",
 		      recdb_name(state->recdb), state->pnn, ret);
-		tevent_req_error(req, ret);
-		return;
+		state->result = ret;
+		goto unregister;
 	}
 
 	ret = ctdb_reply_control_db_pull(reply, &num_records);
@@ -604,13 +605,15 @@ static void pull_database_new_done(struc
 		D_ERR("mismatch (%u != %u) in DB_PULL records for db %s\n",
 		      num_records, state->num_records,
 		      recdb_name(state->recdb));
-		tevent_req_error(req, EIO);
-		return;
+		state->result = EIO;
+		goto unregister;
 	}
 
 	D_INFO("Pulled %d records for db %s from node %d\n",
 	       state->num_records, recdb_name(state->recdb), state->pnn);
 
+unregister:
+
 	subreq = ctdb_client_remove_message_handler_send(
 					state, state->ev, state->client,
 					state->srvid, req);
@@ -638,6 +641,11 @@ static void pull_database_unregister_don
 		return;
 	}
 
+	if (state->result != 0) {
+		tevent_req_error(req, state->result);
+		return;
+	}
+
 	tevent_req_done(req);
 }
 
diff -Npur samba-4.7.4/ctdb/wscript samba-4.7.5/ctdb/wscript
--- samba-4.7.4/ctdb/wscript	2017-09-17 21:15:34.000000000 +0200
+++ samba-4.7.5/ctdb/wscript	2018-02-07 09:37:51.000000000 +0100
@@ -540,7 +540,7 @@ def build(bld):
     bld.SAMBA_BINARY('smnotify',
                      source=bld.SUBDIR('utils/smnotify',
                                        'smnotify.c gen_smnotify.c gen_xdr.c'),
-                     deps='ctdb-smnotify-h ctdb-smnotify-c ctdb-smnotify-x popt',
+                     deps='ctdb-smnotify-h ctdb-smnotify-c ctdb-smnotify-x popt tirpc',
                      includes='utils utils/smnotify',
                      install_path='${CTDB_HELPER_BINDIR}')
 
diff -Npur samba-4.7.4/docs/manpages/cifsdd.8 samba-4.7.5/docs/manpages/cifsdd.8
--- samba-4.7.4/docs/manpages/cifsdd.8	2017-12-22 21:53:41.000000000 +0100
+++ samba-4.7.5/docs/manpages/cifsdd.8	2018-02-07 09:43:04.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: cifsdd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "CIFSDD" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "CIFSDD" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/dbwrap_tool.1 samba-4.7.5/docs/manpages/dbwrap_tool.1
--- samba-4.7.4/docs/manpages/dbwrap_tool.1	2017-12-22 21:53:42.000000000 +0100
+++ samba-4.7.5/docs/manpages/dbwrap_tool.1	2018-02-07 09:43:04.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: dbwrap_tool
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "DBWRAP_TOOL" "1" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "DBWRAP_TOOL" "1" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/eventlogadm.8 samba-4.7.5/docs/manpages/eventlogadm.8
--- samba-4.7.4/docs/manpages/eventlogadm.8	2017-12-22 21:53:42.000000000 +0100
+++ samba-4.7.5/docs/manpages/eventlogadm.8	2018-02-07 09:43:04.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: eventlogadm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "EVENTLOGADM" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "EVENTLOGADM" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/findsmb.1 samba-4.7.5/docs/manpages/findsmb.1
--- samba-4.7.4/docs/manpages/findsmb.1	2017-12-22 21:53:42.000000000 +0100
+++ samba-4.7.5/docs/manpages/findsmb.1	2018-02-07 09:43:05.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: findsmb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "FINDSMB" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "FINDSMB" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/idmap_ad.8 samba-4.7.5/docs/manpages/idmap_ad.8
--- samba-4.7.4/docs/manpages/idmap_ad.8	2017-12-22 21:53:42.000000000 +0100
+++ samba-4.7.5/docs/manpages/idmap_ad.8	2018-02-07 09:43:05.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_ad
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_AD" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_AD" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/idmap_autorid.8 samba-4.7.5/docs/manpages/idmap_autorid.8
--- samba-4.7.4/docs/manpages/idmap_autorid.8	2017-12-22 21:53:42.000000000 +0100
+++ samba-4.7.5/docs/manpages/idmap_autorid.8	2018-02-07 09:43:05.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_autorid
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_AUTORID" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_AUTORID" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/idmap_hash.8 samba-4.7.5/docs/manpages/idmap_hash.8
--- samba-4.7.4/docs/manpages/idmap_hash.8	2017-12-22 21:53:43.000000000 +0100
+++ samba-4.7.5/docs/manpages/idmap_hash.8	2018-02-07 09:43:05.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_hash
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_HASH" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_HASH" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/idmap_ldap.8 samba-4.7.5/docs/manpages/idmap_ldap.8
--- samba-4.7.4/docs/manpages/idmap_ldap.8	2017-12-22 21:53:43.000000000 +0100
+++ samba-4.7.5/docs/manpages/idmap_ldap.8	2018-02-07 09:43:05.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_ldap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_LDAP" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_LDAP" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/idmap_nss.8 samba-4.7.5/docs/manpages/idmap_nss.8
--- samba-4.7.4/docs/manpages/idmap_nss.8	2017-12-22 21:53:43.000000000 +0100
+++ samba-4.7.5/docs/manpages/idmap_nss.8	2018-02-07 09:43:06.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_nss
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_NSS" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_NSS" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/idmap_rfc2307.8 samba-4.7.5/docs/manpages/idmap_rfc2307.8
--- samba-4.7.4/docs/manpages/idmap_rfc2307.8	2017-12-22 21:53:43.000000000 +0100
+++ samba-4.7.5/docs/manpages/idmap_rfc2307.8	2018-02-07 09:43:06.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_rfc2307
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_RFC2307" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_RFC2307" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/idmap_rid.8 samba-4.7.5/docs/manpages/idmap_rid.8
--- samba-4.7.4/docs/manpages/idmap_rid.8	2017-12-22 21:53:43.000000000 +0100
+++ samba-4.7.5/docs/manpages/idmap_rid.8	2018-02-07 09:43:06.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_rid
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_RID" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_RID" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/idmap_script.8 samba-4.7.5/docs/manpages/idmap_script.8
--- samba-4.7.4/docs/manpages/idmap_script.8	2017-12-22 21:53:44.000000000 +0100
+++ samba-4.7.5/docs/manpages/idmap_script.8	2018-02-07 09:43:06.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_script
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_SCRIPT" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_SCRIPT" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/idmap_tdb.8 samba-4.7.5/docs/manpages/idmap_tdb.8
--- samba-4.7.4/docs/manpages/idmap_tdb.8	2017-12-22 21:53:44.000000000 +0100
+++ samba-4.7.5/docs/manpages/idmap_tdb.8	2018-02-07 09:43:06.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_tdb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_TDB" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_TDB" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/idmap_tdb2.8 samba-4.7.5/docs/manpages/idmap_tdb2.8
--- samba-4.7.4/docs/manpages/idmap_tdb2.8	2017-12-22 21:53:44.000000000 +0100
+++ samba-4.7.5/docs/manpages/idmap_tdb2.8	2018-02-07 09:43:07.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_tdb2
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "IDMAP_TDB2" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "IDMAP_TDB2" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/libsmbclient.7 samba-4.7.5/docs/manpages/libsmbclient.7
--- samba-4.7.4/docs/manpages/libsmbclient.7	2017-12-22 21:53:44.000000000 +0100
+++ samba-4.7.5/docs/manpages/libsmbclient.7	2018-02-07 09:43:07.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: libsmbclient
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: 7
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "LIBSMBCLIENT" "7" "12/22/2017" "Samba 4\&.7" "7"
+.TH "LIBSMBCLIENT" "7" "02/07/2018" "Samba 4\&.7" "7"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/lmhosts.5 samba-4.7.5/docs/manpages/lmhosts.5
--- samba-4.7.4/docs/manpages/lmhosts.5	2017-12-22 21:53:44.000000000 +0100
+++ samba-4.7.5/docs/manpages/lmhosts.5	2018-02-07 09:43:07.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: lmhosts
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: File Formats and Conventions
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "LMHOSTS" "5" "12/22/2017" "Samba 4\&.7" "File Formats and Conventions"
+.TH "LMHOSTS" "5" "02/07/2018" "Samba 4\&.7" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/log2pcap.1 samba-4.7.5/docs/manpages/log2pcap.1
--- samba-4.7.4/docs/manpages/log2pcap.1	2017-12-22 21:53:45.000000000 +0100
+++ samba-4.7.5/docs/manpages/log2pcap.1	2018-02-07 09:43:07.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: log2pcap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "LOG2PCAP" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "LOG2PCAP" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/mvxattr.1 samba-4.7.5/docs/manpages/mvxattr.1
--- samba-4.7.4/docs/manpages/mvxattr.1	2017-12-22 21:53:45.000000000 +0100
+++ samba-4.7.5/docs/manpages/mvxattr.1	2018-02-07 09:43:07.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: mvxattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "MVXATTR" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "MVXATTR" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/net.8 samba-4.7.5/docs/manpages/net.8
--- samba-4.7.4/docs/manpages/net.8	2017-12-22 21:53:45.000000000 +0100
+++ samba-4.7.5/docs/manpages/net.8	2018-02-07 09:43:08.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: net
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "NET" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "NET" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/nmbd.8 samba-4.7.5/docs/manpages/nmbd.8
--- samba-4.7.4/docs/manpages/nmbd.8	2017-12-22 21:53:45.000000000 +0100
+++ samba-4.7.5/docs/manpages/nmbd.8	2018-02-07 09:43:08.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: nmbd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "NMBD" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "NMBD" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/nmblookup.1 samba-4.7.5/docs/manpages/nmblookup.1
--- samba-4.7.4/docs/manpages/nmblookup.1	2017-12-22 21:53:46.000000000 +0100
+++ samba-4.7.5/docs/manpages/nmblookup.1	2018-02-07 09:43:08.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: nmblookup
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "NMBLOOKUP" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "NMBLOOKUP" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/ntlm_auth.1 samba-4.7.5/docs/manpages/ntlm_auth.1
--- samba-4.7.4/docs/manpages/ntlm_auth.1	2017-12-22 21:53:46.000000000 +0100
+++ samba-4.7.5/docs/manpages/ntlm_auth.1	2018-02-07 09:43:08.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ntlm_auth
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "NTLM_AUTH" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "NTLM_AUTH" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/pam_winbind.8 samba-4.7.5/docs/manpages/pam_winbind.8
--- samba-4.7.4/docs/manpages/pam_winbind.8	2017-12-22 21:53:46.000000000 +0100
+++ samba-4.7.5/docs/manpages/pam_winbind.8	2018-02-07 09:43:09.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: pam_winbind
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: 8
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "PAM_WINBIND" "8" "12/22/2017" "Samba 4\&.7" "8"
+.TH "PAM_WINBIND" "8" "02/07/2018" "Samba 4\&.7" "8"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/pam_winbind.conf.5 samba-4.7.5/docs/manpages/pam_winbind.conf.5
--- samba-4.7.4/docs/manpages/pam_winbind.conf.5	2017-12-22 21:53:46.000000000 +0100
+++ samba-4.7.5/docs/manpages/pam_winbind.conf.5	2018-02-07 09:43:09.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: pam_winbind.conf
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: 5
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "PAM_WINBIND\&.CONF" "5" "12/22/2017" "Samba 4\&.7" "5"
+.TH "PAM_WINBIND\&.CONF" "5" "02/07/2018" "Samba 4\&.7" "5"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/pdbedit.8 samba-4.7.5/docs/manpages/pdbedit.8
--- samba-4.7.4/docs/manpages/pdbedit.8	2017-12-22 21:53:46.000000000 +0100
+++ samba-4.7.5/docs/manpages/pdbedit.8	2018-02-07 09:43:09.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: pdbedit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "PDBEDIT" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "PDBEDIT" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/profiles.1 samba-4.7.5/docs/manpages/profiles.1
--- samba-4.7.4/docs/manpages/profiles.1	2017-12-22 21:53:47.000000000 +0100
+++ samba-4.7.5/docs/manpages/profiles.1	2018-02-07 09:43:09.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: profiles
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "PROFILES" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "PROFILES" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/rpcclient.1 samba-4.7.5/docs/manpages/rpcclient.1
--- samba-4.7.4/docs/manpages/rpcclient.1	2017-12-22 21:53:47.000000000 +0100
+++ samba-4.7.5/docs/manpages/rpcclient.1	2018-02-07 09:43:10.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: rpcclient
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "RPCCLIENT" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "RPCCLIENT" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/samba-regedit.8 samba-4.7.5/docs/manpages/samba-regedit.8
--- samba-4.7.4/docs/manpages/samba-regedit.8	2017-12-22 21:53:47.000000000 +0100
+++ samba-4.7.5/docs/manpages/samba-regedit.8	2018-02-07 09:43:10.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: samba-regedit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SAMBA\-REGEDIT" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "SAMBA\-REGEDIT" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/samba-tool.8 samba-4.7.5/docs/manpages/samba-tool.8
--- samba-4.7.4/docs/manpages/samba-tool.8	2017-12-22 21:53:47.000000000 +0100
+++ samba-4.7.5/docs/manpages/samba-tool.8	2018-02-07 09:43:10.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: samba-tool
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SAMBA\-TOOL" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "SAMBA\-TOOL" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/samba.7 samba-4.7.5/docs/manpages/samba.7
--- samba-4.7.4/docs/manpages/samba.7	2017-12-22 21:53:48.000000000 +0100
+++ samba-4.7.5/docs/manpages/samba.7	2018-02-07 09:43:10.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: samba
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: Miscellanea
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SAMBA" "7" "12/22/2017" "Samba 4\&.7" "Miscellanea"
+.TH "SAMBA" "7" "02/07/2018" "Samba 4\&.7" "Miscellanea"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/samba.8 samba-4.7.5/docs/manpages/samba.8
--- samba-4.7.4/docs/manpages/samba.8	2017-12-22 21:53:48.000000000 +0100
+++ samba-4.7.5/docs/manpages/samba.8	2018-02-07 09:43:10.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: samba
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SAMBA" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "SAMBA" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/sharesec.1 samba-4.7.5/docs/manpages/sharesec.1
--- samba-4.7.4/docs/manpages/sharesec.1	2017-12-22 21:53:48.000000000 +0100
+++ samba-4.7.5/docs/manpages/sharesec.1	2018-02-07 09:43:11.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: sharesec
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SHARESEC" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "SHARESEC" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smb.conf.5 samba-4.7.5/docs/manpages/smb.conf.5
--- samba-4.7.4/docs/manpages/smb.conf.5	2017-12-22 21:53:49.000000000 +0100
+++ samba-4.7.5/docs/manpages/smb.conf.5	2018-02-07 09:43:12.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smb.conf
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: File Formats and Conventions
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMB\&.CONF" "5" "12/22/2017" "Samba 4\&.7" "File Formats and Conventions"
+.TH "SMB\&.CONF" "5" "02/07/2018" "Samba 4\&.7" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbcacls.1 samba-4.7.5/docs/manpages/smbcacls.1
--- samba-4.7.4/docs/manpages/smbcacls.1	2017-12-22 21:53:50.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbcacls.1	2018-02-07 09:43:12.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbcacls
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBCACLS" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "SMBCACLS" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbclient.1 samba-4.7.5/docs/manpages/smbclient.1
--- samba-4.7.4/docs/manpages/smbclient.1	2017-12-22 21:53:50.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbclient.1	2018-02-07 09:43:13.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbclient
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBCLIENT" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "SMBCLIENT" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbcontrol.1 samba-4.7.5/docs/manpages/smbcontrol.1
--- samba-4.7.4/docs/manpages/smbcontrol.1	2017-12-22 21:53:50.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbcontrol.1	2018-02-07 09:43:13.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbcontrol
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBCONTROL" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "SMBCONTROL" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbcquotas.1 samba-4.7.5/docs/manpages/smbcquotas.1
--- samba-4.7.4/docs/manpages/smbcquotas.1	2017-12-22 21:53:50.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbcquotas.1	2018-02-07 09:43:13.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbcquotas
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBCQUOTAS" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "SMBCQUOTAS" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbd.8 samba-4.7.5/docs/manpages/smbd.8
--- samba-4.7.4/docs/manpages/smbd.8	2017-12-22 21:53:51.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbd.8	2018-02-07 09:43:13.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBD" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "SMBD" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbget.1 samba-4.7.5/docs/manpages/smbget.1
--- samba-4.7.4/docs/manpages/smbget.1	2017-12-22 21:53:51.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbget.1	2018-02-07 09:43:14.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbget
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBGET" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "SMBGET" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbgetrc.5 samba-4.7.5/docs/manpages/smbgetrc.5
--- samba-4.7.4/docs/manpages/smbgetrc.5	2017-12-22 21:53:51.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbgetrc.5	2018-02-07 09:43:14.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbgetrc
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: File Formats and Conventions
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBGETRC" "5" "12/22/2017" "Samba 4\&.7" "File Formats and Conventions"
+.TH "SMBGETRC" "5" "02/07/2018" "Samba 4\&.7" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbpasswd.5 samba-4.7.5/docs/manpages/smbpasswd.5
--- samba-4.7.4/docs/manpages/smbpasswd.5	2017-12-22 21:53:51.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbpasswd.5	2018-02-07 09:43:14.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbpasswd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: File Formats and Conventions
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBPASSWD" "5" "12/22/2017" "Samba 4\&.7" "File Formats and Conventions"
+.TH "SMBPASSWD" "5" "02/07/2018" "Samba 4\&.7" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbpasswd.8 samba-4.7.5/docs/manpages/smbpasswd.8
--- samba-4.7.4/docs/manpages/smbpasswd.8	2017-12-22 21:53:51.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbpasswd.8	2018-02-07 09:43:14.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbpasswd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBPASSWD" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "SMBPASSWD" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbspool.8 samba-4.7.5/docs/manpages/smbspool.8
--- samba-4.7.4/docs/manpages/smbspool.8	2017-12-22 21:53:52.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbspool.8	2018-02-07 09:43:14.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbspool
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBSPOOL" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "SMBSPOOL" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbspool_krb5_wrapper.8 samba-4.7.5/docs/manpages/smbspool_krb5_wrapper.8
--- samba-4.7.4/docs/manpages/smbspool_krb5_wrapper.8	2017-12-22 21:53:52.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbspool_krb5_wrapper.8	2018-02-07 09:43:15.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbspool_krb5_wrapper
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBSPOOL_KRB5_WRAPPE" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "SMBSPOOL_KRB5_WRAPPE" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbstatus.1 samba-4.7.5/docs/manpages/smbstatus.1
--- samba-4.7.4/docs/manpages/smbstatus.1	2017-12-22 21:53:52.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbstatus.1	2018-02-07 09:43:15.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbstatus
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBSTATUS" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "SMBSTATUS" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbtar.1 samba-4.7.5/docs/manpages/smbtar.1
--- samba-4.7.4/docs/manpages/smbtar.1	2017-12-22 21:53:52.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbtar.1	2018-02-07 09:43:15.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbtar
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBTAR" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "SMBTAR" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/smbtree.1 samba-4.7.5/docs/manpages/smbtree.1
--- samba-4.7.4/docs/manpages/smbtree.1	2017-12-22 21:53:52.000000000 +0100
+++ samba-4.7.5/docs/manpages/smbtree.1	2018-02-07 09:43:15.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbtree
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "SMBTREE" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "SMBTREE" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/testparm.1 samba-4.7.5/docs/manpages/testparm.1
--- samba-4.7.4/docs/manpages/testparm.1	2017-12-22 21:53:53.000000000 +0100
+++ samba-4.7.5/docs/manpages/testparm.1	2018-02-07 09:43:15.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: testparm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "TESTPARM" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "TESTPARM" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_acl_tdb.8 samba-4.7.5/docs/manpages/vfs_acl_tdb.8
--- samba-4.7.4/docs/manpages/vfs_acl_tdb.8	2017-12-22 21:53:53.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_acl_tdb.8	2018-02-07 09:43:16.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_acl_tdb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_ACL_TDB" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_ACL_TDB" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_acl_xattr.8 samba-4.7.5/docs/manpages/vfs_acl_xattr.8
--- samba-4.7.4/docs/manpages/vfs_acl_xattr.8	2017-12-22 21:53:53.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_acl_xattr.8	2018-02-07 09:43:16.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_acl_xattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_ACL_XATTR" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_ACL_XATTR" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_aio_fork.8 samba-4.7.5/docs/manpages/vfs_aio_fork.8
--- samba-4.7.4/docs/manpages/vfs_aio_fork.8	2017-12-22 21:53:53.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_aio_fork.8	2018-02-07 09:43:16.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_aio_fork
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_AIO_FORK" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_AIO_FORK" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_aio_linux.8 samba-4.7.5/docs/manpages/vfs_aio_linux.8
--- samba-4.7.4/docs/manpages/vfs_aio_linux.8	2017-12-22 21:53:53.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_aio_linux.8	2018-02-07 09:43:16.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_aio_linux
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_AIO_LINUX" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_AIO_LINUX" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_aio_pthread.8 samba-4.7.5/docs/manpages/vfs_aio_pthread.8
--- samba-4.7.4/docs/manpages/vfs_aio_pthread.8	2017-12-22 21:53:54.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_aio_pthread.8	2018-02-07 09:43:17.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_aio_pthread
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_AIO_PTHREAD" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_AIO_PTHREAD" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_audit.8 samba-4.7.5/docs/manpages/vfs_audit.8
--- samba-4.7.4/docs/manpages/vfs_audit.8	2017-12-22 21:53:54.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_audit.8	2018-02-07 09:43:17.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_AUDIT" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_AUDIT" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_btrfs.8 samba-4.7.5/docs/manpages/vfs_btrfs.8
--- samba-4.7.4/docs/manpages/vfs_btrfs.8	2017-12-22 21:53:54.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_btrfs.8	2018-02-07 09:43:17.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_btrfs
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_BTRFS" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_BTRFS" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_cacheprime.8 samba-4.7.5/docs/manpages/vfs_cacheprime.8
--- samba-4.7.4/docs/manpages/vfs_cacheprime.8	2017-12-22 21:53:54.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_cacheprime.8	2018-02-07 09:43:17.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_cacheprime
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_CACHEPRIME" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_CACHEPRIME" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_cap.8 samba-4.7.5/docs/manpages/vfs_cap.8
--- samba-4.7.4/docs/manpages/vfs_cap.8	2017-12-22 21:53:55.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_cap.8	2018-02-07 09:43:17.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_cap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_CAP" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_CAP" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_catia.8 samba-4.7.5/docs/manpages/vfs_catia.8
--- samba-4.7.4/docs/manpages/vfs_catia.8	2017-12-22 21:53:55.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_catia.8	2018-02-07 09:43:18.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_catia
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_CATIA" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_CATIA" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_ceph.8 samba-4.7.5/docs/manpages/vfs_ceph.8
--- samba-4.7.4/docs/manpages/vfs_ceph.8	2017-12-22 21:53:55.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_ceph.8	2018-02-07 09:43:18.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_ceph
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_CEPH" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_CEPH" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_commit.8 samba-4.7.5/docs/manpages/vfs_commit.8
--- samba-4.7.4/docs/manpages/vfs_commit.8	2017-12-22 21:53:55.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_commit.8	2018-02-07 09:43:18.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_commit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_COMMIT" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_COMMIT" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_crossrename.8 samba-4.7.5/docs/manpages/vfs_crossrename.8
--- samba-4.7.4/docs/manpages/vfs_crossrename.8	2017-12-22 21:53:55.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_crossrename.8	2018-02-07 09:43:18.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_crossrename
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_CROSSRENAME" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_CROSSRENAME" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_default_quota.8 samba-4.7.5/docs/manpages/vfs_default_quota.8
--- samba-4.7.4/docs/manpages/vfs_default_quota.8	2017-12-22 21:53:56.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_default_quota.8	2018-02-07 09:43:18.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_default_quota
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_DEFAULT_QUOTA" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_DEFAULT_QUOTA" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_dirsort.8 samba-4.7.5/docs/manpages/vfs_dirsort.8
--- samba-4.7.4/docs/manpages/vfs_dirsort.8	2017-12-22 21:53:56.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_dirsort.8	2018-02-07 09:43:19.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_dirsort
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_DIRSORT" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_DIRSORT" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_extd_audit.8 samba-4.7.5/docs/manpages/vfs_extd_audit.8
--- samba-4.7.4/docs/manpages/vfs_extd_audit.8	2017-12-22 21:53:56.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_extd_audit.8	2018-02-07 09:43:19.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_extd_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_EXTD_AUDIT" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_EXTD_AUDIT" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_fake_perms.8 samba-4.7.5/docs/manpages/vfs_fake_perms.8
--- samba-4.7.4/docs/manpages/vfs_fake_perms.8	2017-12-22 21:53:56.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_fake_perms.8	2018-02-07 09:43:19.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_fake_perms
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_FAKE_PERMS" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_FAKE_PERMS" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_fileid.8 samba-4.7.5/docs/manpages/vfs_fileid.8
--- samba-4.7.4/docs/manpages/vfs_fileid.8	2017-12-22 21:53:56.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_fileid.8	2018-02-07 09:43:19.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_fileid
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_FILEID" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_FILEID" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_fruit.8 samba-4.7.5/docs/manpages/vfs_fruit.8
--- samba-4.7.4/docs/manpages/vfs_fruit.8	2017-12-22 21:53:57.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_fruit.8	2018-02-07 09:43:20.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_fruit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_FRUIT" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_FRUIT" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_full_audit.8 samba-4.7.5/docs/manpages/vfs_full_audit.8
--- samba-4.7.4/docs/manpages/vfs_full_audit.8	2017-12-22 21:53:57.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_full_audit.8	2018-02-07 09:43:20.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_full_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_FULL_AUDIT" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_FULL_AUDIT" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_glusterfs.8 samba-4.7.5/docs/manpages/vfs_glusterfs.8
--- samba-4.7.4/docs/manpages/vfs_glusterfs.8	2017-12-22 21:53:57.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_glusterfs.8	2018-02-07 09:43:20.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_glusterfs
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_GLUSTERFS" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_GLUSTERFS" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_gpfs.8 samba-4.7.5/docs/manpages/vfs_gpfs.8
--- samba-4.7.4/docs/manpages/vfs_gpfs.8	2017-12-22 21:53:57.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_gpfs.8	2018-02-07 09:43:20.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_gpfs
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_GPFS" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_GPFS" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_linux_xfs_sgid.8 samba-4.7.5/docs/manpages/vfs_linux_xfs_sgid.8
--- samba-4.7.4/docs/manpages/vfs_linux_xfs_sgid.8	2017-12-22 21:53:57.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_linux_xfs_sgid.8	2018-02-07 09:43:20.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_syncops
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_SYNCOPS" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_SYNCOPS" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_media_harmony.8 samba-4.7.5/docs/manpages/vfs_media_harmony.8
--- samba-4.7.4/docs/manpages/vfs_media_harmony.8	2017-12-22 21:53:58.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_media_harmony.8	2018-02-07 09:43:21.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_media_harmony
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_MEDIA_HARMONY" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_MEDIA_HARMONY" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_netatalk.8 samba-4.7.5/docs/manpages/vfs_netatalk.8
--- samba-4.7.4/docs/manpages/vfs_netatalk.8	2017-12-22 21:53:58.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_netatalk.8	2018-02-07 09:43:21.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_netatalk
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_NETATALK" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_NETATALK" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_offline.8 samba-4.7.5/docs/manpages/vfs_offline.8
--- samba-4.7.4/docs/manpages/vfs_offline.8	2017-12-22 21:53:58.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_offline.8	2018-02-07 09:43:21.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_offline
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_OFFLINE" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_OFFLINE" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_prealloc.8 samba-4.7.5/docs/manpages/vfs_prealloc.8
--- samba-4.7.4/docs/manpages/vfs_prealloc.8	2017-12-22 21:53:58.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_prealloc.8	2018-02-07 09:43:21.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_prealloc
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_PREALLOC" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_PREALLOC" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_preopen.8 samba-4.7.5/docs/manpages/vfs_preopen.8
--- samba-4.7.4/docs/manpages/vfs_preopen.8	2017-12-22 21:53:58.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_preopen.8	2018-02-07 09:43:21.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_preopen
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_PREOPEN" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_PREOPEN" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_readahead.8 samba-4.7.5/docs/manpages/vfs_readahead.8
--- samba-4.7.4/docs/manpages/vfs_readahead.8	2017-12-22 21:53:59.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_readahead.8	2018-02-07 09:43:22.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_readahead
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_READAHEAD" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_READAHEAD" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_readonly.8 samba-4.7.5/docs/manpages/vfs_readonly.8
--- samba-4.7.4/docs/manpages/vfs_readonly.8	2017-12-22 21:53:59.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_readonly.8	2018-02-07 09:43:22.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_readonly
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_READONLY" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_READONLY" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_recycle.8 samba-4.7.5/docs/manpages/vfs_recycle.8
--- samba-4.7.4/docs/manpages/vfs_recycle.8	2017-12-22 21:53:59.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_recycle.8	2018-02-07 09:43:22.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_recycle
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_RECYCLE" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_RECYCLE" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_shadow_copy.8 samba-4.7.5/docs/manpages/vfs_shadow_copy.8
--- samba-4.7.4/docs/manpages/vfs_shadow_copy.8	2017-12-22 21:53:59.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_shadow_copy.8	2018-02-07 09:43:22.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_shadow_copy
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_SHADOW_COPY" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_SHADOW_COPY" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_shadow_copy2.8 samba-4.7.5/docs/manpages/vfs_shadow_copy2.8
--- samba-4.7.4/docs/manpages/vfs_shadow_copy2.8	2017-12-22 21:54:00.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_shadow_copy2.8	2018-02-07 09:43:22.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_shadow_copy2
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_SHADOW_COPY2" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_SHADOW_COPY2" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_shell_snap.8 samba-4.7.5/docs/manpages/vfs_shell_snap.8
--- samba-4.7.4/docs/manpages/vfs_shell_snap.8	2017-12-22 21:54:00.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_shell_snap.8	2018-02-07 09:43:23.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_shell_snap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_SHELL_SNAP" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_SHELL_SNAP" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_snapper.8 samba-4.7.5/docs/manpages/vfs_snapper.8
--- samba-4.7.4/docs/manpages/vfs_snapper.8	2017-12-22 21:54:00.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_snapper.8	2018-02-07 09:43:23.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_snapper
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_SNAPPER" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_SNAPPER" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_streams_depot.8 samba-4.7.5/docs/manpages/vfs_streams_depot.8
--- samba-4.7.4/docs/manpages/vfs_streams_depot.8	2017-12-22 21:54:00.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_streams_depot.8	2018-02-07 09:43:23.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_streams_depot
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_STREAMS_DEPOT" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_STREAMS_DEPOT" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_streams_xattr.8 samba-4.7.5/docs/manpages/vfs_streams_xattr.8
--- samba-4.7.4/docs/manpages/vfs_streams_xattr.8	2017-12-22 21:54:00.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_streams_xattr.8	2018-02-07 09:43:23.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_streams_xattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_STREAMS_XATTR" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_STREAMS_XATTR" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_syncops.8 samba-4.7.5/docs/manpages/vfs_syncops.8
--- samba-4.7.4/docs/manpages/vfs_syncops.8	2017-12-22 21:54:01.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_syncops.8	2018-02-07 09:43:23.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_syncops
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_SYNCOPS" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_SYNCOPS" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_time_audit.8 samba-4.7.5/docs/manpages/vfs_time_audit.8
--- samba-4.7.4/docs/manpages/vfs_time_audit.8	2017-12-22 21:54:01.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_time_audit.8	2018-02-07 09:43:24.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_time_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_TIME_AUDIT" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_TIME_AUDIT" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_tsmsm.8 samba-4.7.5/docs/manpages/vfs_tsmsm.8
--- samba-4.7.4/docs/manpages/vfs_tsmsm.8	2017-12-22 21:54:01.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_tsmsm.8	2018-02-07 09:43:24.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_tsmsm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_TSMSM" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_TSMSM" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_unityed_media.8 samba-4.7.5/docs/manpages/vfs_unityed_media.8
--- samba-4.7.4/docs/manpages/vfs_unityed_media.8	2017-12-22 21:54:01.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_unityed_media.8	2018-02-07 09:43:24.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_unityed_media
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_UNITYED_MEDIA" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_UNITYED_MEDIA" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_worm.8 samba-4.7.5/docs/manpages/vfs_worm.8
--- samba-4.7.4/docs/manpages/vfs_worm.8	2017-12-22 21:54:01.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_worm.8	2018-02-07 09:43:24.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_worm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_WORM" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_WORM" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_xattr_tdb.8 samba-4.7.5/docs/manpages/vfs_xattr_tdb.8
--- samba-4.7.4/docs/manpages/vfs_xattr_tdb.8	2017-12-22 21:54:02.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_xattr_tdb.8	2018-02-07 09:43:25.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_xattr_tdb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_XATTR_TDB" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_XATTR_TDB" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfs_zfsacl.8 samba-4.7.5/docs/manpages/vfs_zfsacl.8
--- samba-4.7.4/docs/manpages/vfs_zfsacl.8	2017-12-22 21:54:02.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfs_zfsacl.8	2018-02-07 09:43:25.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_zfsacl
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFS_ZFSACL" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "VFS_ZFSACL" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/vfstest.1 samba-4.7.5/docs/manpages/vfstest.1
--- samba-4.7.4/docs/manpages/vfstest.1	2017-12-22 21:54:02.000000000 +0100
+++ samba-4.7.5/docs/manpages/vfstest.1	2018-02-07 09:43:25.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfstest
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "VFSTEST" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "VFSTEST" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/wbinfo.1 samba-4.7.5/docs/manpages/wbinfo.1
--- samba-4.7.4/docs/manpages/wbinfo.1	2017-12-22 21:54:02.000000000 +0100
+++ samba-4.7.5/docs/manpages/wbinfo.1	2018-02-07 09:43:25.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: wbinfo
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: User Commands
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "WBINFO" "1" "12/22/2017" "Samba 4\&.7" "User Commands"
+.TH "WBINFO" "1" "02/07/2018" "Samba 4\&.7" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/winbind_krb5_locator.7 samba-4.7.5/docs/manpages/winbind_krb5_locator.7
--- samba-4.7.4/docs/manpages/winbind_krb5_locator.7	2017-12-22 21:54:02.000000000 +0100
+++ samba-4.7.5/docs/manpages/winbind_krb5_locator.7	2018-02-07 09:43:25.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: winbind_krb5_locator
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: 7
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "WINBIND_KRB5_LOCATOR" "7" "12/22/2017" "Samba 4\&.7" "7"
+.TH "WINBIND_KRB5_LOCATOR" "7" "02/07/2018" "Samba 4\&.7" "7"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/docs/manpages/winbindd.8 samba-4.7.5/docs/manpages/winbindd.8
--- samba-4.7.4/docs/manpages/winbindd.8	2017-12-22 21:54:03.000000000 +0100
+++ samba-4.7.5/docs/manpages/winbindd.8	2018-02-07 09:43:26.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: winbindd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/22/2017
+.\"      Date: 02/07/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.7
 .\"  Language: English
 .\"
-.TH "WINBINDD" "8" "12/22/2017" "Samba 4\&.7" "System Administration tools"
+.TH "WINBINDD" "8" "02/07/2018" "Samba 4\&.7" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.7.4/lib/replace/system/nis.h samba-4.7.5/lib/replace/system/nis.h
--- samba-4.7.4/lib/replace/system/nis.h	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.7.5/lib/replace/system/nis.h	2018-02-07 09:37:51.000000000 +0100
@@ -0,0 +1,83 @@
+/*
+   Unix SMB/CIFS implementation.
+
+   nis system include wrappers
+
+   Copyright (C) Andrew Tridgell 2004
+
+     ** NOTE! The following LGPL license applies to the replace
+     ** library. This does NOT imply that all of Samba is released
+     ** under the LGPL
+
+   This library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 3 of the License, or (at your option) any later version.
+
+   This library is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+
+   You should have received a copy of the GNU Lesser General Public
+   License along with this library; if not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef _nis_passwd_h
+#define _nis_passwd_h
+
+#if defined(HAVE_RPC_RPC_H)
+/*
+ * Check for AUTH_ERROR define conflict with rpc/rpc.h in prot.h.
+ */
+#if defined(HAVE_SYS_SECURITY_H) && defined(HAVE_RPC_AUTH_ERROR_CONFLICT)
+#undef AUTH_ERROR
+#endif /* HAVE_SYS_SECURITY_H && HAVE_RPC_AUTH_ERROR_CONFLICT */
+/*
+ * HP-UX 11.X has TCP_NODELAY and TCP_MAXSEG defined in <netinet/tcp.h> which
+ * was included above.  However <rpc/rpc.h> includes <sys/xti.h> which defines
+ * them again without checking if they already exsist.  This generates
+ * two "Redefinition of macro" warnings for every single .c file that is
+ * compiled.
+ */
+#if defined(HPUX) && defined(TCP_NODELAY)
+#undef TCP_NODELAY
+#endif /* HPUX && TCP_NODELAY */
+
+#if defined(HPUX) && defined(TCP_MAXSEG)
+#undef TCP_MAXSEG
+#endif /* HPUX && TCP_MAXSEG */
+
+#include <rpc/rpc.h>
+#endif /* HAVE_RPC_RPC_H */
+
+
+#if defined (HAVE_NETGROUP)
+
+#if defined(HAVE_RPCSVC_YP_PROT_H)
+/*
+ * HP-UX 11.X has TCP_NODELAY and TCP_MAXSEG defined in <netinet/tcp.h> which
+ * was included above.  However <rpc/rpc.h> includes <sys/xti.h> which defines
+ * them again without checking if they already exsist.  This generates
+ * two "Redefinition of macro" warnings for every single .c file that is
+ * compiled.
+ */
+#if defined(HPUX) && defined(TCP_NODELAY)
+#undef TCP_NODELAY
+#endif /* HPUX && TCP_MAXSEG */
+
+#if defined(HPUX) && defined(TCP_MAXSEG)
+#undef TCP_MAXSEG
+#endif /* HPUX && TCP_MAXSEG */
+
+#include <rpcsvc/yp_prot.h>
+
+#endif /* HAVE_RPCSVC_YP_PROT_H */
+
+#if defined(HAVE_RPCSVC_YPCLNT_H)
+#include <rpcsvc/ypclnt.h>
+#endif /* HAVE_RPCSVC_YPCLNT_H */
+
+#endif /* HAVE_NETGROUP */
+
+#endif /* _nis_passwd_h */
diff -Npur samba-4.7.4/lib/replace/wscript samba-4.7.5/lib/replace/wscript
--- samba-4.7.4/lib/replace/wscript	2017-11-02 12:38:36.000000000 +0100
+++ samba-4.7.5/lib/replace/wscript	2018-02-07 09:37:51.000000000 +0100
@@ -5,7 +5,7 @@ VERSION = '1.2.1'
 
 blddir = 'bin'
 
-import sys, os
+import Logs, sys, os
 
 # find the buildtools directory
 srcdir = '.'
@@ -65,14 +65,42 @@ def configure(conf):
                         headers='sys/inotify.h')
 
     conf.CHECK_HEADERS('security/pam_appl.h zlib.h asm/unistd.h')
-    conf.CHECK_HEADERS('aio.h sys/unistd.h rpc/rpc.h rpc/nettype.h alloca.h float.h')
+    conf.CHECK_HEADERS('aio.h sys/unistd.h alloca.h float.h')
 
-    conf.CHECK_HEADERS('rpcsvc/nis.h rpcsvc/ypclnt.h sys/sysctl.h')
+    conf.SET_TARGET_TYPE('tirpc', 'EMPTY')
+    conf.CHECK_HEADERS('rpc/rpc.h rpc/nettype.h')
+    if not conf.CONFIG_SET('HAVE_RPC_RPC_H'):
+        if conf.CHECK_CFG(package='libtirpc', args='--cflags --libs',
+                       msg='Checking for libtirpc headers',
+                       uselib_store='TIRPC'):
+            conf.CHECK_HEADERS('rpc/rpc.h rpc/nettype.h', lib='tirpc', together=True)
+            conf.SET_TARGET_TYPE('tirpc', 'SYSLIB')
+    if not conf.CONFIG_SET('HAVE_RPC_RPC_H'):
+        if conf.CHECK_CFG(package='libntirpc', args='--cflags',
+                       msg='Checking for libntirpc headers',
+                       uselib_store='TIRPC'):
+            conf.CHECK_HEADERS('rpc/rpc.h rpc/nettype.h', lib='tirpc', together=True)
+            conf.SET_TARGET_TYPE('tirpc', 'SYSLIB')
+    if not conf.CONFIG_SET('HAVE_RPC_RPC_H'):
+            Logs.error('ERROR: No rpc/rpc.h header found, tirpc or libntirpc missing?')
+            sys.exit(1)
+
+    conf.SET_TARGET_TYPE('nsl', 'EMPTY')
+    conf.CHECK_HEADERS('rpc/rpc.h rpcsvc/yp_prot.h', lib='tirpc')
+    if not conf.CONFIG_SET('HAVE_RPCSVC_YP_PROT_H'):
+        if conf.CHECK_CFG(package='libnsl', args='--cflags --libs',
+                          msg='Checking for libnsl',
+                          uselib_store='NSL'):
+            conf.SET_TARGET_TYPE('nsl', 'SYSLIB')
+            conf.CHECK_HEADERS('rpc/rpc.h rpcsvc/yp_prot.h', lib='tirpc nsl')
+        else:
+            conf.SET_TARGET_TYPE('nsl', 'SYSLIB')
+    conf.CHECK_HEADERS('rpcsvc/nis.h rpcsvc/ypclnt.h', lib='tirpc nsl')
+
+    conf.CHECK_HEADERS('sys/sysctl.h')
     conf.CHECK_HEADERS('sys/fileio.h sys/filesys.h sys/dustat.h sys/sysmacros.h')
     conf.CHECK_HEADERS('xfs/libxfs.h netgroup.h')
 
-    conf.CHECK_CODE('', headers='rpc/rpc.h rpcsvc/yp_prot.h', define='HAVE_RPCSVC_YP_PROT_H')
-
     conf.CHECK_HEADERS('valgrind.h valgrind/valgrind.h valgrind/memcheck.h')
     conf.CHECK_HEADERS('nss_common.h nsswitch.h ns_api.h')
     conf.CHECK_HEADERS('sys/extattr.h sys/ea.h sys/proplist.h sys/cdefs.h')
diff -Npur samba-4.7.4/lib/util/access.c samba-4.7.5/lib/util/access.c
--- samba-4.7.4/lib/util/access.c	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.5/lib/util/access.c	2018-02-07 09:37:51.000000000 +0100
@@ -22,6 +22,10 @@
 #include "lib/util/access.h"
 #include "lib/util/unix_match.h"
 
+#if defined(HAVE_NETGROUP)
+#include "system/nis.h"
+#endif
+
 #define NAME_INDEX 0
 #define ADDR_INDEX 1
 
@@ -143,11 +147,11 @@ static bool string_match(const char *tok
 
 		netgroup_ok = innetgr(tok + 1, hostname, (char *) 0, mydomain);
 
-		DEBUG(5,("looking for %s of domain %s in netgroup %s gave %s\n",
+		DBG_INFO("%s %s of domain %s in netgroup %s\n",
+			 netgroup_ok ? "Found" : "Could not find",
 			 hostname,
 			 mydomain?mydomain:"(ANY)",
-			 tok+1,
-			 BOOLSTR(netgroup_ok)));
+			 tok+1);
 
 		SAFE_FREE(hostname);
 
diff -Npur samba-4.7.4/lib/util/wscript_build samba-4.7.5/lib/util/wscript_build
--- samba-4.7.4/lib/util/wscript_build	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.5/lib/util/wscript_build	2018-02-07 09:37:51.000000000 +0100
@@ -203,7 +203,7 @@ else:
 
     bld.SAMBA_SUBSYSTEM('access',
                         source='access.c',
-                        deps='interfaces samba-util',
+                        deps='interfaces samba-util tirpc nsl',
                         local_include=False)
 
     bld.SAMBA_SUBSYSTEM('util_str_escape',
diff -Npur samba-4.7.4/python/samba/common.py samba-4.7.5/python/samba/common.py
--- samba-4.7.4/python/samba/common.py	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.5/python/samba/common.py	2018-02-07 09:37:51.000000000 +0100
@@ -19,6 +19,8 @@
 
 import ldb
 import dsdb
+from samba.ndr import ndr_pack
+from samba.dcerpc import misc
 import binascii
 
 
@@ -93,6 +95,21 @@ class dsdb_Dn(object):
     def __str__(self):
         return self.prefix + str(self.dn.extended_str(mode=1))
 
+    def __cmp__(self, other):
+        ''' compare dsdb_Dn values similar to parsed_dn_compare()'''
+        dn1 = self
+        dn2 = other
+        guid1 = dn1.dn.get_extended_component("GUID")
+        guid1b = ndr_pack(misc.GUID(guid1))
+        guid2 = dn2.dn.get_extended_component("GUID")
+        guid2b = ndr_pack(misc.GUID(guid2))
+
+        v = cmp(guid1, guid2)
+        if v != 0:
+            return v
+        v = cmp(dn1.binary, dn2.binary)
+        return v
+
     def get_binary_integer(self):
         '''return binary part of a dsdb_Dn as an integer, or None'''
         if self.prefix == '':
diff -Npur samba-4.7.4/python/samba/dbchecker.py samba-4.7.5/python/samba/dbchecker.py
--- samba-4.7.4/python/samba/dbchecker.py	2017-12-22 21:40:58.000000000 +0100
+++ samba-4.7.5/python/samba/dbchecker.py	2018-02-07 09:37:51.000000000 +0100
@@ -65,7 +65,9 @@ class dbcheck(object):
         self.fix_undead_linked_attributes = False
         self.fix_all_missing_backlinks = False
         self.fix_all_orphaned_backlinks = False
-        self.fix_all_duplicate_links = False
+        self.fix_all_missing_forward_links = False
+        self.duplicate_link_cache = dict()
+        self.recover_all_forward_links = False
         self.fix_rmd_flags = False
         self.fix_ntsecuritydescriptor = False
         self.fix_ntsecuritydescriptor_owner_group = False
@@ -184,6 +186,23 @@ class dbcheck(object):
         else:
             self.rid_set_dn = None
 
+        self.compatibleFeatures = []
+        self.requiredFeatures = []
+
+        try:
+            res = self.samdb.search(scope=ldb.SCOPE_BASE,
+                                    base="@SAMBA_DSDB",
+                                    attrs=["compatibleFeatures",
+                                    "requiredFeatures"])
+            if "compatibleFeatures" in res[0]:
+                self.compatibleFeatures = res[0]["compatibleFeatures"]
+            if "requiredFeatures" in res[0]:
+                self.requiredFeatures = res[0]["requiredFeatures"]
+        except ldb.LdbError as (enum, estr):
+            if enum != ldb.ERR_NO_SUCH_OBJECT:
+                raise
+            pass
+
     def check_database(self, DN=None, scope=ldb.SCOPE_SUBTREE, controls=[], attrs=['*']):
         '''perform a database check, returning the number of errors found'''
         res = self.samdb.search(base=DN, scope=scope, attrs=['dn'], controls=controls)
@@ -708,31 +727,44 @@ newSuperior: %s""" % (str(from_dn), str(
                           "Failed to fix incorrect RMD_FLAGS %u" % rmd_flags):
             self.report("Fixed incorrect RMD_FLAGS %u" % (rmd_flags))
 
-    def err_orphaned_backlink(self, obj, attrname, val, link_name, target_dn):
+    def err_orphaned_backlink(self, obj_dn, backlink_attr, backlink_val,
+                              target_dn, forward_attr, forward_syntax,
+                              check_duplicates=True):
         '''handle a orphaned backlink value'''
-        self.report("ERROR: orphaned backlink attribute '%s' in %s for link %s in %s" % (attrname, obj.dn, link_name, target_dn))
-        if not self.confirm_all('Remove orphaned backlink %s' % attrname, 'fix_all_orphaned_backlinks'):
-            self.report("Not removing orphaned backlink %s" % attrname)
+        if check_duplicates is True and self.has_duplicate_links(target_dn, forward_attr, forward_syntax):
+            self.report("WARNING: Keep orphaned backlink attribute " + \
+                        "'%s' in '%s' for link '%s' in '%s'" % (
+                        backlink_attr, obj_dn, forward_attr, target_dn))
+            return
+        self.report("ERROR: orphaned backlink attribute '%s' in %s for link %s in %s" % (backlink_attr, obj_dn, forward_attr, target_dn))
+        if not self.confirm_all('Remove orphaned backlink %s' % backlink_attr, 'fix_all_orphaned_backlinks'):
+            self.report("Not removing orphaned backlink %s" % backlink_attr)
             return
         m = ldb.Message()
-        m.dn = obj.dn
-        m['value'] = ldb.MessageElement(val, ldb.FLAG_MOD_DELETE, attrname)
+        m.dn = obj_dn
+        m['value'] = ldb.MessageElement(backlink_val, ldb.FLAG_MOD_DELETE, backlink_attr)
         if self.do_modify(m, ["show_recycled:1", "relax:0"],
-                          "Failed to fix orphaned backlink %s" % attrname):
-            self.report("Fixed orphaned backlink %s" % (attrname))
+                          "Failed to fix orphaned backlink %s" % backlink_attr):
+            self.report("Fixed orphaned backlink %s" % (backlink_attr))
 
-    def err_duplicate_links(self, obj, attrname, vals):
+    def err_recover_forward_links(self, obj, forward_attr, forward_vals):
         '''handle a duplicate links value'''
 
-        if not self.confirm_all("Remove duplicate links in attribute '%s'" % attrname, 'fix_all_duplicate_links'):
-            self.report("Not removing duplicate links in attribute '%s'" % attrname)
+        self.report("RECHECK: 'Missing/Duplicate/Correct link' lines above for attribute '%s' in '%s'" % (forward_attr, obj.dn))
+
+        if not self.confirm_all("Commit fixes for (missing/duplicate) forward links in attribute '%s'" % forward_attr, 'recover_all_forward_links'):
+            self.report("Not fixing corrupted (missing/duplicate) forward links in attribute '%s' of '%s'" % (
+                        forward_attr, obj.dn))
             return
         m = ldb.Message()
         m.dn = obj.dn
-        m['value'] = ldb.MessageElement(vals, ldb.FLAG_MOD_REPLACE, attrname)
+        m['value'] = ldb.MessageElement(forward_vals, ldb.FLAG_MOD_REPLACE, forward_attr)
         if self.do_modify(m, ["local_oid:1.3.6.1.4.1.7165.4.3.19.2:1"],
-                "Failed to fix duplicate links in attribute '%s'" % attrname):
-            self.report("Fixed duplicate links in attribute '%s'" % (attrname))
+                "Failed to fix duplicate links in attribute '%s'" % forward_attr):
+            self.report("Fixed duplicate links in attribute '%s'" % (forward_attr))
+            duplicate_cache_key = "%s:%s" % (str(obj.dn), forward_attr)
+            assert duplicate_cache_key in self.duplicate_link_cache
+            self.duplicate_link_cache[duplicate_cache_key] = False
 
     def err_no_fsmoRoleOwner(self, obj):
         '''handle a missing fSMORoleOwner'''
@@ -885,29 +917,27 @@ newSuperior: %s""" % (str(from_dn), str(
                 return dsdb_dn
         return None
 
-    def check_dn(self, obj, attrname, syntax_oid):
-        '''check a DN attribute for correctness'''
+    def check_duplicate_links(self, obj, forward_attr, forward_syntax, forward_linkID, backlink_attr):
+        '''check a linked values for duplicate forward links'''
         error_count = 0
-        obj_guid = obj['objectGUID'][0]
-
-        linkID, reverse_link_name = self.get_attr_linkID_and_reverse_name(attrname)
-        if reverse_link_name is not None:
-            reverse_syntax_oid = self.samdb_schema.get_syntax_oid_from_lDAPDisplayName(reverse_link_name)
-        else:
-            reverse_syntax_oid = None
 
         duplicate_dict = dict()
-        duplicate_list = list()
         unique_dict = dict()
-        unique_list = list()
-        for val in obj[attrname]:
-            if linkID & 1:
-                #
-                # Only cleanup forward links here,
-                # back links are handled below.
-                break
 
-            dsdb_dn = dsdb_Dn(self.samdb, val, syntax_oid)
+        # Only forward links can have this problem
+        if forward_linkID & 1:
+            # If we got the reverse, skip it
+            return (error_count, duplicate_dict, unique_dict)
+
+        if backlink_attr is None:
+            return (error_count, duplicate_dict, unique_dict)
+
+        duplicate_cache_key = "%s:%s" % (str(obj.dn), forward_attr)
+        if duplicate_cache_key not in self.duplicate_link_cache:
+            self.duplicate_link_cache[duplicate_cache_key] = False
+
+        for val in obj[forward_attr]:
+            dsdb_dn = dsdb_Dn(self.samdb, val, forward_syntax)
 
             # all DNs should have a GUID component
             guid = dsdb_dn.dn.get_extended_component("GUID")
@@ -917,14 +947,12 @@ newSuperior: %s""" % (str(from_dn), str(
             keystr = guidstr + dsdb_dn.prefix
             if keystr not in unique_dict:
                 unique_dict[keystr] = dsdb_dn
-                unique_list.append(keystr)
                 continue
             error_count += 1
             if keystr not in duplicate_dict:
                 duplicate_dict[keystr] = dict()
                 duplicate_dict[keystr]["keep"] = None
                 duplicate_dict[keystr]["delete"] = list()
-                duplicate_list.append(keystr)
 
             # Now check for the highest RMD_VERSION
             v1 = int(unique_dict[keystr].dn.get_extended_component("RMD_VERSION"))
@@ -949,21 +977,197 @@ newSuperior: %s""" % (str(from_dn), str(
             duplicate_dict[keystr]["delete"].append(unique_dict[keystr])
             unique_dict[keystr] = dsdb_dn
 
-        if len(duplicate_list) != 0:
-            self.report("ERROR: Duplicate link values for attribute '%s' in '%s'" % (attrname, obj.dn))
-            for keystr in duplicate_list:
+        if error_count != 0:
+            self.duplicate_link_cache[duplicate_cache_key] = True
+
+        return (error_count, duplicate_dict, unique_dict)
+
+    def has_duplicate_links(self, dn, forward_attr, forward_syntax):
+        '''check a linked values for duplicate forward links'''
+        error_count = 0
+
+        duplicate_cache_key = "%s:%s" % (str(dn), forward_attr)
+        if duplicate_cache_key in self.duplicate_link_cache:
+            return self.duplicate_link_cache[duplicate_cache_key]
+
+        forward_linkID, backlink_attr = self.get_attr_linkID_and_reverse_name(forward_attr)
+
+        attrs = [forward_attr]
+        controls = ["extended_dn:1:1", "reveal_internals:0"]
+
+        # check its the right GUID
+        try:
+            res = self.samdb.search(base=str(dn), scope=ldb.SCOPE_BASE,
+                                    attrs=attrs, controls=controls)
+        except ldb.LdbError, (enum, estr):
+            if enum != ldb.ERR_NO_SUCH_OBJECT:
+                raise
+
+            return False
+
+        obj = res[0]
+        error_count, duplicate_dict, unique_dict = \
+            self.check_duplicate_links(obj, forward_attr, forward_syntax, forward_linkID, backlink_attr)
+
+        if duplicate_cache_key in self.duplicate_link_cache:
+            return self.duplicate_link_cache[duplicate_cache_key]
+
+        return False
+
+    def find_missing_forward_links_from_backlinks(self, obj,
+                                                  forward_attr,
+                                                  forward_syntax,
+                                                  backlink_attr,
+                                                  forward_unique_dict):
+        '''Find all backlinks linking to obj_guid_str not already in forward_unique_dict'''
+        missing_forward_links = []
+        error_count = 0
+
+        if backlink_attr is None:
+            return (missing_forward_links, error_count)
+
+        if forward_syntax != ldb.SYNTAX_DN:
+            self.report("Not checking for missing forward links for syntax: %s",
+                        forward_syntax)
+            return (missing_forward_links, error_count)
+
+        if "sortedLinks" in self.compatibleFeatures:
+            self.report("Not checking for missing forward links because the db " + \
+                        "has the sortedLinks feature")
+            return (missing_forward_links, error_count)
+
+        try:
+            obj_guid = obj['objectGUID'][0]
+            obj_guid_str = str(ndr_unpack(misc.GUID, obj_guid))
+            filter = "(%s=<GUID=%s>)" % (backlink_attr, obj_guid_str)
+
+            res = self.samdb.search(expression=filter,
+                                    scope=ldb.SCOPE_SUBTREE, attrs=["objectGUID"],
+                                    controls=["extended_dn:1:1",
+                                              "search_options:1:2",
+                                              "paged_results:1:1000"])
+        except ldb.LdbError, (enum, estr):
+            raise
+
+        for r in res:
+            target_dn = dsdb_Dn(self.samdb, r.dn.extended_str(), forward_syntax)
+
+            guid = target_dn.dn.get_extended_component("GUID")
+            guidstr = str(misc.GUID(guid))
+            if guidstr in forward_unique_dict:
+                continue
+
+            # A valid forward link looks like this:
+            #
+            #    <GUID=9f92d30a-fc23-11e4-a5f6-30be15454808>;
+            #    <RMD_ADDTIME=131607546230000000>;
+            #    <RMD_CHANGETIME=131607546230000000>;
+            #    <RMD_FLAGS=0>;
+            #    <RMD_INVOCID=4e4496a3-7fb8-4f97-8a33-d238db8b5e2d>;
+            #    <RMD_LOCAL_USN=3765>;
+            #    <RMD_ORIGINATING_USN=3765>;
+            #    <RMD_VERSION=1>;
+            #    <SID=S-1-5-21-4177067393-1453636373-93818738-1124>;
+            #    CN=unsorted-u8,CN=Users,DC=release-4-5-0-pre1,DC=samba,DC=corp
+            #
+            # Note that versions older than Samba 4.8 create
+            # links with RMD_VERSION=0.
+            #
+            # Try to get the local_usn and time from objectClass
+            # if possible and fallback to any other one.
+            repl = ndr_unpack(drsblobs.replPropertyMetaDataBlob,
+                              obj['replPropertyMetadata'][0])
+            for o in repl.ctr.array:
+                local_usn = o.local_usn
+                t = o.originating_change_time
+                if o.attid == drsuapi.DRSUAPI_ATTID_objectClass:
+                    break
+
+            # We use a magic invocationID for restoring missing
+            # forward links to recover from bug #13228.
+            # This should allow some more future magic to fix the
+            # problem.
+            #
+            # It also means it looses the conflict resolution
+            # against almost every real invocation, if the
+            # version is also 0.
+            originating_invocid = misc.GUID("ffffffff-4700-4700-4700-000000b13228")
+            originating_usn = 1
+
+            rmd_addtime = t
+            rmd_changetime = t
+            rmd_flags = 0
+            rmd_invocid = originating_invocid
+            rmd_originating_usn = originating_usn
+            rmd_local_usn = local_usn
+            rmd_version = 0
+
+            target_dn.dn.set_extended_component("RMD_ADDTIME", str(rmd_addtime))
+            target_dn.dn.set_extended_component("RMD_CHANGETIME", str(rmd_changetime))
+            target_dn.dn.set_extended_component("RMD_FLAGS", str(rmd_flags))
+            target_dn.dn.set_extended_component("RMD_INVOCID", ndr_pack(rmd_invocid))
+            target_dn.dn.set_extended_component("RMD_ORIGINATING_USN", str(rmd_originating_usn))
+            target_dn.dn.set_extended_component("RMD_LOCAL_USN", str(rmd_local_usn))
+            target_dn.dn.set_extended_component("RMD_VERSION", str(rmd_version))
+
+            error_count += 1
+            missing_forward_links.append(target_dn)
+
+        return (missing_forward_links, error_count)
+
+    def check_dn(self, obj, attrname, syntax_oid):
+        '''check a DN attribute for correctness'''
+        error_count = 0
+        obj_guid = obj['objectGUID'][0]
+
+        linkID, reverse_link_name = self.get_attr_linkID_and_reverse_name(attrname)
+        if reverse_link_name is not None:
+            reverse_syntax_oid = self.samdb_schema.get_syntax_oid_from_lDAPDisplayName(reverse_link_name)
+        else:
+            reverse_syntax_oid = None
+
+        error_count, duplicate_dict, unique_dict = \
+            self.check_duplicate_links(obj, attrname, syntax_oid, linkID, reverse_link_name)
+
+        if len(duplicate_dict) != 0:
+
+            missing_forward_links, missing_error_count = \
+                self.find_missing_forward_links_from_backlinks(obj,
+                                                         attrname, syntax_oid,
+                                                         reverse_link_name,
+                                                         unique_dict)
+            error_count += missing_error_count
+
+            forward_links = [dn for dn in unique_dict.values()]
+
+            if missing_error_count != 0:
+                self.report("ERROR: Missing and duplicate forward link values for attribute '%s' in '%s'" % (
+                            attrname, obj.dn))
+            else:
+                self.report("ERROR: Duplicate forward link values for attribute '%s' in '%s'" % (attrname, obj.dn))
+            for m in missing_forward_links:
+                self.report("Missing   link '%s'" % (m))
+                if not self.confirm_all("Schedule readding missing forward link for attribute %s" % attrname,
+                                        'fix_all_missing_forward_links'):
+                    self.err_orphaned_backlink(m.dn, reverse_link_name,
+                                               obj.dn.extended_str(), obj.dn,
+                                               attrname, syntax_oid,
+                                               check_duplicates=False)
+                    continue
+                forward_links += [m]
+            for keystr in duplicate_dict.keys():
                 d = duplicate_dict[keystr]
                 for dd in d["delete"]:
                     self.report("Duplicate link '%s'" % dd)
                 self.report("Correct   link '%s'" % d["keep"])
 
-            vals = []
-            for keystr in unique_list:
-                dsdb_dn = unique_dict[keystr]
-                vals.append(str(dsdb_dn))
-            self.err_duplicate_links(obj, attrname, vals)
+            # We now construct the sorted dn values.
+            # They're sorted by the objectGUID of the target
+            # See dsdb_Dn.__cmp__()
+            vals = [str(dn) for dn in sorted(forward_links)]
+            self.err_recover_forward_links(obj, attrname, vals)
             # We should continue with the fixed values
-            obj[attrname] = ldb.MessageElement(vals, ldb.FLAG_MOD_REPLACE, attrname)
+            obj[attrname] = ldb.MessageElement(vals, 0, attrname)
 
         for val in obj[attrname]:
             dsdb_dn = dsdb_Dn(self.samdb, val, syntax_oid)
@@ -1146,9 +1350,10 @@ newSuperior: %s""" % (str(from_dn), str(
                 # UNLESS, there is no forward link detected.
                 if match_count == 0:
                     error_count += 1
-                    self.err_orphaned_backlink(obj, attrname,
-                                               val, reverse_link_name,
-                                               dsdb_dn.dn)
+                    self.err_orphaned_backlink(obj.dn, attrname,
+                                               val, dsdb_dn.dn,
+                                               reverse_link_name,
+                                               reverse_syntax_oid)
                     continue
                 # Only warn here and let the forward link logic fix it.
                 self.report("WARNING: Link (back) mismatch for '%s' (%d) on '%s' to '%s' (%d) on '%s'" % (
@@ -1178,9 +1383,9 @@ newSuperior: %s""" % (str(from_dn), str(
                                               dsdb_dn.dn)
                     diff_count -= 1
                 else:
-                    self.err_orphaned_backlink(res[0], reverse_link_name,
-                                               obj.dn.extended_str(), attrname,
-                                               obj.dn)
+                    self.err_orphaned_backlink(res[0].dn, reverse_link_name,
+                                               obj.dn.extended_str(), obj.dn,
+                                               attrname, syntax_oid)
                     diff_count += 1
 
 
@@ -1758,10 +1963,21 @@ newSuperior: %s""" % (str(from_dn), str(
             attrs.append(dn.get_rdn_name())
             attrs.append("isDeleted")
             attrs.append("systemFlags")
+        need_replPropertyMetaData = False
         if '*' in attrs:
-            attrs.append("replPropertyMetaData")
+            need_replPropertyMetaData = True
         else:
-            attrs.append("objectGUID")
+            for a in attrs:
+                linkID, _ = self.get_attr_linkID_and_reverse_name(a)
+                if linkID == 0:
+                    continue
+                if linkID & 1:
+                    continue
+                need_replPropertyMetaData = True
+                break
+        if need_replPropertyMetaData:
+            attrs.append("replPropertyMetaData")
+        attrs.append("objectGUID")
 
         try:
             sd_flags = 0
diff -Npur samba-4.7.4/python/samba/tests/common.py samba-4.7.5/python/samba/tests/common.py
--- samba-4.7.4/python/samba/tests/common.py	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.5/python/samba/tests/common.py	2018-02-07 09:37:51.000000000 +0100
@@ -23,7 +23,7 @@ from samba.common import *
 from samba.samdb import SamDB
 
 
-class CommonTests(samba.tests.TestCase):
+class CommonTests(samba.tests.TestCaseInTempDir):
 
     def test_normalise_int32(self):
         self.assertEquals('17', normalise_int32(17))
@@ -31,10 +31,35 @@ class CommonTests(samba.tests.TestCase):
         self.assertEquals('-123', normalise_int32('-123'))
         self.assertEquals('-1294967296', normalise_int32('3000000000'))
 
-    def test_dsdb_Dn(self):
-        sam = samba.Ldb(url='dntest.ldb')
+    def test_dsdb_Dn_binary(self):
+        url = self.tempdir + "/test_dsdb_Dn_binary.ldb"
+        sam = samba.Ldb(url=url)
         dn1 = dsdb_Dn(sam, "DC=foo,DC=bar")
         dn2 = dsdb_Dn(sam, "B:8:0000000D:<GUID=b3f0ec29-17f4-452a-b002-963e1909d101>;DC=samba,DC=example,DC=com")
         self.assertEquals(dn2.binary, "0000000D")
         self.assertEquals(13, dn2.get_binary_integer())
-        os.unlink('dntest.ldb')
+        os.unlink(url)
+
+    def test_dsdb_Dn_sorted(self):
+        url = self.tempdir + "/test_dsdb_Dn_sorted.ldb"
+        sam = samba.Ldb(url=url)
+        try:
+            dn1 = dsdb_Dn(sam, "B:8:0000000D:<GUID=b3f0ec29-17f4-452a-b002-963e1909d101>;OU=dn1,DC=samba,DC=example,DC=com")
+            dn2 = dsdb_Dn(sam, "B:8:0000000C:<GUID=b3f0ec29-17f4-452a-b002-963e1909d101>;OU=dn1,DC=samba,DC=example,DC=com")
+            dn3 = dsdb_Dn(sam, "B:8:0000000F:<GUID=00000000-17f4-452a-b002-963e1909d101>;OU=dn3,DC=samba,DC=example,DC=com")
+            dn4 = dsdb_Dn(sam, "B:8:00000000:<GUID=ffffffff-17f4-452a-b002-963e1909d101>;OU=dn4,DC=samba,DC=example,DC=com")
+            dn5 = dsdb_Dn(sam, "<GUID=ffffffff-27f4-452a-b002-963e1909d101>;OU=dn5,DC=samba,DC=example,DC=com")
+            dn6 = dsdb_Dn(sam, "<GUID=00000000-27f4-452a-b002-963e1909d101>;OU=dn6,DC=samba,DC=example,DC=com")
+            unsorted_links14 = [dn1,dn2,dn3,dn4]
+            sorted_vals14 = [str(dn) for dn in sorted(unsorted_links14)]
+            self.assertEquals(sorted_vals14[0], str(dn3))
+            self.assertEquals(sorted_vals14[1], str(dn2))
+            self.assertEquals(sorted_vals14[2], str(dn1))
+            self.assertEquals(sorted_vals14[3], str(dn4))
+            unsorted_links56 = [dn5,dn6]
+            sorted_vals56 = [str(dn) for dn in sorted(unsorted_links56)]
+            self.assertEquals(sorted_vals56[0], str(dn6))
+            self.assertEquals(sorted_vals56[1], str(dn5))
+        finally:
+            del sam
+            os.unlink(url)
diff -Npur samba-4.7.4/selftest/selftest.pl samba-4.7.5/selftest/selftest.pl
--- samba-4.7.4/selftest/selftest.pl	2017-08-15 09:16:59.000000000 +0200
+++ samba-4.7.5/selftest/selftest.pl	2018-02-07 09:37:51.000000000 +0100
@@ -441,8 +441,8 @@ if ($opt_testenv) {
     # 1 year should be enough :-)
     $server_maxtime = 365 * 24 * 60 * 60;
 } else {
-    # make test should run under 4 hours
-    $server_maxtime = 4 * 60 * 60;
+    # make test should run under 5 hours
+    $server_maxtime = 5 * 60 * 60;
 }
 
 if (defined($ENV{SMBD_MAXTIME}) and $ENV{SMBD_MAXTIME} ne "") {
@@ -870,6 +870,7 @@ my @exported_envvars = (
 	"RESOLV_CONF",
 	"UNACCEPTABLE_PASSWORD",
 	"LOCK_DIR",
+	"SMBD_TEST_LOG",
 
 	# nss_wrapper
 	"NSS_WRAPPER_PASSWD",
diff -Npur samba-4.7.4/selftest/target/Samba3.pm samba-4.7.5/selftest/target/Samba3.pm
--- samba-4.7.4/selftest/target/Samba3.pm	2017-12-22 21:40:58.000000000 +0100
+++ samba-4.7.5/selftest/target/Samba3.pm	2018-02-07 09:37:51.000000000 +0100
@@ -2033,6 +2033,10 @@ sub provision($$$$$$$$$)
 [compound_find]
 	copy = tmp
 	smbd:find async delay usec = 10000
+[error_inject]
+	copy = tmp
+	vfs objects = error_inject
+	include = $libdir/error_inject.conf
 	";
 	close(CONF);
 
diff -Npur samba-4.7.4/source3/auth/user_util.c samba-4.7.5/source3/auth/user_util.c
--- samba-4.7.4/source3/auth/user_util.c	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.5/source3/auth/user_util.c	2018-02-07 09:37:51.000000000 +0100
@@ -23,6 +23,19 @@
 #include "system/filesys.h"
 #include "auth.h"
 
+#ifdef HAVE_NETGROUP
+/* rpc/xdr.h uses TRUE and FALSE */
+#ifdef TRUE
+#undef TRUE
+#endif
+
+#ifdef FALSE
+#undef FALSE
+#endif
+
+#include "system/nis.h"
+#endif
+
 /*******************************************************************
  Map a username from a dos name to a unix name by looking in the username
  map. Note that this modifies the name in place.
diff -Npur samba-4.7.4/source3/auth/wscript_build samba-4.7.5/source3/auth/wscript_build
--- samba-4.7.4/source3/auth/wscript_build	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.5/source3/auth/wscript_build	2018-02-07 09:37:51.000000000 +0100
@@ -6,7 +6,7 @@ bld.SAMBA3_SUBSYSTEM('TOKEN_UTIL',
 
 bld.SAMBA3_SUBSYSTEM('USER_UTIL',
                      source='user_util.c',
-                     deps='TOKEN_UTIL')
+                     deps='TOKEN_UTIL tirpc nsl')
 
 bld.SAMBA3_SUBSYSTEM('AUTH_COMMON',
                     source='''auth_util.c
diff -Npur samba-4.7.4/source3/include/includes.h samba-4.7.5/source3/include/includes.h
--- samba-4.7.4/source3/include/includes.h	2017-08-29 06:12:36.000000000 +0200
+++ samba-4.7.5/source3/include/includes.h	2018-02-07 09:37:51.000000000 +0100
@@ -68,55 +68,6 @@
 #include "system/time.h"
 #include "system/wait.h"
 
-#if defined(HAVE_RPC_RPC_H)
-/*
- * Check for AUTH_ERROR define conflict with rpc/rpc.h in prot.h.
- */
-#if defined(HAVE_SYS_SECURITY_H) && defined(HAVE_RPC_AUTH_ERROR_CONFLICT)
-#undef AUTH_ERROR
-#endif
-/*
- * HP-UX 11.X has TCP_NODELAY and TCP_MAXSEG defined in <netinet/tcp.h> which
- * was included above.  However <rpc/rpc.h> includes <sys/xti.h> which defines
- * them again without checking if they already exsist.  This generates
- * two "Redefinition of macro" warnings for every single .c file that is
- * compiled.
- */
-#if defined(HPUX) && defined(TCP_NODELAY)
-#undef TCP_NODELAY
-#endif
-#if defined(HPUX) && defined(TCP_MAXSEG)
-#undef TCP_MAXSEG
-#endif
-#include <rpc/rpc.h>
-#endif
-
-#if defined(HAVE_YP_GET_DEFAULT_DOMAIN) && defined(HAVE_SETNETGRENT) && defined(HAVE_ENDNETGRENT) && defined(HAVE_GETNETGRENT)
-#define HAVE_NETGROUP 1
-#endif
-
-#if defined (HAVE_NETGROUP)
-#if defined(HAVE_RPCSVC_YP_PROT_H)
-/*
- * HP-UX 11.X has TCP_NODELAY and TCP_MAXSEG defined in <netinet/tcp.h> which
- * was included above.  However <rpc/rpc.h> includes <sys/xti.h> which defines
- * them again without checking if they already exsist.  This generates
- * two "Redefinition of macro" warnings for every single .c file that is
- * compiled.
- */
-#if defined(HPUX) && defined(TCP_NODELAY)
-#undef TCP_NODELAY
-#endif
-#if defined(HPUX) && defined(TCP_MAXSEG)
-#undef TCP_MAXSEG
-#endif
-#include <rpcsvc/yp_prot.h>
-#endif
-#if defined(HAVE_RPCSVC_YPCLNT_H)
-#include <rpcsvc/ypclnt.h>
-#endif
-#endif /* HAVE_NETGROUP */
-
 #ifndef HAVE_KRB5_H
 #undef HAVE_KRB5
 #endif
diff -Npur samba-4.7.4/source3/include/smb_acls.h samba-4.7.5/source3/include/smb_acls.h
--- samba-4.7.4/source3/include/smb_acls.h	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.5/source3/include/smb_acls.h	2018-02-07 09:37:51.000000000 +0100
@@ -27,8 +27,14 @@ struct files_struct;
 struct smb_filename;
 
 typedef int			SMB_ACL_TYPE_T;
-typedef mode_t			*SMB_ACL_PERMSET_T;
-typedef mode_t			SMB_ACL_PERM_T;
+/*
+ * struct smb_acl_entry is defined in IDL as
+ * using mode_t values, pidl always converts these
+ * to uint32_t. Ensure the external type definitions
+ * match.
+ */
+typedef uint32_t		*SMB_ACL_PERMSET_T;
+typedef uint32_t		SMB_ACL_PERM_T;
 
 typedef enum smb_acl_tag_t SMB_ACL_TAG_T;
 typedef struct smb_acl_t *SMB_ACL_T;
diff -Npur samba-4.7.4/source3/lib/sysquotas_nfs.c samba-4.7.5/source3/lib/sysquotas_nfs.c
--- samba-4.7.4/source3/lib/sysquotas_nfs.c	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.5/source3/lib/sysquotas_nfs.c	2018-02-07 09:37:51.000000000 +0100
@@ -36,13 +36,22 @@
  * This is based on the FreeBSD / SUNOS5 section of quotas.c
  */
 
+/* <rpc/xdr.h> uses TRUE and FALSE */
+#ifdef TRUE
+#undef TRUE
+#endif
+
+#ifdef FALSE
+#undef FALSE
+#endif
+
 #include <rpc/rpc.h>
 #include <rpc/types.h>
+#include <rpc/xdr.h>
 #include <rpcsvc/rquota.h>
 #ifdef HAVE_RPC_NETTYPE_H
 #include <rpc/nettype.h>
 #endif
-#include <rpc/xdr.h>
 
 #ifndef RQ_PATHLEN
 #define RQ_PATHLEN 1024
diff -Npur samba-4.7.4/source3/lib/util.c samba-4.7.5/source3/lib/util.c
--- samba-4.7.4/source3/lib/util.c	2017-07-04 12:05:25.000000000 +0200
+++ samba-4.7.5/source3/lib/util.c	2018-02-07 09:37:51.000000000 +0100
@@ -45,6 +45,17 @@
 #define MAX_ALLOC_SIZE (1024*1024*256)
 
 #if (defined(HAVE_NETGROUP) && defined (WITH_AUTOMOUNT))
+/* rpc/xdr.h uses TRUE and FALSE */
+#ifdef TRUE
+#undef TRUE
+#endif
+
+#ifdef FALSE
+#undef FALSE
+#endif
+
+#include "system/nis.h"
+
 #ifdef WITH_NISPLUS_HOME
 #ifdef BROKEN_NISPLUS_INCLUDE_FILES
 /*
diff -Npur samba-4.7.4/source3/modules/vfs_ceph.c samba-4.7.5/source3/modules/vfs_ceph.c
--- samba-4.7.4/source3/modules/vfs_ceph.c	2017-08-15 09:16:59.000000000 +0200
+++ samba-4.7.5/source3/modules/vfs_ceph.c	2018-02-07 09:37:51.000000000 +0100
@@ -270,6 +270,20 @@ static int cephwrap_statvfs(struct vfs_h
 	return ret;
 }
 
+static uint32_t cephwrap_fs_capabilities(struct vfs_handle_struct *handle,
+					 enum timestamp_set_resolution *p_ts_res)
+{
+	uint32_t caps = FILE_CASE_SENSITIVE_SEARCH | FILE_CASE_PRESERVED_NAMES;
+
+#ifdef HAVE_CEPH_STATX
+	*p_ts_res = TIMESTAMP_SET_NT_OR_BETTER;
+#else
+	*p_ts_res = TIMESTAMP_SET_MSEC;
+#endif
+
+	return caps;
+}
+
 /* Directory operations */
 
 static DIR *cephwrap_opendir(struct vfs_handle_struct *handle,
@@ -1399,6 +1413,7 @@ static struct vfs_fn_pointers ceph_fns =
 	.get_quota_fn = cephwrap_get_quota,
 	.set_quota_fn = cephwrap_set_quota,
 	.statvfs_fn = cephwrap_statvfs,
+	.fs_capabilities_fn = cephwrap_fs_capabilities,
 
 	/* Directory operations */
 
diff -Npur samba-4.7.4/source3/modules/vfs_default.c samba-4.7.5/source3/modules/vfs_default.c
--- samba-4.7.4/source3/modules/vfs_default.c	2017-11-02 12:38:36.000000000 +0100
+++ samba-4.7.5/source3/modules/vfs_default.c	2018-02-07 09:37:51.000000000 +0100
@@ -129,8 +129,14 @@ static uint32_t vfswrap_fs_capabilities(
 	struct vfs_statvfs_struct statbuf;
 	int ret;
 
+	smb_fname_cpath = synthetic_smb_fname(talloc_tos(), conn->connectpath,
+					      NULL, NULL, 0);
+	if (smb_fname_cpath == NULL) {
+		return caps;
+	}
+
 	ZERO_STRUCT(statbuf);
-	ret = sys_statvfs(conn->connectpath, &statbuf);
+	ret = SMB_VFS_STATVFS(conn, smb_fname_cpath, &statbuf);
 	if (ret == 0) {
 		caps = statbuf.FsCapabilities;
 	}
@@ -140,12 +146,6 @@ static uint32_t vfswrap_fs_capabilities(
 	/* Work out what timestamp resolution we can
 	 * use when setting a timestamp. */
 
-	smb_fname_cpath = synthetic_smb_fname(talloc_tos(), conn->connectpath,
-					      NULL, NULL, 0);
-	if (smb_fname_cpath == NULL) {
-		return caps;
-	}
-
 	ret = SMB_VFS_STAT(conn, smb_fname_cpath);
 	if (ret == -1) {
 		TALLOC_FREE(smb_fname_cpath);
diff -Npur samba-4.7.4/source3/modules/vfs_error_inject.c samba-4.7.5/source3/modules/vfs_error_inject.c
--- samba-4.7.4/source3/modules/vfs_error_inject.c	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.7.5/source3/modules/vfs_error_inject.c	2018-02-07 09:37:51.000000000 +0100
@@ -0,0 +1,100 @@
+/*
+ *  Unix SMB/CIFS implementation.
+ *  Samba VFS module for error injection in VFS calls
+ *  Copyright (C) Christof Schmitt 2017
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 3 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, see <http://www.gnu.org/licenses/>.
+ */
+
+#include "includes.h"
+#include "smbd/smbd.h"
+
+#undef DBGC_CLASS
+#define DBGC_CLASS DBGC_VFS
+
+struct unix_error_map {
+	const char *err_str;
+	int error;
+} unix_error_map_array[] = {
+	{	"ESTALE",	ESTALE	},
+};
+
+static int find_unix_error_from_string(const char *err_str)
+{
+	int i;
+
+	for (i = 0; i < ARRAY_SIZE(unix_error_map_array); i++) {
+		struct unix_error_map *m = &unix_error_map_array[i];
+
+		if (strequal(err_str, m->err_str)) {
+			return m->error;
+		}
+	}
+
+	return 0;
+}
+
+static int inject_unix_error(const char *vfs_func, vfs_handle_struct *handle)
+{
+	const char *err_str;
+
+	err_str = lp_parm_const_string(SNUM(handle->conn),
+				       "error_inject", vfs_func, NULL);
+
+	if (err_str != NULL) {
+		int error;
+
+		error = find_unix_error_from_string(err_str);
+		if (error != 0) {
+			DBG_WARNING("Returning error %s for VFS function %s\n",
+				    err_str, vfs_func);
+			return error;
+		}
+
+		if (strequal(err_str, "panic")) {
+			DBG_ERR("Panic in VFS function %s\n", vfs_func);
+			smb_panic("error_inject");
+		}
+
+		DBG_ERR("Unknown error inject %s requested "
+			"for vfs function %s\n", err_str, vfs_func);
+	}
+
+	return 0;
+}
+
+static int vfs_error_inject_chdir(vfs_handle_struct *handle,
+				  const struct smb_filename *smb_fname)
+{
+	int error;
+
+	error = inject_unix_error("chdir", handle);
+	if (error != 0) {
+		errno = error;
+		return -1;
+	}
+
+	return SMB_VFS_NEXT_CHDIR(handle, smb_fname);
+}
+
+static struct vfs_fn_pointers vfs_error_inject_fns = {
+	.chdir_fn = vfs_error_inject_chdir,
+};
+
+static_decl_vfs;
+NTSTATUS vfs_error_inject_init(TALLOC_CTX *ctx)
+{
+	return smb_register_vfs(SMB_VFS_INTERFACE_VERSION, "error_inject",
+				&vfs_error_inject_fns);
+}
diff -Npur samba-4.7.4/source3/modules/vfs_fruit.c samba-4.7.5/source3/modules/vfs_fruit.c
--- samba-4.7.4/source3/modules/vfs_fruit.c	2017-12-22 21:40:58.000000000 +0100
+++ samba-4.7.5/source3/modules/vfs_fruit.c	2018-02-07 09:37:51.000000000 +0100
@@ -4134,26 +4134,35 @@ static ssize_t fruit_pwrite_meta_stream(
 					size_t n, off_t offset)
 {
 	AfpInfo *ai = NULL;
-	int ret;
+	size_t nwritten;
+	bool ok;
 
 	ai = afpinfo_unpack(talloc_tos(), data);
 	if (ai == NULL) {
 		return -1;
 	}
 
-	if (ai_empty_finderinfo(ai)) {
-		ret = SMB_VFS_NEXT_UNLINK(handle, fsp->fsp_name);
-		if (ret != 0 && errno != ENOENT && errno != ENOATTR) {
-			DBG_ERR("Can't delete metadata for %s: %s\n",
-				fsp_str_dbg(fsp), strerror(errno));
-			TALLOC_FREE(ai);
-			return -1;
-		}
+	nwritten = SMB_VFS_NEXT_PWRITE(handle, fsp, data, n, offset);
+	if (nwritten != n) {
+		return -1;
+	}
 
+	if (!ai_empty_finderinfo(ai)) {
 		return n;
 	}
 
-	return SMB_VFS_NEXT_PWRITE(handle, fsp, data, n, offset);
+	ok = set_delete_on_close(
+			fsp,
+			true,
+			handle->conn->session_info->security_token,
+			handle->conn->session_info->unix_token);
+	if (!ok) {
+		DBG_ERR("set_delete_on_close on [%s] failed\n",
+			fsp_str_dbg(fsp));
+		return -1;
+	}
+
+	return n;
 }
 
 static ssize_t fruit_pwrite_meta_netatalk(vfs_handle_struct *handle,
@@ -4164,26 +4173,13 @@ static ssize_t fruit_pwrite_meta_netatal
 	AfpInfo *ai = NULL;
 	char *p = NULL;
 	int ret;
+	bool ok;
 
 	ai = afpinfo_unpack(talloc_tos(), data);
 	if (ai == NULL) {
 		return -1;
 	}
 
-	if (ai_empty_finderinfo(ai)) {
-		ret = SMB_VFS_REMOVEXATTR(handle->conn,
-					  fsp->fsp_name,
-					  AFPINFO_EA_NETATALK);
-
-		if (ret != 0 && errno != ENOENT && errno != ENOATTR) {
-			DBG_ERR("Can't delete metadata for %s: %s\n",
-				fsp_str_dbg(fsp), strerror(errno));
-			return -1;
-		}
-
-		return n;
-	}
-
 	ad = ad_fget(talloc_tos(), handle, fsp, ADOUBLE_META);
 	if (ad == NULL) {
 		ad = ad_init(talloc_tos(), handle, ADOUBLE_META);
@@ -4208,6 +4204,22 @@ static ssize_t fruit_pwrite_meta_netatal
 	}
 
 	TALLOC_FREE(ad);
+
+	if (!ai_empty_finderinfo(ai)) {
+		return n;
+	}
+
+	ok = set_delete_on_close(
+		fsp,
+		true,
+		handle->conn->session_info->security_token,
+		handle->conn->session_info->unix_token);
+	if (!ok) {
+		DBG_ERR("set_delete_on_close on [%s] failed\n",
+			fsp_str_dbg(fsp));
+		return -1;
+	}
+
 	return n;
 }
 
@@ -4864,6 +4876,40 @@ static int fruit_fstat(vfs_handle_struct
 	return rc;
 }
 
+static NTSTATUS delete_invalid_meta_stream(
+	vfs_handle_struct *handle,
+	const struct smb_filename *smb_fname,
+	TALLOC_CTX *mem_ctx,
+	unsigned int *pnum_streams,
+	struct stream_struct **pstreams)
+{
+	struct smb_filename *sname = NULL;
+	int ret;
+	bool ok;
+
+	ok = del_fruit_stream(mem_ctx, pnum_streams, pstreams, AFPINFO_STREAM);
+	if (!ok) {
+		return NT_STATUS_INTERNAL_ERROR;
+	}
+
+	sname = synthetic_smb_fname(talloc_tos(),
+				    smb_fname->base_name,
+				    AFPINFO_STREAM_NAME,
+				    NULL, 0);
+	if (sname == NULL) {
+		return NT_STATUS_NO_MEMORY;
+	}
+
+	ret = SMB_VFS_NEXT_UNLINK(handle, sname);
+	TALLOC_FREE(sname);
+	if (ret != 0) {
+		DBG_ERR("Removing [%s] failed\n", smb_fname_str_dbg(sname));
+		return map_nt_error_from_unix(errno);
+	}
+
+	return NT_STATUS_OK;
+}
+
 static NTSTATUS fruit_streaminfo_meta_stream(
 	vfs_handle_struct *handle,
 	struct files_struct *fsp,
@@ -4875,8 +4921,14 @@ static NTSTATUS fruit_streaminfo_meta_st
 	struct stream_struct *stream = *pstreams;
 	unsigned int num_streams = *pnum_streams;
 	struct smb_filename *sname = NULL;
+	char *full_name = NULL;
+	uint32_t name_hash;
+	struct share_mode_lock *lck = NULL;
+	struct file_id id = {0};
+	bool delete_on_close_set;
 	int i;
 	int ret;
+	NTSTATUS status;
 	bool ok;
 
 	for (i = 0; i < num_streams; i++) {
@@ -4889,35 +4941,76 @@ static NTSTATUS fruit_streaminfo_meta_st
 		return NT_STATUS_OK;
 	}
 
-	if (stream[i].size == AFP_INFO_SIZE) {
-		return NT_STATUS_OK;
-	}
-
-	DBG_ERR("Removing invalid AFPINFO_STREAM size [%"PRIdMAX"] "
-		"from [%s]\n", (intmax_t)stream[i].size,
-		smb_fname_str_dbg(smb_fname));
+	if (stream[i].size != AFP_INFO_SIZE) {
+		DBG_ERR("Removing invalid AFPINFO_STREAM size [%jd] from [%s]\n",
+			(intmax_t)stream[i].size, smb_fname_str_dbg(smb_fname));
 
-	ok = del_fruit_stream(mem_ctx, pnum_streams, pstreams, AFPINFO_STREAM);
-	if (!ok) {
-		return NT_STATUS_INTERNAL_ERROR;
+		return delete_invalid_meta_stream(handle, smb_fname, mem_ctx,
+						  pnum_streams, pstreams);
 	}
 
+	/*
+	 * Now check if there's a delete-on-close pending on the stream. If so,
+	 * hide the stream. This behaviour was verified against a macOS 10.12
+	 * SMB server.
+	 */
+
 	sname = synthetic_smb_fname(talloc_tos(),
 				    smb_fname->base_name,
 				    AFPINFO_STREAM_NAME,
 				    NULL, 0);
 	if (sname == NULL) {
-		return NT_STATUS_NO_MEMORY;
+		status = NT_STATUS_NO_MEMORY;
+		goto out;
 	}
 
-	ret = SMB_VFS_NEXT_UNLINK(handle, sname);
-	TALLOC_FREE(sname);
+	ret = SMB_VFS_NEXT_STAT(handle, sname);
 	if (ret != 0) {
-		DBG_ERR("Removing [%s] failed\n", smb_fname_str_dbg(sname));
-		return map_nt_error_from_unix(errno);
+		status = map_nt_error_from_unix(errno);
+		goto out;
 	}
 
-	return NT_STATUS_OK;
+	id = SMB_VFS_NEXT_FILE_ID_CREATE(handle, &sname->st);
+
+	lck = get_existing_share_mode_lock(talloc_tos(), id);
+	if (lck == NULL) {
+		status = NT_STATUS_OK;
+		goto out;
+	}
+
+	full_name = talloc_asprintf(talloc_tos(),
+				    "%s%s",
+				    sname->base_name,
+				    AFPINFO_STREAM);
+	if (full_name == NULL) {
+		status = NT_STATUS_NO_MEMORY;
+		goto out;
+	}
+
+	status = file_name_hash(handle->conn, full_name, &name_hash);
+	if (!NT_STATUS_IS_OK(status)) {
+		goto out;
+	}
+
+	delete_on_close_set = is_delete_on_close_set(lck, name_hash);
+	if (delete_on_close_set) {
+		ok = del_fruit_stream(mem_ctx,
+				      pnum_streams,
+				      pstreams,
+				      AFPINFO_STREAM);
+		if (!ok) {
+			status = NT_STATUS_INTERNAL_ERROR;
+			goto out;
+		}
+	}
+
+	status  = NT_STATUS_OK;
+
+out:
+	TALLOC_FREE(sname);
+	TALLOC_FREE(lck);
+	TALLOC_FREE(full_name);
+	return status;
 }
 
 static NTSTATUS fruit_streaminfo_meta_netatalk(
diff -Npur samba-4.7.4/source3/modules/wscript_build samba-4.7.5/source3/modules/wscript_build
--- samba-4.7.4/source3/modules/wscript_build	2017-11-02 12:38:36.000000000 +0100
+++ samba-4.7.5/source3/modules/wscript_build	2018-02-07 09:37:51.000000000 +0100
@@ -509,3 +509,10 @@ bld.SAMBA3_MODULE('vfs_fake_dfq',
                  init_function='',
                  internal_module=bld.SAMBA3_IS_STATIC_MODULE('vfs_fake_dfq'),
                  enabled=bld.SAMBA3_IS_ENABLED_MODULE('vfs_fake_dfq'))
+
+bld.SAMBA3_MODULE('vfs_error_inject',
+                 subsystem='vfs',
+                 source='vfs_error_inject.c',
+                 init_function='',
+                 internal_module=bld.SAMBA3_IS_STATIC_MODULE('vfs_error_inject'),
+                 enabled=bld.SAMBA3_IS_ENABLED_MODULE('vfs_error_inject'))
diff -Npur samba-4.7.4/source3/script/tests/test_smbd_error.sh samba-4.7.5/source3/script/tests/test_smbd_error.sh
--- samba-4.7.4/source3/script/tests/test_smbd_error.sh	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.7.5/source3/script/tests/test_smbd_error.sh	2018-02-07 09:37:51.000000000 +0100
@@ -0,0 +1,56 @@
+#!/bin/sh
+#
+# Test smbd with failing chdir system call.
+#
+# Verify that smbd does not panic when the chdir system call is
+# returning an error.  ensure that the output format for ACL entries
+#
+# Copyright (C) 2017 Christof Schmitt
+
+. $(dirname $0)/../../../testprogs/blackbox/subunit.sh
+failed=0
+error_inject_conf=$(dirname $SMB_CONF_PATH)/error_inject.conf
+
+panic_count_0=$(grep -c PANIC $SMBD_TEST_LOG)
+
+#
+# Verify that a panic in smbd will result in a PANIC message in the log
+#
+
+# As a panic is expected here, also overwrite the default "panic
+# action" in selftest to not start a debugger
+echo 'error_inject:chdir = panic' > $error_inject_conf
+echo '[global]' >> $error_inject_conf
+echo 'panic action = ""' >> $error_inject_conf
+
+testit_expect_failure "smbclient" $VALGRIND \
+		      $BINDIR/smbclient //$SERVER_IP/error_inject \
+		      -U$USERNAME%$PASSWORD  -c dir ||
+	failed=$(expr $failed + 1)
+
+rm $error_inject_conf
+
+panic_count_1=$(grep -c PANIC $SMBD_TEST_LOG)
+
+testit "check_panic_1" test $(expr $panic_count_0 + 1) -eq $panic_count_1 ||
+	failed=$(expr $failed + 1)
+
+#
+# Verify that a failing chdir vfs call does not result in a smbd panic
+#
+
+echo 'error_inject:chdir = ESTALE' > $error_inject_conf
+
+testit_expect_failure "smbclient" $VALGRIND \
+		      $BINDIR/smbclient //$SERVER_IP/error_inject \
+		      -U$USERNAME%$PASSWORD  -c dir ||
+	failed=$(expr $failed + 1)
+
+panic_count_2=$(grep -c PANIC $SMBD_TEST_LOG)
+
+testit "check_panic_2" test $panic_count_1 -eq $panic_count_2 ||
+	failed=$(expr $failed + 1)
+
+rm $error_inject_conf
+
+testok $0 $failed
diff -Npur samba-4.7.4/source3/selftest/tests.py samba-4.7.5/source3/selftest/tests.py
--- samba-4.7.4/source3/selftest/tests.py	2017-12-22 21:40:58.000000000 +0100
+++ samba-4.7.5/source3/selftest/tests.py	2018-02-07 09:37:51.000000000 +0100
@@ -572,6 +572,9 @@ plantestsuite("samba3.blackbox.net_tdb",
                 smbclient3, '$SERVER', 'tmp', '$USERNAME', '$PASSWORD',
                 configuration, '$LOCAL_PATH', '$LOCK_DIR' ])
 
+plantestsuite("samba3.blackbox.smbd_error", "simpleserver:local",
+              [ os.path.join(samba3srcdir, "script/tests/test_smbd_error.sh") ])
+
 plantestsuite("samba3.blackbox.net_cache_samlogon", "ad_member:local",
               [ os.path.join(samba3srcdir, "script/tests/test_net_cache_samlogon.sh"),
                 '$SERVER', 'tmp', '$DC_USERNAME', '$DC_PASSWORD'])
diff -Npur samba-4.7.4/source3/smbd/oplock.c samba-4.7.5/source3/smbd/oplock.c
--- samba-4.7.4/source3/smbd/oplock.c	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.5/source3/smbd/oplock.c	2018-02-07 09:37:51.000000000 +0100
@@ -56,7 +56,8 @@ NTSTATUS set_file_oplock(files_struct *f
 {
 	struct smbd_server_connection *sconn = fsp->conn->sconn;
 	struct kernel_oplocks *koplocks = sconn->oplocks.kernel_ops;
-	bool use_kernel = lp_kernel_oplocks(SNUM(fsp->conn)) && koplocks;
+	bool use_kernel = lp_kernel_oplocks(SNUM(fsp->conn)) &&
+			(koplocks != NULL);
 
 	if (fsp->oplock_type == LEVEL_II_OPLOCK) {
 		if (use_kernel &&
@@ -98,7 +99,8 @@ static void release_file_oplock(files_st
 {
 	struct smbd_server_connection *sconn = fsp->conn->sconn;
 	struct kernel_oplocks *koplocks = sconn->oplocks.kernel_ops;
-	bool use_kernel = lp_kernel_oplocks(SNUM(fsp->conn)) && koplocks;
+	bool use_kernel = lp_kernel_oplocks(SNUM(fsp->conn)) &&
+			(koplocks != NULL);
 
 	if ((fsp->oplock_type != NO_OPLOCK) &&
 	    use_kernel) {
@@ -131,13 +133,15 @@ static void downgrade_file_oplock(files_
 {
 	struct smbd_server_connection *sconn = fsp->conn->sconn;
 	struct kernel_oplocks *koplocks = sconn->oplocks.kernel_ops;
+	bool use_kernel = lp_kernel_oplocks(SNUM(fsp->conn)) &&
+			(koplocks != NULL);
 
 	if (!EXCLUSIVE_OPLOCK_TYPE(fsp->oplock_type)) {
 		DEBUG(0, ("trying to downgrade an already-downgraded oplock!\n"));
 		return;
 	}
 
-	if (koplocks) {
+	if (use_kernel) {
 		koplocks->ops->release_oplock(koplocks, fsp, LEVEL_II_OPLOCK);
 	}
 	fsp->oplock_type = LEVEL_II_OPLOCK;
@@ -729,12 +733,14 @@ static void add_oplock_timeout_handler(f
 {
 	struct smbd_server_connection *sconn = fsp->conn->sconn;
 	struct kernel_oplocks *koplocks = sconn->oplocks.kernel_ops;
+	bool use_kernel = lp_kernel_oplocks(SNUM(fsp->conn)) &&
+			(koplocks != NULL);
 
 	/*
 	 * If kernel oplocks already notifies smbds when an oplock break times
 	 * out, just return.
 	 */
-	if (koplocks &&
+	if (use_kernel &&
 	    (koplocks->flags & KOPLOCKS_TIMEOUT_NOTIFICATION)) {
 		return;
 	}
@@ -845,7 +851,8 @@ static void process_oplock_break_message
 		break_to &= ~SMB2_LEASE_READ;
 	}
 
-	use_kernel = lp_kernel_oplocks(SNUM(fsp->conn)) && koplocks;
+	use_kernel = lp_kernel_oplocks(SNUM(fsp->conn)) &&
+			(koplocks != NULL);
 	if (use_kernel && !(koplocks->flags & KOPLOCKS_LEVEL2_SUPPORTED)) {
 		DEBUG(10, ("Kernel oplocks don't allow level2\n"));
 		break_to &= ~SMB2_LEASE_READ;
@@ -1255,8 +1262,10 @@ void smbd_contend_level2_oplocks_begin(f
 {
 	struct smbd_server_connection *sconn = fsp->conn->sconn;
 	struct kernel_oplocks *koplocks = sconn->oplocks.kernel_ops;
+	bool use_kernel = lp_kernel_oplocks(SNUM(fsp->conn)) &&
+			(koplocks != NULL);
 
-	if (koplocks && koplocks->ops->contend_level2_oplocks_begin) {
+	if (use_kernel && koplocks->ops->contend_level2_oplocks_begin) {
 		koplocks->ops->contend_level2_oplocks_begin(fsp, type);
 		return;
 	}
@@ -1269,9 +1278,11 @@ void smbd_contend_level2_oplocks_end(fil
 {
 	struct smbd_server_connection *sconn = fsp->conn->sconn;
 	struct kernel_oplocks *koplocks = sconn->oplocks.kernel_ops;
+	bool use_kernel = lp_kernel_oplocks(SNUM(fsp->conn)) &&
+			(koplocks != NULL);
 
 	/* Only kernel oplocks implement this so far */
-	if (koplocks && koplocks->ops->contend_level2_oplocks_end) {
+	if (use_kernel && koplocks->ops->contend_level2_oplocks_end) {
 		koplocks->ops->contend_level2_oplocks_end(fsp, type);
 	}
 }
diff -Npur samba-4.7.4/source3/smbd/pysmbd.c samba-4.7.5/source3/smbd/pysmbd.c
--- samba-4.7.4/source3/smbd/pysmbd.c	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.5/source3/smbd/pysmbd.c	2018-02-07 09:37:51.000000000 +0100
@@ -234,6 +234,39 @@ static NTSTATUS get_nt_acl_conn(TALLOC_C
 	return status;
 }
 
+static int set_acl_entry_perms(SMB_ACL_ENTRY_T entry, mode_t perm_mask)
+{
+	SMB_ACL_PERMSET_T perms = NULL;
+
+	if (sys_acl_get_permset(entry, &perms) != 0) {
+		return -1;
+	}
+
+	if (sys_acl_clear_perms(perms) != 0) {
+		return -1;
+	}
+
+	if ((perm_mask & SMB_ACL_READ) != 0 &&
+	    sys_acl_add_perm(perms, SMB_ACL_READ) != 0) {
+		return -1;
+	}
+
+	if ((perm_mask & SMB_ACL_WRITE) != 0 &&
+	    sys_acl_add_perm(perms, SMB_ACL_WRITE) != 0) {
+		return -1;
+	}
+
+	if ((perm_mask & SMB_ACL_EXECUTE) != 0 &&
+	    sys_acl_add_perm(perms, SMB_ACL_EXECUTE) != 0) {
+		return -1;
+	}
+
+	if (sys_acl_set_permset(entry, perms) != 0) {
+		return -1;
+	}
+
+	return 0;
+}
 
 static SMB_ACL_T make_simple_acl(gid_t gid, mode_t chmod_mode)
 {
@@ -261,7 +294,7 @@ static SMB_ACL_T make_simple_acl(gid_t g
 		return NULL;
 	}
 
-	if (sys_acl_set_permset(entry, &mode_user) != 0) {
+	if (set_acl_entry_perms(entry, mode_user) != 0) {
 		TALLOC_FREE(frame);
 		return NULL;
 	}
@@ -276,7 +309,7 @@ static SMB_ACL_T make_simple_acl(gid_t g
 		return NULL;
 	}
 
-	if (sys_acl_set_permset(entry, &mode_group) != 0) {
+	if (set_acl_entry_perms(entry, mode_group) != 0) {
 		TALLOC_FREE(frame);
 		return NULL;
 	}
@@ -291,7 +324,7 @@ static SMB_ACL_T make_simple_acl(gid_t g
 		return NULL;
 	}
 
-	if (sys_acl_set_permset(entry, &mode_other) != 0) {
+	if (set_acl_entry_perms(entry, mode_other) != 0) {
 		TALLOC_FREE(frame);
 		return NULL;
 	}
@@ -312,7 +345,7 @@ static SMB_ACL_T make_simple_acl(gid_t g
 			return NULL;
 		}
 
-		if (sys_acl_set_permset(entry, &mode_group) != 0) {
+		if (set_acl_entry_perms(entry, mode_group) != 0) {
 			TALLOC_FREE(frame);
 			return NULL;
 		}
@@ -328,7 +361,7 @@ static SMB_ACL_T make_simple_acl(gid_t g
 		return NULL;
 	}
 
-	if (sys_acl_set_permset(entry, &mode) != 0) {
+	if (set_acl_entry_perms(entry, mode) != 0) {
 		TALLOC_FREE(frame);
 		return NULL;
 	}
diff -Npur samba-4.7.4/source3/smbd/server_exit.c samba-4.7.5/source3/smbd/server_exit.c
--- samba-4.7.4/source3/smbd/server_exit.c	2017-08-29 06:12:36.000000000 +0200
+++ samba-4.7.5/source3/smbd/server_exit.c	2018-02-07 09:37:51.000000000 +0100
@@ -150,8 +150,6 @@ static void exit_server_common(enum serv
 			DEBUG(0, ("exit_server_common: "
 				  "smb1srv_tcon_disconnect_all() failed (%s) - "
 				  "triggering cleanup\n", nt_errstr(status)));
-			how = SERVER_EXIT_ABNORMAL;
-			reason = "smb1srv_tcon_disconnect_all failed";
 		}
 
 		status = smbXsrv_session_logoff_all(xconn);
@@ -161,8 +159,6 @@ static void exit_server_common(enum serv
 			DEBUG(0, ("exit_server_common: "
 				  "smbXsrv_session_logoff_all() failed (%s) - "
 				  "triggering cleanup\n", nt_errstr(status)));
-			how = SERVER_EXIT_ABNORMAL;
-			reason = "smbXsrv_session_logoff_all failed";
 		}
 	}
 
diff -Npur samba-4.7.4/source3/wscript samba-4.7.5/source3/wscript
--- samba-4.7.4/source3/wscript	2017-12-22 21:40:58.000000000 +0100
+++ samba-4.7.5/source3/wscript	2018-02-07 09:37:51.000000000 +0100
@@ -119,7 +119,6 @@ def configure(conf):
     conf.CHECK_FUNCS('memalign posix_memalign hstrerror')
     conf.CHECK_FUNCS('shmget')
     conf.CHECK_FUNCS_IN('shm_open', 'rt', checklibc=True)
-    #FIXME: for some reason this one still fails
     conf.CHECK_FUNCS_IN('yp_get_default_domain', 'nsl')
     conf.CHECK_FUNCS_IN('dn_expand _dn_expand __dn_expand', 'resolv')
     conf.CHECK_FUNCS_IN('dn_expand', 'inet')
@@ -634,6 +633,11 @@ msg.msg_accrightslen = sizeof(fd);
                     headers='netdb.h netgroup.h',
                     cflags=netgrent_cflags)
 
+    if (conf.CONFIG_SET('HAVE_YP_GET_DEFAULT_DOMAIN') and
+        conf.CONFIG_SET('HAVE_SETNETGRENT') and
+        conf.CONFIG_SET('HAVE_ENDNETGRENT') and
+        conf.CONFIG_SET('HAVE_GETNETGRENT')):
+           conf.DEFINE('HAVE_NETGROUP', '1')
 
     # Look for CUPS
     if Options.options.with_cups:
@@ -1477,11 +1481,23 @@ main() {
         #darwin style quota bytecount
         conf.CHECK_STRUCTURE_MEMBER('struct dqblk', 'dqb_curbytes', define='HAVE_STRUCT_DQBLK_DQB_CURBYTES',
                                 headers='sys/quota.h')
-        if conf.CHECK_HEADERS('rpcsvc/rquota.h'):
-            conf.DEFINE('HAVE_NFS_QUOTAS', '1')
+        if conf.CHECK_HEADERS('rpcsvc/rquota.h', lib='tirpc'):
+            # Optional structure member
             conf.CHECK_STRUCTURE_MEMBER('struct getquota_rslt', 'getquota_rslt_u',
                                         define='HAVE_GETQUOTA_RSLT_GETQUOTA_RSLT_U',
-                                        headers='rpcsvc/rquota.h')
+                                        headers='rpcsvc/rquota.h',
+                                        lib='tirpc')
+
+            # Required fucntion for NFS quote support
+            conf.CHECK_CODE('''
+                            clnt_create("", RQUOTAPROG, RQUOTAVERS, "udp");
+                            ''',
+                            headers="rpc/rpc.h rpc/types.h rpcsvc/rquota.h rpc/nettype.h rpc/xdr.h",
+                            define='HAVE_NFS_QUOTAS',
+                            msg='checking for clnt_create()',
+                            execute=True,
+                            local_include=False,
+                            lib='tirpc')
 
         if (host_os.rfind('linux') > -1):
             conf.DEFINE('HAVE_QUOTACTL_LINUX', '1')
@@ -1508,15 +1524,6 @@ main() {
                                 execute=True,
                                 addmain=False)
 
-        conf.CHECK_CODE('''
-                     clnt_create("", RQUOTAPROG, RQUOTAVERS, "udp");
-''',
-                        headers="rpc/rpc.h rpc/types.h rpcsvc/rquota.h rpc/nettype.h rpc/xdr.h", 
-                        define='HAVE_NFS_QUOTAS',
-                        msg='for NFS QUOTAS',
-                        execute=True,
-                        local_include=False)
-
         if conf.CONFIG_SET('HAVE_QUOTACTL_LINUX') or \
            conf.CONFIG_SET('HAVE_QUOTACTL_4A') or \
            conf.CONFIG_SET('HAVE_QUOTACTL_4B') or \
@@ -1703,6 +1710,7 @@ main() {
 
     if Options.options.enable_selftest or Options.options.developer:
         default_shared_modules.extend(TO_LIST('vfs_fake_acls vfs_nfs4acl_xattr'))
+        default_shared_modules.extend(TO_LIST('vfs_error_inject'))
 
     if conf.CONFIG_SET('AD_DC_BUILD_IS_ENABLED'):
         default_static_modules.extend(TO_LIST('pdb_samba_dsdb auth_samba4 vfs_dfs_samba4'))
diff -Npur samba-4.7.4/source3/wscript_build samba-4.7.5/source3/wscript_build
--- samba-4.7.4/source3/wscript_build	2017-07-25 11:09:58.000000000 +0200
+++ samba-4.7.5/source3/wscript_build	2018-02-07 09:37:51.000000000 +0100
@@ -615,7 +615,7 @@ bld.SAMBA3_SUBSYSTEM('sysquotas',
                         lib/sysquotas_nfs.c
                      ''',
                      allow_warnings=True,
-                     deps='samba3-util samba-util')
+                     deps='samba3-util samba-util tirpc')
 
 NOTIFY_SOURCES=''
 NOTIFY_DEPS=''
diff -Npur samba-4.7.4/source4/dsdb/samdb/ldb_modules/repl_meta_data.c samba-4.7.5/source4/dsdb/samdb/ldb_modules/repl_meta_data.c
--- samba-4.7.4/source4/dsdb/samdb/ldb_modules/repl_meta_data.c	2017-12-22 21:40:58.000000000 +0100
+++ samba-4.7.5/source4/dsdb/samdb/ldb_modules/repl_meta_data.c	2018-02-07 09:37:51.000000000 +0100
@@ -2837,11 +2837,23 @@ static int replmd_modify_la_delete(struc
 
 	if (vanish_links) {
 		unsigned j = 0;
+		struct ldb_val *tmp_vals = NULL;
+
+		tmp_vals = talloc_array(tmp_ctx, struct ldb_val,
+					old_el->num_values);
+		if (tmp_vals == NULL) {
+			talloc_free(tmp_ctx);
+			return ldb_module_oom(module);
+		}
 		for (i = 0; i < old_el->num_values; i++) {
-			if (old_dns[i].v != NULL) {
-				old_el->values[j] = *old_dns[i].v;
-				j++;
+			if (old_dns[i].v == NULL) {
+				continue;
 			}
+			tmp_vals[j] = *old_dns[i].v;
+			j++;
+		}
+		for (i = 0; i < j; i++) {
+			old_el->values[i] = tmp_vals[i];
 		}
 		old_el->num_values = j;
 	}
diff -Npur samba-4.7.4/source4/heimdal/kdc/pkinit.c samba-4.7.5/source4/heimdal/kdc/pkinit.c
--- samba-4.7.4/source4/heimdal/kdc/pkinit.c	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.5/source4/heimdal/kdc/pkinit.c	2018-02-07 09:37:51.000000000 +0100
@@ -361,7 +361,7 @@ get_dh_param(krb5_context context,
     }
 
     ret = _krb5_dh_group_ok(context, config->pkinit_dh_min_bits,
-			    &dhparam.p, &dhparam.g, &dhparam.q, moduli,
+			    &dhparam.p, &dhparam.g, dhparam.q, moduli,
 			    &client_params->dh_group_name);
     if (ret) {
 	/* XXX send back proposal of better group */
@@ -381,9 +381,12 @@ get_dh_param(krb5_context context,
     dh->g = integer_to_BN(context, "DH base", &dhparam.g);
     if (dh->g == NULL)
 	goto out;
-    dh->q = integer_to_BN(context, "DH p-1 factor", &dhparam.q);
-    if (dh->g == NULL)
-	goto out;
+
+    if (dhparam.q) {
+	dh->q = integer_to_BN(context, "DH p-1 factor", dhparam.q);
+	if (dh->q == NULL)
+	    goto out;
+    }
 
     {
 	heim_integer glue;
diff -Npur samba-4.7.4/source4/heimdal/lib/asn1/rfc2459.asn1 samba-4.7.5/source4/heimdal/lib/asn1/rfc2459.asn1
--- samba-4.7.4/source4/heimdal/lib/asn1/rfc2459.asn1	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.5/source4/heimdal/lib/asn1/rfc2459.asn1	2018-02-07 09:37:51.000000000 +0100
@@ -239,7 +239,7 @@ ValidationParms ::= SEQUENCE {
 DomainParameters ::= SEQUENCE {
 	p		INTEGER, -- odd prime, p=jq +1
 	g		INTEGER, -- generator, g
-	q		INTEGER, -- factor of p-1
+	q		INTEGER OPTIONAL, -- factor of p-1
 	j		INTEGER OPTIONAL, -- subgroup factor
 	validationParms	ValidationParms OPTIONAL -- ValidationParms
 }
diff -Npur samba-4.7.4/source4/heimdal/lib/krb5/pkinit.c samba-4.7.5/source4/heimdal/lib/krb5/pkinit.c
--- samba-4.7.4/source4/heimdal/lib/krb5/pkinit.c	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.5/source4/heimdal/lib/krb5/pkinit.c	2018-02-07 09:37:51.000000000 +0100
@@ -497,7 +497,12 @@ build_auth_pack(krb5_context context,
 		free_DomainParameters(&dp);
 		return ret;
 	    }
-	    ret = BN_to_integer(context, dh->q, &dp.q);
+	    dp.q = calloc(1, sizeof(*dp.q));
+	    if (dp.q == NULL) {
+		free_DomainParameters(&dp);
+		return ENOMEM;
+	    }
+	    ret = BN_to_integer(context, dh->q, dp.q);
 	    if (ret) {
 		free_DomainParameters(&dp);
 		return ret;
diff -Npur samba-4.7.4/source4/smbd/server.c samba-4.7.5/source4/smbd/server.c
--- samba-4.7.4/source4/smbd/server.c	2017-12-22 21:40:58.000000000 +0100
+++ samba-4.7.5/source4/smbd/server.c	2018-02-07 09:37:51.000000000 +0100
@@ -128,12 +128,10 @@ static void sig_term(int sig)
 		 * We're the process group leader, send
 		 * SIGTERM to our process group.
 		 */
-		DEBUG(0,("SIGTERM: killing children\n"));
 		kill(-getpgrp(), SIGTERM);
 	}
 #endif
-	DEBUG(0,("Exiting pid %d on SIGTERM\n", (int)getpid()));
-	exit(127);
+	_exit(127);
 }
 
 static void sigterm_signal_handler(struct tevent_context *ev,
diff -Npur samba-4.7.4/source4/torture/vfs/fruit.c samba-4.7.5/source4/torture/vfs/fruit.c
--- samba-4.7.4/source4/torture/vfs/fruit.c	2017-12-22 21:40:58.000000000 +0100
+++ samba-4.7.5/source4/torture/vfs/fruit.c	2018-02-07 09:37:51.000000000 +0100
@@ -909,7 +909,7 @@ static char *torture_afpinfo_pack(TALLOC
 {
 	char *buf;
 
-	buf = talloc_array(mem_ctx, char, AFP_INFO_SIZE);
+	buf = talloc_zero_array(mem_ctx, char, AFP_INFO_SIZE);
 	if (buf == NULL) {
 		return NULL;
 	}
@@ -3346,11 +3346,17 @@ static bool test_afpinfo_all0(struct tor
 {
 	bool ret = true;
 	NTSTATUS status;
-	struct smb2_handle h1;
+	struct smb2_create create;
+	struct smb2_handle h1 = {{0}};
+	struct smb2_handle baseh = {{0}};
+	union smb_setfileinfo setfinfo;
+	union smb_fileinfo getfinfo;
 	TALLOC_CTX *mem_ctx = talloc_new(tctx);
 	const char *fname = BASEDIR "\\file";
+	const char *sname = BASEDIR "\\file" AFPINFO_STREAM;
 	const char *type_creator = "SMB,OLE!";
 	AfpInfo *info = NULL;
+	char *infobuf = NULL;
 	const char *streams_basic[] = {
 		"::$DATA"
 	};
@@ -3381,13 +3387,88 @@ static bool test_afpinfo_all0(struct tor
 
 	/* Write all 0 to AFP_AfpInfo */
 	memset(info->afpi_FinderInfo, 0, AFP_FinderSize);
-	ret = torture_write_afpinfo(tree, tctx, mem_ctx, fname, info);
-	torture_assert_goto(tctx, ret == true, ret, done, "torture_write_afpinfo failed");
+	infobuf = torture_afpinfo_pack(mem_ctx, info);
+	torture_assert_not_null_goto(tctx, infobuf, ret, done,
+				     "torture_afpinfo_pack failed\n");
+
+	ZERO_STRUCT(create);
+	create.in.desired_access = SEC_FILE_ALL;
+	create.in.file_attributes = FILE_ATTRIBUTE_NORMAL;
+	create.in.create_disposition = NTCREATEX_DISP_OPEN;
+	create.in.share_access = NTCREATEX_SHARE_ACCESS_MASK;
+	create.in.fname = fname;
+
+	status = smb2_create(tree, mem_ctx, &create);
+	torture_assert_goto(tctx, ret == true, ret, done,
+			    "smb2_create failed\n");
+	baseh = create.out.file.handle;
+
+	ZERO_STRUCT(create);
+	create.in.desired_access = SEC_FILE_ALL;
+	create.in.file_attributes = FILE_ATTRIBUTE_NORMAL;
+	create.in.create_disposition = NTCREATEX_DISP_OVERWRITE_IF;
+	create.in.fname = sname;
+
+	status = smb2_create(tree, mem_ctx, &create);
+	torture_assert_goto(tctx, ret == true, ret, done,
+			    "smb2_create failed\n");
+	h1 = create.out.file.handle;
+
+	status = smb2_util_write(tree, h1, infobuf, 0, AFP_INFO_SIZE);
+	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"smb2_util_write failed\n");
+
+	/*
+	 * Get stream information on open handle, must return only default
+	 * stream, the AFP_AfpInfo stream must not be returned.
+	 */
+
+	ZERO_STRUCT(getfinfo);
+	getfinfo.generic.level = RAW_FILEINFO_STREAM_INFORMATION;
+	getfinfo.generic.in.file.handle = baseh;
+
+	status = smb2_getinfo_file(tree, tctx, &getfinfo);
+	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"get stream info\n");
+
+	torture_assert_int_equal_goto(tctx, getfinfo.stream_info.out.num_streams,
+				      1, ret, done, "stream count");
+
+	smb2_util_close(tree, baseh);
+	ZERO_STRUCT(baseh);
+
+	/*
+	 * Try to set some file-basic-info (time) on the stream. This catches
+	 * naive implementation mistakes that simply deleted the backing store
+	 * from the filesystem in the zero-out step.
+	 */
+
+	ZERO_STRUCT(setfinfo);
+	unix_to_nt_time(&setfinfo.basic_info.in.write_time, time(NULL));
+	setfinfo.basic_info.in.attrib = 0x20;
+	setfinfo.generic.level = RAW_SFILEINFO_BASIC_INFORMATION;
+	setfinfo.generic.in.file.handle = h1;
+
+	status = smb2_setinfo_file(tree, &setfinfo);
+	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"smb2_getinfo_file failed\n");
+
+	ret = check_stream_list(tree, tctx, fname, 1, streams_basic, false);
+	torture_assert_goto(tctx, ret == true, ret, done, "check_stream_list");
+
+	smb2_util_close(tree, h1);
+	ZERO_STRUCT(h1);
 
 	ret = check_stream_list(tree, tctx, fname, 1, streams_basic, false);
 	torture_assert_goto(tctx, ret == true, ret, done, "Bad streams");
 
 done:
+	if (!smb2_util_handle_empty(h1)) {
+		smb2_util_close(tree, h1);
+	}
+	if (!smb2_util_handle_empty(baseh)) {
+		smb2_util_close(tree, baseh);
+	}
 	smb2_util_unlink(tree, fname);
 	smb2_util_rmdir(tree, BASEDIR);
 	return ret;
diff -Npur samba-4.7.4/testprogs/blackbox/dbcheck-links.sh samba-4.7.5/testprogs/blackbox/dbcheck-links.sh
--- samba-4.7.4/testprogs/blackbox/dbcheck-links.sh	2017-12-22 21:40:58.000000000 +0100
+++ samba-4.7.5/testprogs/blackbox/dbcheck-links.sh	2018-02-07 09:37:51.000000000 +0100
@@ -131,6 +131,80 @@ check_expected_after_duplicate_links() {
     fi
 }
 
+forward_link_corruption() {
+    #
+    # Step1: add a duplicate forward link from
+    # "CN=Enterprise Admins" to "CN=Administrator"
+    #
+    LDIF1=$(TZ=UTC $ldbsearch -H tdb://$PREFIX_ABS/${RELEASE}/private/sam.ldb -b 'CN=Enterprise Admins,CN=users,DC=release-4-5-0-pre1,DC=samba,DC=corp' -s base --reveal --extended-dn member)
+    DN=$(echo "${LDIF1}" | grep '^dn: ')
+    MSG=$(echo "${LDIF1}" | grep -v '^dn: ' | grep -v '^#' | grep -v '^$')
+    ldif=$PREFIX_ABS/${RELEASE}/forward_link_corruption1.ldif
+    {
+	echo "${DN}"
+	echo "changetype: modify"
+	echo "replace: member"
+	echo "${MSG}"
+	echo "${MSG}" | sed -e 's!RMD_LOCAL_USN=[1-9][0-9]*!RMD_LOCAL_USN=0!'
+    } > $ldif
+
+    out=$(TZ=UTC $ldbmodify -H tdb://$PREFIX_ABS/${RELEASE}/private/sam.ldb.d/DC%3DRELEASE-4-5-0-PRE1,DC%3DSAMBA,DC%3DCORP.ldb $ldif)
+    if [ "$?" != "0" ]; then
+	echo "ldbmodify returned:\n$out"
+	return 1
+    fi
+
+    #
+    # Step2: add user "dangling"
+    #
+    ldif=$PREFIX_ABS/${RELEASE}/forward_link_corruption2.ldif
+    cat > $ldif <<EOF
+dn: CN=dangling,CN=users,DC=release-4-5-0-pre1,DC=samba,DC=corp
+changetype: add
+objectclass: user
+samaccountname: dangling
+objectGUID: fd8a04ac-cea0-4921-b1a6-c173e1155c22
+EOF
+
+    out=$(TZ=UTC $ldbmodify -H tdb://$PREFIX_ABS/${RELEASE}/private/sam.ldb --relax $ldif)
+    if [ "$?" != "0" ]; then
+	echo "ldbmodify returned:\n$out"
+	return 1
+    fi
+
+    #
+    # Step3: add a dangling backlink from
+    # "CN=dangling" to "CN=Enterprise Admins"
+    #
+    ldif=$PREFIX_ABS/${RELEASE}/forward_link_corruption3.ldif
+    {
+	echo "dn: CN=dangling,CN=users,DC=release-4-5-0-pre1,DC=samba,DC=corp"
+	echo "changetype: modify"
+	echo "add: memberOf"
+	echo "memberOf: <GUID=304ad703-468b-465e-9787-470b3dfd7d75>;<SID=S-1-5-21-4177067393-1453636373-93818738-519>;CN=Enterprise Admins,CN=Users,DC=release-4-5-0-pre1,DC=samba,DC=corp"
+    } > $ldif
+
+    out=$(TZ=UTC $ldbmodify -H tdb://$PREFIX_ABS/${RELEASE}/private/sam.ldb.d/DC%3DRELEASE-4-5-0-PRE1,DC%3DSAMBA,DC%3DCORP.ldb $ldif)
+    if [ "$?" != "0" ]; then
+	echo "ldbmodify returned:\n$out"
+	return 1
+    fi
+}
+
+dbcheck_forward_link_corruption() {
+    dbcheck "-forward-link-corruption" "1" ""
+    return $?
+}
+
+check_expected_after_dbcheck_forward_link_corruption() {
+    tmpldif=$PREFIX_ABS/$RELEASE/expected-after-dbcheck-forward-link-corruption.ldif.tmp
+    TZ=UTC $ldbsearch -H tdb://$PREFIX_ABS/${RELEASE}/private/sam.ldb '(|(cn=dangling)(cn=enterprise admins))' -s sub -b DC=release-4-5-0-pre1,DC=samba,DC=corp --show-deleted --sorted memberOf member > $tmpldif
+    diff $tmpldif $release_dir/expected-after-dbcheck-forward-link-corruption.ldif
+    if [ "$?" != "0" ]; then
+	return 1
+    fi
+}
+
 dbcheck_dangling_multi_valued() {
 
     $PYTHON $BINDIR/samba-tool dbcheck -H tdb://$PREFIX_ABS/${RELEASE}/private/sam.ldb --fix --yes
@@ -198,6 +272,10 @@ if [ -d $release_dir ]; then
     testit "dbcheck_duplicate_member" dbcheck_duplicate_member
     testit "check_expected_after_duplicate_links" check_expected_after_duplicate_links
     testit "duplicate_clean" dbcheck_clean
+    testit "forward_link_corruption" forward_link_corruption
+    testit "dbcheck_forward_link_corruption" dbcheck_forward_link_corruption
+    testit "check_expected_after_dbcheck_forward_link_corruption" check_expected_after_dbcheck_forward_link_corruption
+    testit "forward_link_corruption_clean" dbcheck_clean
     testit "dangling_one_way_link" dangling_one_way_link
     testit "dbcheck_one_way" dbcheck_one_way
     testit "dbcheck_clean2" dbcheck_clean
diff -Npur samba-4.7.4/testprogs/blackbox/tombstones-expunge.sh samba-4.7.5/testprogs/blackbox/tombstones-expunge.sh
--- samba-4.7.4/testprogs/blackbox/tombstones-expunge.sh	2017-07-04 12:05:26.000000000 +0200
+++ samba-4.7.5/testprogs/blackbox/tombstones-expunge.sh	2018-02-07 09:37:51.000000000 +0100
@@ -92,6 +92,19 @@ add_four_more_links() {
     fi
 }
 
+add_unsorted_links() {
+    ldif=$release_dir/add-unsorted-links-step1.ldif
+    TZ=UTC $ldbmodify -H tdb://$PREFIX_ABS/${RELEASE}/private/sam.ldb $ldif --relax
+    if [ "$?" != "0" ]; then
+	return 1
+    fi
+    ldif=$release_dir/add-unsorted-links-step2.ldif
+    TZ=UTC $ldbmodify -H tdb://$PREFIX_ABS/${RELEASE}/private/sam.ldb.d/DC%3DRELEASE-4-5-0-PRE1,DC%3DSAMBA,DC%3DCORP.ldb $ldif
+    if [ "$?" != "0" ]; then
+	return 1
+    fi
+}
+
 remove_one_link() {
     ldif=$release_dir/remove-one-more-link.ldif
     TZ=UTC $ldbmodify -H tdb://$PREFIX_ABS/${RELEASE}/private/sam.ldb $ldif
@@ -176,6 +189,15 @@ check_expected_after_objects() {
     fi
 }
 
+check_expected_unsorted_links() {
+    tmpldif=$PREFIX_ABS/$RELEASE/expected-unsorted-links-after-expunge.ldif.tmp
+    TZ=UTC $ldbsearch -H tdb://$PREFIX_ABS/${RELEASE}/private/sam.ldb '(name=unsorted-g)' -s sub -b DC=release-4-5-0-pre1,DC=samba,DC=corp --show-deleted --reveal --sorted member > $tmpldif
+    diff $tmpldif $release_dir/expected-unsorted-links-after-expunge.ldif
+    if [ "$?" != "0" ]; then
+	return 1
+    fi
+}
+
 if [ -d $release_dir ]; then
     testit $RELEASE undump
     testit "add_two_more_users" add_two_more_users
@@ -192,10 +214,12 @@ if [ -d $release_dir ]; then
     testit_expect_failure "check_match_rule_links_decimal" check_match_rule_links_decimal
     testit_expect_failure "check_match_rule_links_backlink" check_match_rule_links_backlink
     testit_expect_failure "check_match_rule_links_notlink" check_match_rule_links_notlink
+    testit "add_unsorted_links" add_unsorted_links
     testit "tombstones_expunge" tombstones_expunge
     testit "check_expected_after_deleted_links" check_expected_after_deleted_links
     testit "check_expected_after_links" check_expected_after_links
     testit "check_expected_after_objects" check_expected_after_objects
+    testit "check_expected_unsorted_links" check_expected_unsorted_links
 else
     subunit_start_test $RELEASE
     subunit_skip_test $RELEASE <<EOF
